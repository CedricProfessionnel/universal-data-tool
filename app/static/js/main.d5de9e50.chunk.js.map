{"version":3,"sources":["components/Theme/index.js","components/HotkeyStorage/default-hotkeys.js","components/HotkeyStorage/index.js","components/AppConfig/index.js","utils/auth-handlers/cognito-handler.js","utils/auth-handlers/use-auth.js","components/LoginDrawer/SignIn.js","components/LoginDrawer/CompleteSignUp.js","components/LoginDrawer/index.js","utils/use-electron.js","utils/use-posthog.js","components/CollaborateButton/index.js","components/HeaderPopupBox/index.js","components/DownloadButton/index.js","components/Header/GithubIcon.js","utils/get-brush-color-palette.js","components/BrushButton/index.js","components/HeaderToolbar/SlackIcon.js","components/HeaderToolbar/index.js","components/StartingPage/templates.js","components/HeaderDrawer/index.js","components/Header/index.js","components/SimpleDialog/index.js","components/CreateFromTemplateDialog/index.js","components/AddAuthFromTemplateDialog/cognito-icon.js","components/AddAuthFromTemplateDialog/authTemplates.js","components/ErrorToasts/index.js","utils/use-errors.js","components/AddAuthFromTemplateDialog/index.js","components/StartingPage/get-embed-youtube-url.js","components/StartingPage/index.js","components/DatasetEditor/EditableTitleText.js","components/SampleGrid/index.js","components/PasteUrlsDialog/get-sample-from-url.js","components/PasteUrlsDialog/index.js","utils/get-sample-name-from-url.js","utils/RecognizeFileExtension.js","utils/dataset-helper/get-files-differences.js","utils/dataset-helper/index.js","components/ImportFromCognitoS3Dialog/get-annotation-from-aws.js","components/ImportFromCognitoS3Dialog/get-images-from-aws.js","components/ImportFromCognitoS3Dialog/check-interface-and-sample-type.js","components/ImportFromCognitoS3Dialog/set-annotation-from-aws.js","components/ImportFromCognitoS3Dialog/index.js","components/ImportFromCognitoS3Dialog/init-config-import.js","components/ImportFromCognitoS3Dialog/set-type-of-file-to-load-and-disable.js","components/ImportFromCognitoS3Dialog/set-button-add-sample-name.js","components/ImportPage/S3Icon.js","components/S3PathSelector/index.js","utils/use-is-desktop.js","utils/auth-handlers/use-iam-s3-api.js","utils/from-udt-csv.js","components/ImportFromS3Dialog/index.js","components/MultiFileDrop/index.js","components/UploadToS3Dialog/index.js","components/TextAreaWithUpload/index.js","components/ImportTextSnippetsDialog/index.js","components/ImportFromGoogleDriveDialog/index.js","components/ImportUDTFileDialog/index.js","components/ImportToyDatasetDialog/index.js","components/ImportFromYoutubeUrls/download-youtube-video.js","components/ProgressBar/index.js","components/ImportFromYoutubeUrls/progress.js","components/ImportFromYoutubeUrls/get-youtube-video-information.js","components/ImportFromYoutubeUrls/split-urls-from-text-area.js","components/ImportFromYoutubeUrls/index.js","components/ImportFromCOCODialog/index.js","components/ImportPage/prompt-and-get-samples-from-local-directory.js","components/ImportPage/index.js","components/TransformVideoKeyframesDialog/index.js","components/DownloadURLsDialog/index.js","components/TransformVideoFramesToImagesDialog/index.js","components/TransformLocalFilesToWebURLs/functions/upload-file-to-transfersh.js","components/TransformLocalFilesToWebURLs/functions/split-file-name-from-file-url.js","components/TransformLocalFilesToWebURLs/functions/get-file-url-key.js","components/TransformLocalFilesToWebURLs/functions/transform-file-urls-to-web-urls.js","components/TransformLocalFilesToWebURLs/index.js","components/TransformImageSamplesIntoSegmentsDialog/index.js","components/TransformSegmentsIntoImageSamplesDialog/index.js","components/TransformRemoveInvalidSamplesDialog/index.js","components/Toasts/index.js","components/PluginProvider/index.js","components/PluginDialog/index.js","components/TransformPage/index.js","components/SamplesView/index.js","components/ConfigureImageSegmentation/index.js","components/ConfigureImagePixelSegmentation/index.js","components/ConfigureImageClassification/index.js","components/ConfigureTextClassification/index.js","components/ConfigureAudioTranscription/index.js","components/ConfigureTextEntityRecognition/index.js","components/ConfigureTextEntityRelations/index.js","components/ConfigureDataEntry/index.js","components/ConfigureComposite/index.js","components/Configure3D/index.js","components/ConfigureVideoSegmentation/index.js","components/ConfigureImageLandmarkAnnotation/index.js","components/ConfigureInterface/index.js","components/KeyboardShortcutManagerDialog/index.js","components/AdvancedOptionsView/index.js","components/BigInterfaceSelect/index.js","i18n/index.js","utils/use-clobbered-state.js","components/TextClassification/index.js","components/TextEntityRecognition/convert-react-nlp-annotate-types.js","components/TextEntityRecognition/index.js","components/TextEntityRelations/index.js","utils/ria-format.js","components/ImageSegmentation/index.js","components/WorkspaceContainer/index.js","components/ImageClassification/index.js","components/VideoSegmentation/index.js","components/AudioTranscription/index.js","components/ImageLandmarkAnnotation/index.js","utils/get-task-description.js","components/SampleContainer/LinkButton.js","components/SampleContainer/index.js","components/DataEntry/index.js","components/BadOHA/index.js","components/EmptySampleContainer/index.js","components/InterfaceIcon/index.js","components/Composite/index.js","components/UniversalDataViewer/index.js","components/RawJSONEditor/index.js","components/SetupPage/index.js","components/EditSampleDialog/index.js","utils/sentry.js","components/LabelErrorBoundary/index.js","components/Stats/index.js","components/LabelHelpView/api-key-entry.js","components/PaperContainer/index.js","components/FileContext/use-active-dataset.js","components/FileContext/index.js","components/LabelHelpView/label-help-dialog-content.js","components/LabelHelpView/LabelHelpProvider.js","utils/use-is-label-only-mode.js","utils/compute-dataset-variable.js","components/LabelHelpView/use-label-help.js","components/LabelHelpView/index.js","components/ActiveLearningView/index.js","components/LabelView/index.js","components/DatasetEditor/index.js","utils/use-time-to-complete-sample.js","utils/file-handlers/use-server/get-human-readable-log.js","utils/file-handlers/use-server/apply-seamless-patch.js","utils/file-handlers/use-server/server-hash.js","utils/file-handlers/use-server/index.js","utils/file-handlers/use-server/handler.js","utils/to-udt-csv.js","utils/file-handlers/use-filesystem.js","utils/file-handlers/use-file-telemetry.js","utils/file-handlers/use-aws-cognito/index.js","utils/file-handlers/use-aws-cognito/update-aws-storage.js","utils/file-handlers/index.js","utils/file-handlers/use-local-storage.js","components/AppErrorBoundary/index.js","utils/use-prevent-navigation.js","components/ManagePluginsDialog/index.js","components/WebApp/index.js","components/DesktopApp/index.js","components/Loading/index.js","App.js","index.js"],"names":["theme","createMuiTheme","palette","primary","colors","secondary","typography","fontFamily","button","textTransform","children","ThemeProvider","defaultHotkeys","id","description","binding","HotkeyContext","createContext","hotkeys","changeHotkey","newBinding","useHotkeyStorage","useContext","HotkeyStorageProvider","useAppConfig","fromConfig","setInConfig","clearInConfig","useMemo","map","item","keyMap","contextValue","clearHotkeys","key","Provider","value","configKeyNames","defaultAppConfig","AppConfigContext","appConfig","s","JSON","parse","e","jsonParseOrEmpty","window","localStorage","app_config","setAppConfig","newConfig","keys","AppConfigProvider","useLocalStorage","includes","Error","undefined","stringify","config","CognitoHandler","authProvider","checkIfLoggedIn","a","Amplify","configure","authConfig","Auth","currentAuthenticatedUser","userHandle","user","isLoggedIn","hasChanged","setUser","Boolean","login","tryUser","logout","signOut","getState","this","identityPoolId","region","userPoolId","userPoolWebClientId","mandatorySignIn","authenticationFlowType","Storage","AWSS3","bucket","AuthContext","AuthProvider","useState","handler","setHandler","useReducer","state","handlerVersion","incHandlerVersion","useEffect","interval","setInterval","clearInterval","useAuth","ErrorText","styled","padding","color","useStyles","makeStyles","form","width","marginTop","spacing","submit","margin","onUserChange","onRequireCompleteSignUp","onClose","classes","error","setError","t","useTranslation","username","password","notAuthorizedException","setState","handleTextFieldChange","event","persist","prevState","target","name","signIn","then","challengeName","catch","err","code","console","log","toString","Typography","component","variant","className","noValidate","TextField","required","fullWidth","label","autoComplete","helperText","autoFocus","onChange","type","FormControlLabel","control","Checkbox","onClick","isEmpty","SignInAWS","requiredAttributes","requiredAttributesDict","requiredAttributesErrorDict","forEach","requiredAttribute","newPassword","newPasswordNotValid","newPasswordConfirmation","newPasswordNotEqualsConfirmation","capitalizeFirstLetter","string","charAt","toUpperCase","slice","_handleAttributesTextFieldChange","_handleTextFieldChange","newPasswordError","checkIfPasswordEqualsConfirmationPassword","_handleCantBeNull","allGood","onBlur","completeNewPassword","drawer","root","height","paper","display","flexDirection","alignItems","close","cursor","main","avatar","backgroundColor","loginDrawerOpen","signingIn","completeSignUp","Drawer","anchor","open","role","Grid","container","xs","sm","md","Paper","elevation","square","Avatar","SignIn","challengeParam","toggleCompleteSignUp","CompleteSignUp","require","posthogMock","opt_in_capturing","opt_out_capturing","init","reset","capture","capture_forms","capture_pageview","register","register_once","unregister","identify","alias","set_config","get_config","get_property","get_distinct_id","has_opted_out_capturing","has_opted_in_capturing","disable_all_events","people","set","set_once","posthogInitialized","isDesktop","useElectron","Cypress","posthog","api_host","autocapture","domain","location","origin","is_desktop","Container","position","marginLeft","borderColor","popupBoxBeforeAndAfter","bottom","left","border","content","pointerEvents","PopupBox","zIndex","top","boxSizing","borderRadius","minHeight","boxShadow","borderBottomColor","borderWidth","fontSize","opacity","transition","transform","CreateNewButton","Button","justifyContent","marginRight","ExitButton","fileOpen","inSession","onJoinSession","onCreateSession","onLeaveSession","sessionBoxOpen","changeSessionBoxOpen","loadingSession","changeLoadingSession","sessionUrl","changeSessionUrl","userName","changeUserName","usePosthog","setTimeout","title","onMouseEnter","onMouseLeave","IconButton","style","InputProps","endAdornment","InputAdornment","disabled","CircularProgress","size","StyledButton","textAlign","paddingTop","fontWeight","interfaceType","onDownload","changeOpen","HeaderPopupBox","href","GitHub","props","SvgIcon","d","fade","cmap","amt","newCmap","i","fadedGrey","isFaded","availableColors","colorMap","complete","incomplete","faded","review","ellipsis1","ellipsis2","ellipsis3","brush","seed","length","BrushCircle","OtherColorContainers","flexWrap","StyledIconButton","iconcolor","selected","marginBottom","paddingBottom","selectedBrush","onChangeSelectedBrush","handleClick","useEventCallback","memoize","getBrushColorPalette","SlackIcon","viewBox","headerButton","grow","flexGrow","list","tab","fullHeightTab","mixins","toolbar","breakpoints","down","minWidth","tabWrapper","getIcon","memo","tabs","currentTab","onChangeTab","additionalButtons","onOpenDrawer","isSmall","changeLoginDrawerOpen","collaborateError","isWelcomePage","c","AppBar","Toolbar","packageJSON","version","CollaborateButton","BrushButton","DownloadButton","Tabs","newTab","toLowerCase","Tab","wrapper","icon","GithubIcon","Box","paddingLeft","data-icon","data-size","data-show-count","aria-label","templates","Icon","CropFree","dataset","interface","samples","ImageSearch","labels","regionTypesAllowed","imageUrl","Image","OndemandVideoIcon","videoUrl","Edit","surveyjs","questions","pdfUrl","TextFormat","overlapAllowed","displayName","document","entityLabels","relationLabels","ContactSupport","Audiotrack","audioUrl","Category","fields","fieldName","AccessibilityNewIcon","keypointDefinitions","human","landmarks","nose","defaultPosition","leftEye","leftEar","rightEye","rightEar","sternum","leftShoulder","rightShoulder","leftElbow","rightElbow","leftHand","rightHand","leftThigh","rightThigh","leftKnee","rightKnee","leftFoot","rightFoot","connections","ThreeDRotation","templateMap","reduce","acc","recentItems","changeRecentItems","onClickHome","onCloseDrawer","onClickManagePlugins","drawerOpen","onOpenFile","onOpenRecentItem","onClickTemplate","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","List","ListItem","ListItemIcon","ListItemText","ListSubheader","ri","index","fileName","filter","oneRecentFile","template","HeaderContext","logoutUser","emptyArray","changeDrawerOpen","headerContext","useMediaQuery","HeaderDrawer","LoginDrawer","StyledDialogTitle","DialogTitle","grey","borderBottom","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","borderTop","markdownContent","redOn","red","noActionBar","actions","fullScreen","changeFullScreen","Dialog","maxWidth","lineHeight","source","action","blue","text","bigButton","bigIcon","onSelect","SimpleDialog","CognitoIcon","data-name","fill","x","y","provider","SdStorageOutlinedIcon","AccountTreeIcon","right","errorBox","errors","Collapse","in","life","Fade","message","changeErrors","concat","Math","random","split","cognitoIcon","howToSetupText","textDecoration","forms","cognito","placeholder","isRequired","s3iam","proxy","onFinish","onAuthConfigured","setAuthProvider","dialogTitle","setDialogTitle","useErrors","addError","validateAuthProvider","answers","authTemplates","onQuestionChange","questionId","newValue","defaultAnswers","questionIds","q","defaults","configValue","getDefaultsFromConfig","ErrorToasts","url","match","downloadIcon","languageSelectionWrapper","languageSelectionBox","up","ContentContainer","overflowY","Content","Title","languageSelectionFormStyle","base","background","menuList","singleValue","Subtitle","ActionList","Action","ActionTitle","ActionText","Actionless","BottomSpacer","languageOptions","onFileDrop","onOpenTemplate","showDownloadLink","onClickOpenSession","i18n","newVersionAvailable","changeNewVersionAvailable","fetch","r","json","newPackage","packageInfo","checkNewVersion","latestCommunityUpdate","setLatestCommunityUpdate","readme","startCU","search","endCU","communityUpdates","latestYtLink","ytLink","embedYTLink","getEmbedYoutubeUrl","getLatestREADME","createFromTemplateDialogOpen","changeCreateFromTemplateDialogOpen","addAuthFromDialogOpen","changeAddAuthFromDialogOpen","CreateFromTemplateDialog","clicked_template","AddAuthFromTemplateDialog","Header","styles","defaultValue","options","language","changeLanguage","find","src","frameBorder","allow","allowFullScreen","textField","setNewValue","inputProps","onKeyDown","preventDefault","stopPropagation","blur","onKeyPress","EmptyState","SampleDiv","fontVariantNumeric","userSelect","Sample","completed","onMouseDown","onMouseUp","classNames","p","n","count","tablePaginationPadding","samplesPerPage","changeSamplesPerPage","sampleOffset","changeSampleOffset","min","max","selectRange","changeSelectRange","startSelectRange","moveSelectRange","endSelectRange","checkAndNullifySelectRange","buttons","onClickMemo","range","paddingRight","TablePagination","rowsPerPageOptions","rowsPerPage","page","floor","labelRowsPerPage","onChangePage","newPage","onChangeRowsPerPage","opts","extension","replace","returnNulls","SelectContainer","TextArea","autoDetectOptions","onAddSamples","changeContent","urlType","changeURLType","l","trim","getSampleFromUrl","opt","v","sample","sampleName","decodeURI","UrlOfAFile","typeOfFile","fileExtension","objectOfRef","objectToCheck","resultSet","mode","any","getSampleName","getSampleNameFromURL","getSampleUrl","createOneNewSample","annotation","RecognizeFileExtension","getSampleWithThisSampleName","nameToSearch","setSamplesName","oldsample","renameSampleFromUrl","setIn","sampleToChange","boolName","sampletocompare1","eraseAnnotation","samplesWithoutAnnotation","Newsample","push","fileHasChanged","CheckIfAnnotationExist","result","folderToFetch","element","GetSampleFromAnnotation","newSamples","datasetHelper","sampleFound","get","expires","level","data","setUrl","configImport","loadProjectIsSelected","typeOfFileToLoad","fetchTextInFile","texte","urlSource","method","response","typeAuthorize","file","contentOldFile","actualSamples","annotationToKeep","Tabsamples","Tabsamples2","selectedStyle","tableStyle","expandedDataColumns","selector","sortable","expandedAnnotationsColumns","columns","customStyles","headCells","cells","ExpandedRow","rowData","rowAnnotations","dense","striped","noHeader","noDataComponent","pagination","paginationPerPage","paginationRowsPerPageOptions","onChangeFile","textButtonAdd","changetextButtonAdd","s3Content","changeS3Content","dataForTable","changeDataForTable","setFolderToFetch","checkInterfaceAndsamples","typeOfFileToDisable","Video","Audio","PDF","Texte","contentDialogBoxIsSetting","projectStarted","initConfigImport","setConfigImport","lastObjectRef","useRef","hasProjectStarted","current","configToSet","changes","setTypeOfFileToLoadAndDisable","handleAddSample","GetImageFromAFolderAWS","GetAnnotationFromAFolderAWS","setAnnotationFromAws","changeLoadProjectIsSelected","textToSet","folderName","numberOfSamples","isSelected","folder","setButtonNameAddSample","_dataForTable","obj","endsWith","rowDataContent","startsWith","lastModified","toDateString","rowAnnotationsContent","FormControl","FormLabel","RadioGroup","Radio","checked","expandableRows","expandableRowsComponent","selectableRows","selectableRowsHighlight","selectableRowsNoSelectAll","selectableRowsComponent","noTableHead","onSelectedRowsChange","whatsChanging","selectedRows","row","selectableRowSelected","Items","Path","Item","S3BucketSelector","currentPath","canCreateNew","onChangePath","showFiles","newPath","join","option","newDirectory","prompt","parseS3URI","s3Path","path","useIsDesktop","accessKeyId","secretAccessKey","corsProxy","awsClient","AwsClient","service","fetchS3","sign","request","corsProxyRequest","Request","encodeURIComponent","headers","body","xmlParser","listBuckets","listBucketItemsAt","Host","putBucketItem","res","Code","Message","ImportFromS3Dialog","useIAMS3API","setS3Path","optionsLoading","setOptions","ListAllMyBucketsResult","Buckets","Bucket","b","Name","ListBucketResult","CommonPrefixes","Prefix","loadS3Path","files","items","Contents","Key","S3PathSelector","newS3Path","FileCounter","MultiFileDrop","loadFile","onComplete","totalUploaded","setTotalUploaded","setErrors","filesSelected","totalFiles","setUploadStartState","entries","isDragActive","maxHeight","SelectedPath","UploadToS3Dialog","setComplete","uploadedPaths","activeStep","setActiveStep","Stepper","Step","StepLabel","filePath","UploadHover","emptyFunc","onChangeContent","reader","FileReader","onload","fileContent","readAsText","lastClickTime","changeLastClickTime","Date","now","ImportTextSnippetsDialog","TextAreaWithUpload","ExplainText","GoogleDriveScreenshot","credentials","web","client_id","process","app_id","developer_key","googleScriptLoaded","setGoogleScriptLoaded","pickerApiLoaded","setPickerApiLoaded","oauthToken","setOAuthToken","userSelectedItemsFromDrive","setUserSelectedItemsFromDrive","isPickerOpen","setIsPickerOpen","scriptElement","createElement","async","appendChild","remove","googlePickerActionCallback","google","picker","PICKED","docs","googleDriveDocument","mimeType","createPicker","view","DocsView","ViewId","Docs","FOLDERS","setIncludeFolders","setSelectFolderEnabled","PickerBuilder","enableFeature","Feature","NAV_HIDDEN","MINE_ONLY","MULTISELECT_ENABLED","setAppId","addView","DOCS","setDeveloperKey","setCallback","build","setVisible","handleAuthenticationResponse","authenticationResponse","access_token","onAuthApiLoad","gapi","auth","authorize","scope","immediate","onPickerApiLoad","onLoadPicker","load","callback","badSpellingMap","Object","correct","badSpellings","badSpelling","convertTaskDatumMistakes","normalizedKey","correction","csv","JAC","fromCSV","derivePath","taskOutput","output","InfoText","whiteSpace","ImportUDTFileDialog","changeError","setContent","e1","udt","fromUDTCSV","e2","jsonError","stack","csvError","datasets","getSamples","datasetName","datasetUrl","taskData","ImportToyDatasetDialog","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","data-import-toy-dataset-name","idify","youtubeUrl","videoTitle","remote","videoQuality","downloadPath","onProgress","onChangeOverallProgress","ytdl","videoName","fullVideoPath","writableVideoFile","createWriteStream","youtubeVideoWithOptions","format","quality","pipe","on","chunkLength","downloaded","total","percent","progress","cancel","destroy","Text","Bar","ProgressContainer","TotalPercentageWrapper","Progress","unitProgress","overallProgress","completedVideoTitles","ProgressBar","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","getYoutubeVideoInformation","splittedURLsArray","progressCallback","checkedVideos","Promise","resolve","reject","getBasicInfo","info","errorText","video","splitURLsFromTextArea","stringURLs","urlsHasHTTPS","splittedURLsByNewLines","SelectVideoQualityHeader","SelectVideoQuality","LoadingText","CompletedVideoTitle","qualityOptions","ImportFromYoutubeUrls","urlsFromTextArea","setUrlsFromTextArea","setVideoQuality","setUnitProgress","setOverallProgress","isDownloading","setIsDownloading","setCompletedVideoTitles","cancelRef","setDefaultState","closeDialog","dialog","showOpenDialog","buttonLabel","properties","canceled","filePaths","errorMessage","youtubeVideoInfos","completedVideoPaths","completedVideoTitlesArray","youtubeVideosCount","youtubeVideoInfo","downloadYoutubeVideo","currentProgress","progressText","videoPath","Array","isArray","Fragment","TermsOfUse","ImportFromCOCODialog","onChangeDataset","labelsSelected","setLabelsSelected","exclusive","setExclusive","shouldReplaceInterface","setShouldReplaceInterface","importedDataset","setImportedDataset","ds","loadSamples","isMulti","FormGroup","convertToSamplesObject","fp","ext","electron","dirPaths","dirPath","fs","promises","readdir","fn","promptAndGetSamplesLocalDirectory","ButtonBase","MuiButton","DesktopOnlyText","SelectDialogContext","desktopOnly","authConfiguredOnly","signedInOnly","disabledReason","onlySupportType","disabledText","Consumer","onChangeDialog","import_button","classnames","selectedDialog","changeDialog","promptAndGetSamplesFromLocalDirectory","localSamples","samplesToAdd","onAddSamplesAsToyDataset","AssignmentReturnedIcon","CreateNewFolderIcon","TextFieldsIcon","PetsIcon","FaYoutube","S3Icon","FaGoogleDrive","DescriptionIcon","PhotoLibraryIcon","PasteUrlsDialog","ImportFromCognitoS3Dialog","ImportFromGoogleDriveDialog","StyledExpansionPanel","StyledExpansionPanelSummary","flatMap","videoFrameAt","keyframes","kf","parseInt","regions","immutable","ErrorBox","downloadFile","urlToDownload","directoryPath","md5","existsSync","directory","filename","changeProgress","cancelled","td","urlKey","pathToFile","getFfmpegTimeCode","ms","cs","ss","mn","padStart","pathToFfmpeg","shell","exec","newsamples","transformsPerformed","imageOutputPath","ffmpegCommand","timeout","without","uploadFileToTransferSh","fileURL","remoteURL","axios","exactFilePath","fsFileBuffer","readFileSync","put","status","uploadedFileURL","splitFileNameFromFileURL","splittedFullFileName","getFileURLKey","transformFileURLsToWebURLs","setProgress","progressUnit","samplesIndex","samplesItem","fileURLKey","warn","webURLOfUploadedFile","TransformLocalFilesToWebURLs","rows","setRows","setColumns","nRows","nCols","imageUrls","from","Set","pieces","isUrlValid","image","onerror","filteredSamples","setFilteredSamples","samplesRemoved","samplesProcessed","setProcessState","requestUrl","msgBox","ToastContext","useToasts","addToast","ToastProvider","fullLife","messageType","msg","toasts","changeToasts","pluginsState","atom","default","renderDialog","ref","setRef","setActions","elm","onSuccess","addAction","removeAction","setInDataset","val","newRef","Icon1","Icon2","transform_button","openPlugin","setOpenPlugin","plugins","useRecoilValue","CollectionsIcon","ComputerIcon","LanguageIcon","GetAppIcon","ImageIcon","CheckBoxOutlineBlankIcon","GridOnIcon","HighlightOffIcon","plugin","PeopleAltIcon","PluginDialog","TransformRemoveInvalidSamplesDialog","TransformVideoKeyframesDialog","DownloadURLsDialog","TransformVideoFramesToImagesDialog","TransformImageSamplesIntoSegmentsDialog","TransformSegmentsIntoImageSamplesDialog","SampleCounter","ExpandedRowContainer","borderTopLeftRadius","borderTopRightRadius","ExpandedRowTitle","ExpandedRowCode","input","SamplesView","openSampleInputEditor","openSampleLabelEditor","deleteSample","lastSampleTab","changeTabState","changeTab","knownKeys","has","cell","add","raised","ImportPage","onImportPageShouldExit","newOHA","TransformPage","shouldViewChange","SampleGrid","sampleIndex","choices","cellType","iface","asMutable","multipleRegions","multipleRegionLabels","deep","noActions","maxClusterPresets","low","medium","high","maxClusterPresetsRev","curr","visibleIf","step","autosegMode","autoSegmentationEngine","autosegPreset","maxClusters","autosegMaxClusters","multiple","hasOther","column","ButtonsContainer","NoQuestions","Question","borderLeft","PreviewHeader","anchorEl","menuOpen","changeMenuOpen","multiline","MenuItem","Fields","f","fieldIndex","isNested","newFieldInterface","field","fieldOrder","ExplanationTextHeader","ExplanationText","GithubLink","Configure3D","rel","NoOptions","ConfigureInterface","onClickEditJSON","ConfigureImageSegmentation","ConfigureImagePixelSegmentation","ConfigureImageClassification","ConfigureComposite","ConfigureDataEntry","ConfigureAudioTranscription","ConfigureTextEntityRecognition","ConfigureTextEntityRelations","ConfigureTextClassification","ConfigureVideoSegmentation","ConfigureImageLandmarkAnnotation","table","hotkeyIconStyle","onChangeHotkey","hotkeyList","onClearHotkeys","selectedHotKey","setSelectedHotKey","modifier","setCurrentKeyCombo","addEventListener","keyListener","removeEventListener","align","hotkey","AdvancedOptionsView","onClearLabelData","forceUpdate","useUpdate","hotkeyDialogOpen","setHotkeyDialogOpen","confirm","getItem","setItem","reload","KeyboardShortcutManagerDialog","BigButton","BigInterfaceSelect","currentInterfaceType","use","LanguageDetector","initReactI18next","fallbackLng","debug","interpolation","escapeValue","resources","fr","translation","frTranslation","en","enTranslation","cn","cnTranslation","pt","ptBrTranslation","nl","nlTranslation","clobber","defaultIfNotClobbered","isClobbered","useDebugValue","notClobberedValue","setNotClobberedValue","TextClassification","useClobberedState","currentSampleIndex","setCurrentSampleIndex","availableLabels","initialLabels","multipleLabels","hotkeysEnabled","disableHotkeys","onPrev","onSaveTaskOutputItem","onExit","onNext","simpleSequenceToEntitySequence","simpleSeq","entSeq","charsPassed","seq","start","end","simpleSequenceAndRelationsToEntitySequence","sequence","relationships","textIdsInRelation","to","textId","entities","relations","entitySequenceToSimpleSeq","doc","sort","nextEntity","TextEntityRecognition","initialSequence","titleContent","TextEntityRelations","initialRelations","relationshipLabels","initialRelationships","getRandomColor","h","rid","convertToRIARegionFmt","regionType","cls","classification","tags","centerX","centerY","w","points","keypointsDefinitionId","convertFromRIARegionFmt","riaRegion","convertToRIAImageFmt","taskDatum","frameTime","convertToRIAKeyframes","newKeyframes","regionTypeToTool","polygon","point","emptyObj","emptyArr","globalSampleIndex","containerProps","onModifySample","selectedIndex","setSelectedIndex","showTags","changeShowTags","selectedTool","changeSelectedTool","isClassification","isPixel","saveCurrentIndexAnnotation","img","images","allowedArea","labelProps","regionClsList","regionTagList","nextAction","onNextImage","onPrevImage","singleImageList","enabledTools","rt","fullImageSegmentationMode","selectedImage","taskDescription","autoSegmentationOptions","HeaderLeftSideContainer","onRemoveSample","onClickHeaderItem","headerItems","Workspace","headerLeftSide","iconSidebarItems","rightSidebarItems","brightColors","letters","hashInt","indexOf","ImageContainer","objectFit","flexShrink","CheckButton","ImageClassification","setSampleIndex","enlargedLabel","changeEnlargedLabel","currentOutput","changeCurrentOutput","onDone","onNextNoSave","newOutput","clearTimeout","onClickLabel","allowMultiple","hotkeyMap","backspace","enter","rightarrow","leftarrow","labelKeyMap","nextAvailableLetter","WorkspaceContainer","getUDTKeyFrames","riaOutput","customId","videoTime","videoSrc","audio","phraseBank","initialTranscriptionText","posingTools","getTaskDescription","linkButtonContainer","linkButton","footer","footerContent","footerBorder","footerCount","allSamplesButton","sampleIcon","menuButton","sectionHeader","SampleContainer","hideDescription","defaultHideDescription","lastSampleExitText","requireCompleteToPressNext","minContentHeight","totalSamples","onChangeSample","changeHideDescriptionState","changeHideDescription","hide","sampleDrawerOpen","changeSampleDrawerOpen","LinkButton","escapeHtml","DataEntry","completeText","explain","BadOHA","Composite","changeCurrentSampleIndex","selectedField","changeSelectedField","indexZero","InterfaceIcon","UniversalDataViewer","onExitProp","onRemoveSampleProp","hideHeader","onSaveTaskOutputItemProp","onClickSetup","EmptySampleContainer","ImageSegmentation","VideoSegmentation","AudioTranscription","ImageLandmarkAnnotation","RawJSONEditor","onSave","jsonText","setJSONText","editorProps","$blockScrolling","Infinity","noop","setTab","newInterface","isNotNested","newDataset","sampleInput","changeText","newText","Sentry","dsn","whitelistUrls","ErrorBoundary","hasError","errorInfo","withScope","setExtras","eventId","captureException","errorString","React","Component","Stat","Label","Value","stats","LabelHelpIs","verifying","setVerifying","textFieldValue","setTextFieldValue","apikey","PaperContainer","useActiveDataset","useFileContext","setFile","setDataset","FileContext","Link","usdFormatter","Intl","NumberFormat","currency","preciseUSDFormatter","maximumFractionDigits","minimumFractionDigits","steps","useLabelHelp","labelHelpEnabled","labelHelpError","loadMyCredits","variables","totalCost","formulaFunc","myCredits","labelHelp","labelHelpInfo","setLabelHelpInfo","collabUrl","loaded","loadJob","varName","sample_count","price","api_key","custom_id","toFixed","LabelHelpContext","LabelHelpProvider","loadingPricingConfig","setLoadingPricingConfig","pricingConfig","setPricingConfig","loadingMyTeam","setLoadingMyTeam","setMyCredits","loadPricingConfig","apiKey","credit","completedSamples","totalInteractions","totalSamplesConsidered","isLabelOnlyMode","useIsLabelOnlyMode","remoteFile","labelHelpDisabled","hasLabelHelpAPIKey","formula","variableDescriptions","variableName","computeDatasetVariable","funcArgs","formulaFuncPos","Function","ak","labelHelpAPIKey","LabelHelpView","hasAPIKey","ActiveLearningView","OverviewContainer","onChangeSampleIndex","onChangeSampleTimeToComplete","sampleTimeToComplete","labelOnlyMode","annotationStartTime","setAnnotationStartTime","isInOverview","percentComplete","Stats","duration","selectedSampleIndex","interface_type","LabelErrorBoundary","relativeIndex","saveIcon","editIcon","initialMode","valueDisplay","setValueDisplay","changeMode","sampleInputEditor","changeSampleInputEditor","ipcRenderer","headerTabs","newTimeToComplete","newSamplesInWindow","samplesInWindow","timeToCompleteSample","useTimeToCompleteSample","changeSampleTimeToComplete","onOpenSettingsPage","onOpenSamplesPage","onOpenLabelPage","removeListener","average_time_to_complete_sample","shortcutHandlers","switch_to_label","switch_to_setup","switch_to_samples","allowChanges","handlers","EditableTitleText","newName","SetupPage","some","splice","LabelView","EditSampleDialog","newInput","changeLog","humanReadableChangeLog","op","sampleMatch","seamless","getIn","updateIn","addToArray","withoutIn","parentPath","parentObj","object","patches","patch","isNaN","o","hash","charCodeAt","hashString","collab","serverUrl","getJSON","payload","postJSON","patchJSON","sessionId","bent","initialContent","short_id","udt_json","getLatestState","updateToLatestState","hashOfLatestState","latestVersion","humanReadableLog","getHumanReadableLog","newState","applySeamlessPatch","rfc6902","CUSTOM_COLLABORATION_SERVER","convertToCollaborativeFile","createSession","joinSession","AddSamplesKeys","k","sampleKeys","flatten","validate","toCSV","webReturn","saveFile","workingInterfaces","shouldUpdateAWSStorage","getFilesDifferences","fetchAFile","blob","fileNameExist","createOrReplaceProjectFile","createOrReplaceAnnotations","imageOrVideoName","createOrReplaceImages","UpdateAWSStorage","changeFile","saveAs","saveFileAsync","showSaveDialog","filters","extensions","newFilePath","writeFile","toUDTCSV","useFilesystem","checkForLatestPatch","applyLatestPatches","sendPatchIfChanged","useServer","useAWSCognito","udtInterface","last_used_interface_type","udtSamples","usedToyDataset","numCompleted","dataset_size","samples_completed","percent_completed","toy_dataset_used","recently_used_toy_dataset","useFileTelemetry","openFile","fsFile","handleLoadedFile","openUrl","decodeURIComponent","labelOnly","history","replaceState","makeSession","newFile","Buttons","errorDetails","detect","preventNavigation","confirmationMessage","returnValue","ManagePluginsDialog","line","useFileHandler","shouldPreventNavigation","usePreventNavigation","useRecoilState","setPlugins","pluginUrls","pluginUrl","import","transformPlugins","importPlugins","interfacePlugins","authenticationPlugins","loadPlugins","usePluginProvider","managePluginsDialogOpen","setManagePluginsDialogOpen","setSelectedBrush","onCreateTemplate","openRecentItem","file_type","outputName","download","sessionName","AppErrorBoundary","DatasetEditor","StartingPage","onOpenWelcomePage","onNewFile","arg0","templateName","saveFileAs","exportToCSV","onOpenFileFromToolbar","onChangeFileName","Loading","App","fallback","Theme","DesktopApp","WebApp","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d5de9e50.chunk.js","sourcesContent":["import React from \"react\"\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\nimport { ThemeProvider } from \"@material-ui/core/styles\"\nimport \"./theme.css\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: colors.blue,\n    secondary: colors.blue,\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", sans-serif',\n    button: {\n      textTransform: \"none\",\n    },\n  },\n})\n\nexport default ({ children }: any) => {\n  return <ThemeProvider theme={theme}>{children}</ThemeProvider>\n}\n","export const defaultHotkeys = [\n  {\n    id: \"switch_to_label\",\n    description: \"Go to Labels Tab\",\n    binding: \"shift+3\",\n  },\n  {\n    id: \"switch_to_setup\",\n    description: \"Go to Setup Tab\",\n    binding: \"shift+1\",\n  },\n  {\n    id: \"switch_to_samples\",\n    description: \"Go to Samples Tab\",\n    binding: \"shift+2\",\n  },\n  {\n    id: \"select_tool\",\n    description: \"Switch to the Select Tool\",\n    binding: \"escape\",\n  },\n  {\n    id: \"zoom_tool\",\n    description: \"Select the Zoom Tool\",\n    binding: \"z\",\n  },\n  {\n    id: \"create_point\",\n    description: \"Create a point\",\n  },\n  {\n    id: \"create_bounding_box\",\n    description: \"Create a bounding box\",\n    binding: \"b\",\n  },\n  {\n    id: \"pan_tool\",\n    description: \"Select the Pan Tool\",\n    binding: \"p\",\n  },\n  {\n    id: \"create_polygon\",\n    description: \"Create a Polygon\",\n  },\n  {\n    id: \"create_pixel\",\n    description: \"Create a Pixel Mask\",\n  },\n  {\n    id: \"save_and_previous_sample\",\n    description: \"Save and go to previous sample\",\n    binding: \"a\",\n  },\n  {\n    id: \"save_and_next_sample\",\n    description: \"Save and go to next sample\",\n    binding: \"d\",\n  },\n  {\n    id: \"save_and_exit_sample\",\n    description: \"Save and exit current sample\",\n  },\n  {\n    id: \"exit_sample\",\n    description: \"Exit sample without saving\",\n  },\n]\nexport default defaultHotkeys\n","import React, { createContext, useContext, useMemo } from \"react\"\nimport { defaultHotkeys } from \"./default-hotkeys\"\nimport { useAppConfig } from \"../AppConfig\"\n\nexport const HotkeyContext = createContext({\n  hotkeys: defaultHotkeys,\n  changeHotkey: (id, newBinding) => null,\n})\n\nexport const useHotkeyStorage = () => useContext(HotkeyContext)\n\nexport const HotkeyStorageProvider = ({ children }) => {\n  const { fromConfig, setInConfig, clearInConfig } = useAppConfig()\n\n  const hotkeys = useMemo(\n    () =>\n      defaultHotkeys.map((item) => {\n        if (fromConfig(`hotkeys.${item.id}`)) {\n          return { ...item, binding: fromConfig(`hotkeys.${item.id}`) }\n        } else {\n          return item\n        }\n      }),\n    [fromConfig]\n  )\n\n  const keyMap = useMemo(() => {\n    const keyMap = {}\n    for (const { id, binding } of hotkeys) {\n      if (!binding) continue\n      keyMap[id] = binding\n    }\n    return keyMap\n  }, [hotkeys])\n\n  const contextValue = useMemo(\n    () => ({\n      hotkeys,\n      keyMap,\n      clearHotkeys: () => {\n        clearInConfig(hotkeys.map((key) => `hotkeys.${key.id}`))\n      },\n      changeHotkey: (id, newBinding) =>\n        setInConfig(`hotkeys.${id}`, newBinding),\n    }),\n    [hotkeys, keyMap, clearInConfig, setInConfig]\n  )\n\n  return (\n    <HotkeyContext.Provider value={contextValue}>\n      {children}\n    </HotkeyContext.Provider>\n  )\n}\n\nexport { defaultHotkeys }\n","import React, { useMemo, useContext, createContext } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { defaultHotkeys } from \"../HotkeyStorage\"\n\nconst configKeyNames = [\n  \"auth.provider\",\n  \"auth.cognito.identity_pool_id\",\n  \"auth.cognito.region\",\n  \"auth.cognito.user_pool_id\",\n  \"auth.cognito.user_pool_web_client_id\",\n  \"auth.cognito.mandatory_sign_in\",\n  \"auth.cognito.authentication_flow_type\",\n  \"auth.cognito.storage.aws_s3.bucket\",\n  \"auth.cognito.storage.aws_s3.region\",\n  \"auth.s3iam.access_key_id\",\n  \"auth.s3iam.secret_access_key\",\n  \"auth.s3iam.region\",\n  \"auth.proxy.corsproxy\",\n  \"labelhelp.disabled\",\n  \"labelhelp.apikey\",\n  \"pluginUrls\",\n  ...defaultHotkeys.map(({ id }) => `hotkeys.${id}`),\n]\n\nconst defaultAppConfig = {\n  \"auth.proxy.corsproxy\":\n    // TODO this is currently deployed on @seveibar's cloudflare, it'd be\n    // better if it was deployed on the organization's cloudflare\n    \"https://corsproxy.seve.workers.dev/corsproxy/?apiurl={URL}\",\n}\n\nconst jsonParseOrEmpty = (s) => {\n  try {\n    return JSON.parse(s)\n  } catch (e) {\n    return {}\n  }\n}\n\n// NOTE: appConfig should not allow any nested values\nexport const AppConfigContext = createContext({\n  appConfig: {\n    ...defaultAppConfig,\n    ...jsonParseOrEmpty(window.localStorage.app_config),\n  },\n  setAppConfig: (newConfig) => undefined,\n  fromConfig: (key) => undefined,\n  setInConfig: (key, value) => undefined,\n  clearInConfig: (keys) => undefined,\n})\n\nexport const useAppConfig = () => useContext(AppConfigContext)\n\nexport const AppConfigProvider = ({ children }) => {\n  const [appConfig, setAppConfig] = useLocalStorage(\"app_config\", {})\n  const contextValue = useMemo(() => {\n    return {\n      appConfig,\n      setAppConfig,\n      fromConfig: (key) => {\n        if (!configKeyNames.includes(key)) {\n          throw new Error(`Unknown config key name \"${key}\"`)\n        }\n        if (appConfig[key] === undefined) {\n          return defaultAppConfig[key]\n        }\n        return appConfig[key]\n      },\n      setInConfig: (key, value) => {\n        if (\n          typeof value !== \"string\" &&\n          typeof value !== \"number\" &&\n          typeof value !== \"boolean\" &&\n          value !== undefined &&\n          value !== null\n        ) {\n          throw new Error(\n            `Config can only have boolean/strings/numbers/null/undefined, something tried to set appConfig[\"${key}\"] = ${JSON.stringify(\n              value\n            )}`\n          )\n        }\n        if (!configKeyNames.includes(key)) {\n          throw new Error(`Unknown config key name \"${key}\"`)\n        }\n        setAppConfig({ ...appConfig, [key]: value })\n      },\n      clearInConfig: (keys) => {\n        let config = { ...appConfig }\n        for (const key of keys) {\n          config = { ...config, [`${key}`]: null }\n        }\n        setAppConfig(config)\n      },\n    }\n  }, [appConfig, setAppConfig])\n  return (\n    <AppConfigContext.Provider value={contextValue}>\n      {children}\n    </AppConfigContext.Provider>\n  )\n}\n","import Amplify, { Auth } from \"aws-amplify\"\n\nclass CognitoHandler {\n  authProvider = \"cognito\"\n  constructor(appConfig) {\n    this.authConfig = {\n      Auth: {\n        identityPoolId: appConfig[\"auth.cognito.identity_pool_id\"],\n        region: appConfig[\"auth.cognito.region\"],\n        userPoolId: appConfig[\"auth.cognito.user_pool_id\"],\n        userPoolWebClientId: appConfig[\"auth.cognito.user_pool_web_client_id\"],\n        mandatorySignIn: true,\n        authenticationFlowType: \"USER_PASSWORD_AUTH\",\n      },\n      Storage: {\n        AWSS3: {\n          bucket: appConfig[\"auth.cognito.storage.aws_s3.bucket\"],\n          region: appConfig[\"auth.cognito.storage.aws_s3.region\"],\n        },\n      },\n    }\n    this.isLoggedIn = false\n    this.checkIfLoggedIn()\n  }\n  checkIfLoggedIn = async () => {\n    Amplify.configure(this.authConfig)\n    const userHandle = await Auth.currentAuthenticatedUser()\n    if (userHandle) {\n      this.user = userHandle\n      this.isLoggedIn = true\n      this.hasChanged = true\n    }\n  }\n  setUser = (userHandle) => {\n    this.user = userHandle\n    this.isLoggedIn = Boolean(userHandle)\n    this.hasChanged = true\n  }\n  login = async (tryUser) => {\n    Amplify.configure(this.authConfig)\n\n    const userHandle = await Auth.currentAuthenticatedUser()\n\n    this.user = userHandle\n    this.hasChanged = true\n  }\n  logout = () => {\n    this.user = null\n    this.isLoggedIn = false\n    this.hasChanged = true\n    Auth.signOut()\n  }\n  getState = () => ({\n    user: this.user,\n    isLoggedIn: this.isLoggedIn,\n    authConfig: this.authConfig,\n  })\n}\n\nexport default CognitoHandler\n","import React, {\n  useState,\n  useEffect,\n  createContext,\n  useContext,\n  useMemo,\n  useReducer,\n} from \"react\"\nimport { useAppConfig } from \"../../components/AppConfig\"\nimport CognitoHandler from \"./cognito-handler.js\"\n\nexport const authProviders = [\"cognito\"]\n\nconst AuthContext = createContext({ authProvider: \"none\" })\n\nexport const AuthProvider = ({ children }) => {\n  const { appConfig, fromConfig } = useAppConfig()\n  const [handler, setHandler] = useState({ authProvider: \"none\" })\n  const authProvider = fromConfig(\"auth.provider\")\n  const [handlerVersion, incHandlerVersion] = useReducer(\n    (state) => state + 1,\n    0\n  )\n\n  useEffect(() => {\n    if (handler && handler.authProvider === authProvider) return\n    if (authProvider === \"cognito\") {\n      setHandler(new CognitoHandler(appConfig))\n    }\n  }, [authProvider, appConfig, handler])\n\n  useEffect(() => {\n    if (!handler) return\n    const interval = setInterval(() => {\n      if (handler.hasChanged) {\n        incHandlerVersion()\n        handler.hasChanged = false\n      }\n    }, 1000)\n    return () => {\n      clearInterval(interval)\n    }\n  }, [handler, handlerVersion])\n\n  const contextValue = useMemo(\n    () => ({\n      authProvider: handler.authProvider,\n      ...(handler.getState ? handler.getState() : {}),\n      // TODO remove setUser\n      setUser: handler.setUser,\n      logout: handler.logout,\n      login: handler.login,\n      handlerVersion,\n    }),\n    [handler, handlerVersion]\n  )\n\n  return (\n    <AuthContext.Provider value={contextValue}>{children}</AuthContext.Provider>\n  )\n}\n\nexport const useAuth = () => useContext(AuthContext)\n\nexport default useAuth\n","import React, { Fragment, useState } from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Button from \"@material-ui/core/Button\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { styled } from \"@material-ui/core/styles\"\n\nimport { useTranslation } from \"react-i18next\"\n\nimport Amplify, { Auth } from \"aws-amplify\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { useAuth } from \"../../utils/auth-handlers/use-auth.js\"\n\nconst ErrorText = styled(\"div\")({\n  padding: 16,\n  color: colors.red[500],\n})\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}))\n\nexport default ({ onUserChange, onRequireCompleteSignUp, onClose }) => {\n  const { authConfig, setUser } = useAuth()\n  const classes = useStyles()\n\n  const [error, setError] = useState()\n  const { t } = useTranslation()\n\n  const [state, setState] = useState({\n    username: \"\",\n    password: \"\",\n    notAuthorizedException: false,\n  })\n\n  const handleSignInClick = () => {\n    if (isEmpty(state.username) || isEmpty(state.password)) {\n      setState((prevState) => ({\n        ...prevState,\n        notAuthorizedException: true,\n      }))\n    } else {\n      SignInAWS(state.username, state.password)\n    }\n  }\n\n  const handleTextFieldChange = (event) => {\n    event.persist()\n    setState((prevState) => ({\n      ...prevState,\n      [event.target.name]: event.target.value,\n      notAuthorizedException: false,\n    }))\n  }\n\n  async function SignInAWS(username, password) {\n    setError(null)\n    try {\n      await Amplify.configure(authConfig)\n      await Auth.signIn(username, password)\n        .then((user) => {\n          setUser(user)\n          if (user.challengeName === \"NEW_PASSWORD_REQUIRED\") {\n            onRequireCompleteSignUp(user)\n          } else {\n            onUserChange(user)\n            onClose()\n          }\n          return user\n        })\n        .catch((err) => {\n          if (err.code === \"UserNotConfirmedException\") {\n            console.log(\"Must confirm the account\")\n            // The error happens if the user didn't finish the confirmation step when signing up\n            // In this case you need to resend the code and confirm the user\n            // About how to resend the code and confirm the user, please check the signUp part\n          } else if (err.code === \"PasswordResetRequiredException\") {\n            console.log(\"Password has been reset\")\n            // The error happens when the password is reset in the Cognito console\n            // In this case you need to call forgotPassword to reset the password\n            // Please check the Forgot Password part.\n          } else if (err.code === \"NotAuthorizedException\") {\n            console.log(\"Bad password message\")\n            setState({ ...state, notAuthorizedException: true, password: \"\" })\n            // The error happens when the incorrect password is provided\n          } else if (err.code === \"UserNotFoundException\") {\n            console.log(\"User not found message\")\n            // The error happens when the supplied username/username does not exist in the Cognito user pool\n          } else {\n            console.log(\"Error that we do not handle for\")\n            console.log(err.code)\n          }\n          setError(err.toString())\n          return err\n        })\n    } catch (e) {\n      setError(e.toString())\n    }\n  }\n\n  return (\n    <Fragment>\n      <Typography component=\"h1\" variant=\"h5\">\n        {t(\"sign-in\")}\n      </Typography>\n      {error && <ErrorText>{error}</ErrorText>}\n      <form className={classes.form} noValidate>\n        <TextField\n          error={state.notAuthorizedException}\n          variant=\"outlined\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"username\"\n          label=\"Username\"\n          name=\"username\"\n          autoComplete=\"username\"\n          helperText={\n            state.notAuthorizedException\n              ? \"The username or password is incorrect.\"\n              : \"\"\n          }\n          autoFocus\n          onChange={handleTextFieldChange}\n        />\n        <TextField\n          variant=\"outlined\"\n          margin=\"normal\"\n          required\n          fullWidth\n          name=\"password\"\n          label=\"Password\"\n          type=\"password\"\n          id=\"password\"\n          autoComplete=\"current-password\"\n          value={state.password}\n          onChange={handleTextFieldChange}\n        />\n        <FormControlLabel\n          control={<Checkbox value=\"remember\" color=\"primary\" />}\n          label=\"Remember me\"\n        />\n        <Button\n          onClick={handleSignInClick}\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.submit}\n        >\n          {t(\"sign-in\")}\n        </Button>\n      </form>\n    </Fragment>\n  )\n}\n","import React, { Fragment, useState } from \"react\"\nimport { Typography, TextField, Button } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { Auth } from \"aws-amplify\"\nimport { useAuth } from \"../../utils/auth-handlers/use-auth.js\"\nimport { useTranslation } from \"react-i18next\"\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}))\n\nexport default ({ requiredAttributes, onUserChange, onClose }) => {\n  const { user } = useAuth()\n  const requiredAttributesDict = {}\n  const requiredAttributesErrorDict = {}\n  requiredAttributes.forEach((requiredAttribute) => {\n    requiredAttributesDict[requiredAttribute] = \"\"\n    requiredAttributesErrorDict[requiredAttribute] = false\n  })\n\n  const [state, setState] = useState({\n    newPassword: \"\",\n    newPasswordNotValid: false,\n    newPasswordConfirmation: \"\",\n    newPasswordNotEqualsConfirmation: false,\n    requiredAttributesDict: requiredAttributesDict,\n    requiredAttributesErrorDict: requiredAttributesErrorDict,\n  })\n\n  const classes = useStyles()\n\n  const capitalizeFirstLetter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1)\n  }\n\n  const handleCompleteSignUpClick = () => {\n    if (\n      checkIfPasswordEqualsConfirmationPassword() &&\n      _handleCantBeNull(\"checkAll\")\n    ) {\n      completeNewPassword()\n    } else {\n      console.log(\"Something missing\")\n    }\n\n    /// completeNewPassword();\n  }\n\n  const _handleAttributesTextFieldChange = (event) => {\n    setState({\n      ...state,\n      requiredAttributesDict: {\n        ...state.requiredAttributesDict,\n        [event.target.name]: event.target.value,\n      },\n    })\n  }\n\n  const _handleTextFieldChange = (event) => {\n    setState({\n      ...state,\n      newPasswordError: null,\n      newPasswordNotValid: false,\n      newPasswordNotEqualsConfirmation: false,\n      [event.target.name]: event.target.value,\n    })\n  }\n\n  const checkIfPasswordEqualsConfirmationPassword = () => {\n    if (state.newPassword === state.newPasswordConfirmation) {\n      setState({ ...state, newPasswordNotEqualsConfirmation: false })\n      return true\n    } else {\n      setState({ ...state, newPasswordNotEqualsConfirmation: true })\n      return false\n    }\n  }\n\n  const _handleCantBeNull = (e) => {\n    let allGood = true\n    if (e === \"checkAll\") {\n      requiredAttributes.forEach((requiredAttribute) => {\n        if (state.requiredAttributesDict[requiredAttribute] === \"\") {\n          setState({\n            ...state,\n            requiredAttributesErrorDict: {\n              ...state.requiredAttributesErrorDict,\n              [requiredAttribute]: true,\n            },\n          })\n          allGood = false\n        }\n      })\n    } else {\n      if (e.target.value === \"\") {\n        setState({\n          ...state,\n          requiredAttributesErrorDict: {\n            ...state.requiredAttributesErrorDict,\n            [e.target.name]: true,\n          },\n        })\n      } else {\n        setState({\n          ...state,\n          requiredAttributesErrorDict: {\n            ...state.requiredAttributesErrorDict,\n            [e.target.name]: false,\n          },\n        })\n      }\n    }\n    return allGood\n  }\n\n  function completeNewPassword() {\n    Auth.completeNewPassword(\n      user, // the Cognito User Object\n      state.newPassword, // the new password\n      state.requiredAttributesDict\n    )\n      .then((user) => {\n        onUserChange(user)\n        onClose()\n      })\n      .catch((err) => {\n        setState({ ...state, newPasswordError: err.toString() })\n      })\n  }\n\n  const { t } = useTranslation()\n\n  return (\n    <Fragment>\n      <Typography component=\"h1\" variant=\"h5\">\n        {t(\"complete-your-sign-up\")}\n      </Typography>\n      <form className={classes.form} noValidate>\n        <TextField\n          error={state.newPasswordNotValid}\n          variant=\"outlined\"\n          margin=\"normal\"\n          required\n          fullWidth\n          name=\"newPassword\"\n          label=\"New password\"\n          type=\"password\"\n          id=\"password\"\n          value={state.newPassword}\n          onChange={_handleTextFieldChange}\n          helperText={state.newPasswordError || \"\"}\n        />\n        <TextField\n          error={state.newPasswordNotEqualsConfirmation}\n          variant=\"outlined\"\n          margin=\"normal\"\n          required\n          fullWidth\n          name=\"newPasswordConfirmation\"\n          label=\"Confirm new password\"\n          type=\"password\"\n          id=\"confirm-password\"\n          onChange={_handleTextFieldChange}\n          value={state.newPasswordConfirmation}\n          onBlur={checkIfPasswordEqualsConfirmationPassword}\n          helperText={\n            state.newPasswordNotEqualsConfirmation\n              ? \"New password and confirmation password must be the same\"\n              : \"\"\n          }\n        />\n        {requiredAttributes.map((requiredAttribute) => {\n          return (\n            <TextField\n              error={state.requiredAttributesErrorDict[requiredAttribute]}\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name={requiredAttribute.toString()}\n              key={requiredAttribute.toString()}\n              label={capitalizeFirstLetter(requiredAttribute.toString())}\n              type=\"text\"\n              id={requiredAttribute.toString()}\n              onChange={_handleAttributesTextFieldChange}\n              value={state.requiredAttributesDict.requiredAttribute}\n              onBlur={_handleCantBeNull}\n              helperText={\n                state.requiredAttributesErrorDict[requiredAttribute]\n                  ? `${capitalizeFirstLetter(\n                      requiredAttribute.toString()\n                    )} can't be null`\n                  : \"\"\n              }\n            />\n          )\n        })}\n        <Button\n          onClick={handleCompleteSignUpClick}\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.submit}\n        >\n          {t(\"complete-sign-up\")}\n        </Button>\n      </form>\n    </Fragment>\n  )\n}\n","import React, { useState } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Drawer from \"@material-ui/core/Drawer\"\n\nimport Avatar from \"@material-ui/core/Avatar\"\nimport Paper from \"@material-ui/core/Paper\"\nimport Grid from \"@material-ui/core/Grid\"\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport SignIn from \"./SignIn\"\nimport CompleteSignUp from \"./CompleteSignUp\"\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    width: 500,\n  },\n  root: {\n    height: \"100vh\",\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  close: {\n    cursor: \"pointer\",\n    color: theme.palette.secondary.main,\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n}))\n\nexport default ({ loginDrawerOpen, onClose }) => {\n  const classes = useStyles()\n  const [user, setUser] = useState({})\n\n  const [state, setState] = useState({\n    signingIn: true,\n    completeSignUp: false,\n    user: \"\",\n  })\n\n  const toggleCompleteSignUp = (user) => {\n    setState((prevState) => ({\n      ...prevState,\n      signingIn: false,\n      completeSignUp: true,\n      user: user,\n      requiredAttributes: user.challengeParam.requiredAttributes,\n    }))\n  }\n\n  const drawer = () => (\n    <div className={classes.drawer} role=\"presentation\">\n      <Grid container component=\"main\" className={classes.root}>\n        <Grid\n          item\n          xs={12}\n          sm={12}\n          md={12}\n          component={Paper}\n          elevation={6}\n          square\n        >\n          <div className={classes.paper}>\n            <Grid container>\n              <Grid item xs>\n                <ArrowForwardIcon onClick={onClose} className={classes.close} />\n              </Grid>\n            </Grid>\n            <Avatar className={classes.avatar}>\n              <LockOutlinedIcon />\n            </Avatar>\n            {state.signingIn && (\n              <SignIn\n                onRequireCompleteSignUp={(user) => toggleCompleteSignUp(user)}\n                onUserChange={(user) => {\n                  setUser(user)\n                }}\n                onClose={onClose}\n              />\n            )}\n            {state.completeSignUp && (\n              <CompleteSignUp\n                requiredAttributes={state.requiredAttributes}\n                user={user}\n                onClose={onClose}\n                onUserChange={(user) => {\n                  setUser(user)\n                }}\n              />\n            )}\n          </div>\n        </Grid>\n      </Grid>\n    </div>\n  )\n\n  return (\n    <>\n      <Drawer anchor=\"right\" open={loginDrawerOpen} onClose={onClose}>\n        {drawer()}\n      </Drawer>\n    </>\n  )\n}\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return window.require(\"electron\")\n  }\n  return null\n}\n","import posthog from \"posthog-js\"\nimport useElectron from \"./use-electron\"\n\nconst posthogMock = {\n  opt_in_capturing: () => null,\n  opt_out_capturing: () => null,\n  init: () => null,\n  reset: () => null,\n  capture: () => null,\n  capture_forms: () => null,\n  capture_pageview: () => null,\n  register: () => null,\n  register_once: () => null,\n  unregister: () => null,\n  identify: () => \"mock\",\n  alias: () => null,\n  set_config: () => null,\n  get_config: () => null,\n  get_property: () => null,\n  get_distinct_id: () => null,\n  has_opted_out_capturing: () => true,\n  has_opted_in_capturing: () => false,\n  disable_all_events: () => null,\n  people: {\n    set: () => null,\n    set_once: () => null,\n  },\n}\n\nwindow.posthogInitialized = false\nexport default () => {\n  const isDesktop = Boolean(useElectron())\n  if (window.Cypress) {\n    window.posthogInitialized = true\n    window.posthog = posthogMock\n  }\n  if (!window.posthogInitialized) {\n    posthog.init(\"dSrx1PbFd02XsxlLd7qNbeTxKZwwao2sclVmapyYlT4\", {\n      api_host: \"https://posthog.universaldatatool.com\",\n      autocapture: false,\n    })\n    window.posthog = posthog\n    const domain = isDesktop\n      ? \"https://desktop.universaldatatool.com\"\n      : window.location.origin\n    posthog.capture(\"domain\", { domain })\n    posthog.capture(\"is_desktop\", { isDesktop: isDesktop })\n    posthog.people.set({ is_desktop: isDesktop, domain })\n    window.posthogInitialized = true\n  }\n  return window.posthog\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport PeopleIcon from \"@material-ui/icons/People\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport usePosthog from \"../../utils/use-posthog\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Container = styled(\"div\")({ position: \"relative\", marginLeft: 8 })\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\",\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 10,\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12,\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10,\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800],\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800],\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\",\n  },\n})\nconst ErrorText = styled(\"div\")({\n  color: colors.red[500],\n  padding: 8,\n  fontSize: 14,\n})\n\nconst CreateNewButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  color: colors.blue[500],\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n  },\n})\nconst ExitButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n    color: colors.red[500],\n  },\n})\n\nexport default ({\n  fileOpen = false,\n  inSession = false,\n  error,\n  onJoinSession,\n  onCreateSession,\n  onLeaveSession,\n  sessionBoxOpen,\n  changeSessionBoxOpen,\n}) => {\n  const [loadingSession, changeLoadingSession] = useState(false)\n  const [sessionUrl, changeSessionUrl] = useState(\"\")\n  const [userName, changeUserName] = useLocalStorage(\"userName\", \"anonymous\")\n  const posthog = usePosthog()\n\n  // internalization hook\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    if (loadingSession) {\n      setTimeout(() => {\n        changeLoadingSession(false)\n      }, 10000)\n    }\n  }, [loadingSession])\n\n  return (\n    <Container\n      title=\"collaborate-icon\"\n      onMouseEnter={() => changeSessionBoxOpen(true)}\n      onMouseLeave={() => changeSessionBoxOpen(false)}\n    >\n      <IconButton style={{ color: inSession ? colors.blue[500] : undefined }}>\n        <PeopleIcon />\n      </IconButton>\n      <PopupBox className={sessionBoxOpen ? \"\" : \"hidden\"}>\n        <h1>{t(\"collaborate\")}</h1>\n        {!inSession ? (\n          <>\n            <h2>{t(\"join-a-session\")}</h2>\n            <TextField\n              variant=\"outlined\"\n              label=\"URL to Session\"\n              value={sessionUrl}\n              onChange={(e) => changeSessionUrl(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      color=\"primary\"\n                      onClick={() => {\n                        posthog.capture(\"join_collaborative_session\")\n                        onJoinSession(sessionUrl)\n                      }}\n                      disabled={!sessionUrl}\n                    >\n                      <ArrowForwardIcon />\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n            {error && <ErrorText>{error}</ErrorText>}\n            <CreateNewButton\n              fullWidth\n              disabled={!fileOpen || loadingSession || error}\n              onClick={() => {\n                posthog.capture(\"create_collaborative_session\")\n                onCreateSession()\n                changeLoadingSession(true)\n              }}\n            >\n              {loadingSession ? (\n                <CircularProgress className=\"icon\" size={24} />\n              ) : (\n                <AddBoxTwoTone className=\"icon\" />\n              )}\n              Create New Session\n            </CreateNewButton>\n          </>\n        ) : (\n          <>\n            <TextField\n              style={{ marginTop: 12 }}\n              variant=\"outlined\"\n              label=\"User Name\"\n              value={userName}\n              onChange={(e) => changeUserName(e.target.value)}\n            />\n            <ExitButton fullWidth onClick={onLeaveSession}>\n              <ExitToAppIcon className=\"icon\" />\n              {t(\"leave-session\")}\n            </ExitButton>\n          </>\n        )}\n      </PopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\",\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 10,\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12,\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10,\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800],\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800],\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\",\n  },\n})\n\nexport default ({ open, children }) => {\n  return <PopupBox className={open ? \"\" : \"hidden\"}>{children}</PopupBox>\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport HeaderPopupBox from \"../HeaderPopupBox\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Container = styled(\"div\")({ position: \"relative\" })\n\nconst StyledButton = styled(Button)({\n  justifyContent: \"flex-start\",\n  \"& .fakeicon\": {\n    display: \"inline-block\",\n    marginRight: 8,\n    padding: 4,\n    textAlign: \"center\",\n    paddingTop: 5,\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: \"#fff\",\n    backgroundColor: colors.grey[700],\n    borderRadius: 4,\n    width: 36,\n    \"&.blue\": {\n      backgroundColor: colors.blue[700],\n    },\n    \"&.green\": {\n      backgroundColor: colors.green[700],\n    },\n    \"&.orange\": {\n      backgroundColor: colors.orange[700],\n    },\n  },\n})\n\nexport default ({ interfaceType, onDownload }) => {\n  const [open, changeOpen] = useState(false)\n  const { t } = useTranslation()\n\n  return (\n    <Container\n      onMouseEnter={() => changeOpen(true)}\n      onMouseLeave={() => changeOpen(false)}\n    >\n      <IconButton>\n        <DownloadIcon />\n      </IconButton>\n      <HeaderPopupBox open={open}>\n        <h1>{t(\"download\")}</h1>\n        <StyledButton fullWidth onClick={() => onDownload(\"csv\")}>\n          <div className=\"fakeicon green\">CSV</div>\n          {t(\"download-csv\")}\n        </StyledButton>\n        <StyledButton fullWidth onClick={() => onDownload(\"json\")}>\n          <div className=\"fakeicon blue\">JSON</div>\n          {t(\"download-json\")}\n        </StyledButton>\n        <StyledButton\n          fullWidth\n          target=\"_blank\"\n          href=\"https://universaldatatool.com/convert\"\n        >\n          <div className=\"fakeicon orange\">↗</div>\n          {t(\"other-formats\")}\n        </StyledButton>\n      </HeaderPopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nfunction GitHub(props: Object) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\n    </SvgIcon>\n  )\n}\n\nexport default GitHub\n","// @flow weak\n\nimport seed from \"seed-random\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst fade = (cmap, amt) => {\n  const newCmap = {}\n  for (let i = 100; i < 1000; i++) {\n    if (i - amt <= 0) {\n      newCmap[i] = \"#fff\"\n    } else {\n      newCmap[i] = cmap[i - amt]\n    }\n  }\n  return newCmap\n}\n\nconst fadedGrey = {\n  ...colors.grey,\n  // \"800\": colors.grey[600],\n  // \"700\": colors.grey[500],\n  // \"600\": colors.grey[400],\n  // \"500\": colors.grey[300],\n  // \"400\": colors.grey[200],\n  // \"300\": colors.grey[100],\n  isFaded: true,\n}\n\nconst availableColors = [\n  colors.blue,\n  colors.deepOrange,\n  colors.green,\n  colors.purple,\n  colors.pink,\n  colors.cyan,\n  colors.orange,\n  colors.indigo,\n]\n\nconst colorMap = {\n  ...colors,\n  complete: colors.blue,\n  incomplete: fadedGrey,\n  faded: fadedGrey,\n  review: colors.deepOrange,\n  ellipsis1: fade(colors.grey, 100),\n  ellipsis2: fade(colors.grey, 200),\n  ellipsis3: fade(colors.grey, 300),\n}\n\nexport default (brush) => {\n  return (\n    colorMap[brush] || availableColors[seed(brush) * availableColors.length]\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport BrushIcon from \"@material-ui/icons/Brush\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport HeaderPopupBox from \"../HeaderPopupBox\"\nimport useEventCallback from \"use-event-callback\"\nimport memoize from \"lodash/memoize\"\nimport getBrushColorPalette from \"../../utils/get-brush-color-palette.js\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Container = styled(\"div\")({ position: \"relative\" })\nconst BrushCircle = styled(\"div\")(({ color }) => ({\n  display: \"inline\",\n  marginRight: 8,\n  backgroundColor: color[700],\n  width: 24,\n  height: 24,\n  borderRadius: 20,\n}))\n\nconst OtherColorContainers = styled(\"div\")({\n  paddingTop: 10,\n  padding: 4,\n  display: \"flex\",\n  flexWrap: \"wrap\",\n})\n\nconst StyledIconButton = styled(IconButton)(({ iconcolor, selected }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  backgroundColor: iconcolor[700],\n  border: selected ? `4px solid ${iconcolor[\"A200\"]}` : \"4px solid #fff\",\n  boxSizing: \"content-box\",\n  margin: 4,\n  transition: \"transform 200ms linear\",\n  \"&:hover\": {\n    backgroundColor: iconcolor[800],\n    transform: \"scale(1.2,1.2)\",\n  },\n  \"&:active\": {\n    transition: \"transform 100ms linear\",\n    transform: \"scale(1.4,1.4)\",\n  },\n}))\n\nconst StyledButton = styled(Button)(({ selected, iconcolor }) => ({\n  justifyContent: \"flex-start\",\n  marginTop: 4,\n  marginBottom: 4,\n  paddingTop: 8,\n  paddingBottom: 8,\n  backgroundColor: selected ? iconcolor[50] : \"#fff\",\n  border: selected ? `2px solid ${iconcolor[200]}` : \"2px solid #fff\",\n  \"&:hover\": {\n    backgroundColor: selected ? iconcolor[100] : \"none\",\n  },\n}))\n\nexport default ({ selectedBrush, onChangeSelectedBrush }) => {\n  const [open, changeOpen] = useState(false)\n  const handleClick = useEventCallback((color) =>\n    memoize(() => onChangeSelectedBrush(color))\n  )\n\n  // internalization hook\n  const { t } = useTranslation()\n\n  return (\n    <Container\n      onMouseEnter={() => changeOpen(true)}\n      onMouseLeave={() => changeOpen(false)}\n    >\n      <IconButton>\n        <BrushIcon\n          style={{ color: getBrushColorPalette(selectedBrush)[800] }}\n        />\n      </IconButton>\n      <HeaderPopupBox open={open}>\n        <h1>{t(\"sample-brushes\")}</h1>\n        <StyledButton\n          selected={selectedBrush === \"complete\" || selectedBrush === \"blue\"}\n          iconcolor={colors.blue}\n          fullWidth\n          onClick={handleClick(\"complete\")}\n        >\n          <BrushCircle color={colors.blue} />\n          {t(\"complete\")}\n        </StyledButton>\n        <StyledButton\n          selected={\n            selectedBrush === \"review\" || selectedBrush === \"deepOrange\"\n          }\n          iconcolor={colors.deepOrange}\n          fullWidth\n          onClick={handleClick(\"review\")}\n        >\n          <BrushCircle color={colors.deepOrange} />\n          {t(\"review\")}\n        </StyledButton>\n        <OtherColorContainers>\n          <StyledIconButton\n            onClick={handleClick(\"green\")}\n            selected={selectedBrush === \"green\"}\n            iconcolor={colors.green}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"purple\")}\n            selected={selectedBrush === \"purple\"}\n            iconcolor={colors.purple}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"pink\")}\n            selected={selectedBrush === \"pink\"}\n            iconcolor={colors.pink}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"cyan\")}\n            selected={selectedBrush === \"cyan\"}\n            iconcolor={colors.cyan}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"orange\")}\n            selected={selectedBrush === \"orange\"}\n            iconcolor={colors.orange}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"indigo\")}\n            selected={selectedBrush === \"indigo\"}\n            iconcolor={colors.indigo}\n          />\n        </OtherColorContainers>\n      </HeaderPopupBox>\n    </Container>\n  )\n}\n","import React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nconst SlackIcon = (props) => {\n  return (\n    <SvgIcon>\n      <svg\n        style={{\n          width: 32,\n          height: 32,\n        }}\n        viewBox=\"50 60 160 160\"\n      >\n        <g>\n          <g>\n            <path d=\"M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9s-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z\" />\n            <path d=\"M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9 s-12.9-5.8-12.9-12.9C105.9,183.5,105.9,151.2,105.9,151.2z\" />\n          </g>\n          <g>\n            <path d=\"M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9s5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z\" />\n            <path d=\"M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9 s5.8-12.9,12.9-12.9C86.5,105.9,118.8,105.9,118.8,105.9z\" />\n          </g>\n          <g>\n            <path d=\"M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z\" />\n            <path d=\"M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9 c7.1,0,12.9,5.8,12.9,12.9V118.8z\" />\n          </g>\n          <g>\n            <path d=\"M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z\" />\n            <path d=\"M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9 c0,7.1-5.8,12.9-12.9,12.9H151.2z\" />\n          </g>\n        </g>\n      </svg>\n    </SvgIcon>\n  )\n}\n\nexport default SlackIcon\n","// @flow weak\n\nimport React, { memo } from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport Box from \"@material-ui/core/Box\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport StorageIcon from \"@material-ui/icons/Storage\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport CollaborateButton from \"../CollaborateButton\"\nimport DownloadButton from \"../DownloadButton\"\nimport Button from \"@material-ui/core/Button\"\nimport GithubIcon from \"../Header/GithubIcon\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport packageJSON from \"../../../package.json\"\nimport BrushButton from \"../BrushButton\"\nimport useAuth from \"../../utils/auth-handlers/use-auth.js\"\nimport SlackIcon from \"./SlackIcon\"\nimport GitHubButton from \"react-github-btn\"\n\nconst capitalize = (s) => {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nconst useStyles = makeStyles((theme) => ({\n  headerButton: {\n    marginLeft: 16,\n  },\n  grow: { flexGrow: 1 },\n  list: {\n    width: 300,\n  },\n  tab: {\n    color: \"#000\",\n    \"& .icon\": {},\n  },\n  fullHeightTab: {\n    ...theme.mixins.toolbar,\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: 20,\n    },\n  },\n  tabWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    textTransform: \"none\",\n    color: \"#000\",\n    \"&&& svg\": {\n      marginBottom: 0,\n      marginRight: 8,\n      width: 18,\n      height: 18,\n    },\n  },\n}))\n\nconst getIcon = (t) => {\n  switch (t) {\n    case \"Setup\":\n      return <SettingsIcon className=\"icon\" />\n    case \"Label\":\n      return <BorderColorIcon className=\"icon\" />\n    case \"Samples\":\n      return <StorageIcon className=\"icon\" />\n    default:\n      return <div></div>\n  }\n}\n\nconst HeaderToolbar = ({\n  tabs,\n  currentTab,\n  onChangeTab,\n  additionalButtons,\n  onOpenDrawer,\n  title = \"Universal Data Tool\",\n  interfaceType,\n  isDesktop,\n  fileOpen,\n  sessionBoxOpen,\n  changeSessionBoxOpen,\n  inSession,\n  onCreateSession,\n  onLeaveSession,\n  onJoinSession,\n  onDownload,\n  selectedBrush,\n  onChangeSelectedBrush,\n  isSmall,\n  authConfig,\n  changeLoginDrawerOpen,\n  collaborateError,\n  isWelcomePage,\n}) => {\n  const c = useStyles()\n  const { authProvider, isLoggedIn, logout } = useAuth()\n\n  return (\n    <AppBar color=\"default\" position=\"static\">\n      <Toolbar variant=\"dense\">\n        {!isDesktop && (\n          <IconButton onClick={onOpenDrawer} className={c.headerButton}>\n            <MenuIcon />\n          </IconButton>\n        )}\n        {fileOpen ? title : \"Universal Data Tool v\" + packageJSON.version}\n        <CollaborateButton\n          sessionBoxOpen={sessionBoxOpen}\n          changeSessionBoxOpen={changeSessionBoxOpen}\n          fileOpen={fileOpen}\n          inSession={inSession}\n          onCreateSession={onCreateSession}\n          onLeaveSession={onLeaveSession}\n          onJoinSession={onJoinSession}\n          error={collaborateError}\n        />\n        {fileOpen && (\n          <BrushButton\n            selectedBrush={selectedBrush}\n            onChangeSelectedBrush={onChangeSelectedBrush}\n          />\n        )}\n        {!isDesktop && fileOpen && (\n          <DownloadButton\n            interfaceType={interfaceType}\n            onDownload={onDownload}\n          />\n        )}\n        <div className={c.grow} />\n        {additionalButtons}\n        {tabs.length > 0 && (\n          <Tabs\n            onChange={(e, newTab) => onChangeTab(newTab.toLowerCase())}\n            value={currentTab}\n          >\n            {tabs.map((t) => (\n              <Tab\n                key={t}\n                classes={{ root: c.fullHeightTab, wrapper: c.tabWrapper }}\n                className={c.tab}\n                icon={getIcon(t)}\n                label={isSmall ? \"\" : t}\n                value={t.toLowerCase()}\n              />\n            ))}\n          </Tabs>\n        )}\n        {authProvider !== \"none\" && isWelcomePage && !isLoggedIn && (\n          <Button\n            onClick={() => {\n              changeLoginDrawerOpen(true)\n            }}\n            className={c.headerButton}\n          >\n            Login with {capitalize(authProvider)}\n          </Button>\n        )}\n        {isLoggedIn && (\n          <Button onClick={logout} className={c.headerButton}>\n            Logout\n          </Button>\n        )}\n        {!isSmall && !isWelcomePage && (\n          <IconButton\n            href=\"https://github.com/UniversalDataTool/universal-data-tool\"\n            className={c.headerButton}\n          >\n            <GithubIcon />\n          </IconButton>\n        )}\n        {!isSmall && isWelcomePage && (\n          <Box paddingTop=\"4px\" paddingLeft=\"8px\">\n            <GitHubButton\n              href=\"https://github.com/UniversalDataTool/universal-data-tool\"\n              data-icon=\"octicon-star\"\n              data-size=\"large\"\n              data-show-count=\"true\"\n              aria-label=\"Star UniversalDataTool/universal-data-tool on GitHub\"\n            >\n              Star\n            </GitHubButton>\n          </Box>\n        )}\n        {!isSmall && isWelcomePage && (\n          <IconButton\n            href=\"https://join.slack.com/t/universaldatatool/shared_invite/zt-d8teykwi-iOSOUfxugKR~M4AJN6VL3g\"\n            className={c.headerButton}\n          >\n            <SlackIcon />\n          </IconButton>\n        )}\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default memo(HeaderToolbar)\n","// @flow\nimport React from \"react\"\nimport ImageSearch from \"@material-ui/icons/ImageSearch\"\nimport Image from \"@material-ui/icons/Image\"\nimport CropFree from \"@material-ui/icons/CropFree\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Category from \"@material-ui/icons/Category\"\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport ContactSupport from \"@material-ui/icons/ContactSupport\"\nimport LowPriority from \"@material-ui/icons/LowPriority\"\nimport AccessibilityNewIcon from \"@material-ui/icons/AccessibilityNew\"\n\nexport const templates = [\n  {\n    name: \"Empty\",\n    Icon: CropFree,\n    dataset: {\n      interface: {},\n      samples: [],\n    },\n  },\n  {\n    name: \"Image Segmentation\",\n    Icon: ImageSearch,\n    dataset: {\n      interface: {\n        type: \"image_segmentation\",\n        labels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\n          \"bounding-box\",\n          \"polygon\",\n          // \"full-segmentation\",\n          \"point\",\n          // \"pixel-mask\"\n        ],\n      },\n      samples: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Image Classification\",\n    Icon: Image,\n    dataset: {\n      interface: {\n        type: \"image_classification\",\n        labels: [\"valid\", \"invalid\"],\n      },\n      samples: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Video Segmentation\",\n    Icon: OndemandVideoIcon,\n    dataset: {\n      interface: {\n        type: \"video_segmentation\",\n        labels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\"bounding-box\", \"polygon\", \"point\"],\n      },\n      samples: [\n        {\n          videoUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/SampleVideo_1280x720_1mb.mp4\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Data Entry\",\n    Icon: Edit,\n    dataset: {\n      interface: {\n        type: \"data_entry\",\n        description: \"# Markdown description here\",\n        surveyjs: {\n          questions: [\n            {\n              type: \"text\",\n              name: \"document_title\",\n              title: \"Title of Document\",\n            },\n          ],\n        },\n      },\n      samples: [\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1906.01969.pdf\",\n        },\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1908.07069.pdf\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Named Entity Recognition\",\n    Icon: TextFormat,\n    dataset: {\n      interface: {\n        type: \"text_entity_recognition\",\n        overlapAllowed: false,\n        labels: [\n          {\n            id: \"food\",\n            displayName: \"Food\",\n            description: \"Edible item.\",\n          },\n          {\n            id: \"hat\",\n            displayName: \"Hat\",\n            description: \"Something worn on the head.\",\n          },\n        ],\n      },\n      samples: [\n        {\n          document:\n            \"This strainer makes a great hat, I'll wear it while I serve spaghetti!\",\n        },\n        {\n          document: \"Why are all these dumpings covered in butter?!\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Text Entity Relations\",\n    Icon: ({ ...props }) => (\n      <LowPriority\n        {...props}\n        style={{ ...props.style, transform: \"rotate(90deg)\" }}\n      />\n    ),\n    dataset: {\n      interface: {\n        type: \"text_entity_relations\",\n        entityLabels: [\n          {\n            id: \"food\",\n            displayName: \"Food\",\n            description: \"Edible item.\",\n          },\n          {\n            id: \"hat\",\n            displayName: \"Hat\",\n            description: \"Something worn on the head.\",\n          },\n        ],\n        relationLabels: [\n          {\n            id: \"subject\",\n            displayName: \"Subject\",\n          },\n        ],\n      },\n      samples: [\n        {\n          document:\n            \"This strainer makes a great hat, I'll wear it while I serve spaghetti!\",\n        },\n        {\n          document: \"Why are all these dumpings covered in butter?!\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Text Classification\",\n    Icon: ContactSupport,\n    dataset: {\n      interface: {\n        type: \"text_classification\",\n        labels: [\"positive_sentiment\", \"negative_sentiment\"],\n      },\n      samples: [\n        {\n          document: \"Wow this is terrible. I hated it.\",\n        },\n        {\n          document: \"This has made me so happy. I love this.\",\n        },\n        {\n          document:\n            \"At first I wasn't sure. Then I thought, oh it's not very good.\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Audio Transcription\",\n    Icon: Audiotrack,\n    dataset: {\n      interface: {\n        type: \"audio_transcription\",\n        description: \"# Markdown description here\",\n      },\n      samples: [\n        {\n          audioUrl: \"https://html5tutorial.info/media/vincent.mp3\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Composite\",\n    Icon: Category,\n    dataset: {\n      description: \"# Markdown description here\",\n      interface: {\n        type: \"composite\",\n        fields: [\n          {\n            fieldName: \"textInfo\",\n            interface: {\n              type: \"data_entry\",\n              surveyjs: {\n                questions: [\n                  {\n                    type: \"text\",\n                    name: \"group_letter\",\n                    title: \"Letter of Group\",\n                  },\n                ],\n              },\n            },\n          },\n          {\n            fieldName: \"segmentation\",\n            interface: {\n              type: \"image_segmentation\",\n              labels: [\"group text\"],\n              regionTypesAllowed: [\"bounding-box\"],\n            },\n          },\n        ],\n      },\n      samples: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Pixel Segmentation\",\n    Icon: ImageSearch,\n    dataset: {\n      interface: {\n        type: \"image_pixel_segmentation\",\n        labels: [\"hair\", \"mouth\", \"nose\", \"eyes\"],\n        description: \"These are AI-generated faces, not real people.\",\n      },\n      samples: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/datasets.workaround.online/faces/010041.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/datasets.workaround.online/faces/010026.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/datasets.workaround.online/faces/010025.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Image Landmark Annotation\",\n    Icon: AccessibilityNewIcon,\n    dataset: {\n      interface: {\n        type: \"image_landmark_annotation\",\n        keypointDefinitions: {\n          human: {\n            landmarks: {\n              nose: {\n                label: \"Nose\",\n                color: \"#f00\",\n                defaultPosition: [0, 0],\n              },\n              leftEye: {\n                label: \"Left Eye\",\n                color: \"#00f\",\n                defaultPosition: [-0.05, -0.05],\n              },\n              leftEar: {\n                label: \"Left Ear\",\n                color: \"#0ff\",\n                defaultPosition: [-0.1, -0.05],\n              },\n              rightEye: {\n                label: \"Left Eye\",\n                color: \"#f0f\",\n                defaultPosition: [0.05, -0.05],\n              },\n              rightEar: {\n                label: \"Left Ear\",\n                color: \"#00f\",\n                defaultPosition: [0.1, -0.05],\n              },\n              sternum: {\n                label: \"Sternum\",\n                color: \"#0f0\",\n                defaultPosition: [0, 0.1],\n              },\n              leftShoulder: {\n                label: \"Left Shoulder\",\n                color: \"#0ff\",\n                defaultPosition: [-0.2, 0.1],\n              },\n              rightShoulder: {\n                label: \"Right Shoulder\",\n                color: \"#00f\",\n                defaultPosition: [0.2, 0.1],\n              },\n              leftElbow: {\n                label: \"Left Elbow\",\n                color: \"#0f0\",\n                defaultPosition: [-0.2, 0.2],\n              },\n              rightElbow: {\n                label: \"Right Elbow\",\n                color: \"#f00\",\n                defaultPosition: [0.2, 0.2],\n              },\n              leftHand: {\n                label: \"Left Hand\",\n                color: \"#00f\",\n                defaultPosition: [-0.2, 0.3],\n              },\n              rightHand: {\n                label: \"Right Hand\",\n                color: \"#f0f\",\n                defaultPosition: [0.2, 0.3],\n              },\n              leftThigh: {\n                label: \"Left Thigh\",\n                color: \"#f00\",\n                defaultPosition: [-0.1, 0.35],\n              },\n              rightThigh: {\n                label: \"Right Thigh\",\n                color: \"#0ff\",\n                defaultPosition: [0.1, 0.35],\n              },\n              leftKnee: {\n                label: \"Left Thigh\",\n                color: \"#ff0\",\n                defaultPosition: [-0.15, 0.45],\n              },\n              rightKnee: {\n                label: \"Right Thigh\",\n                color: \"#0f0\",\n                defaultPosition: [0.15, 0.45],\n              },\n              leftFoot: {\n                label: \"Left Foot\",\n                color: \"#00f\",\n                defaultPosition: [-0.15, 0.55],\n              },\n              rightFoot: {\n                label: \"Right Foot\",\n                color: \"#f00\",\n                defaultPosition: [0.15, 0.55],\n              },\n            },\n            connections: [\n              [\"sternum\", \"nose\"],\n              [\"nose\", \"leftEye\"],\n              [\"leftEye\", \"leftEar\"],\n              [\"nose\", \"rightEye\"],\n              [\"rightEye\", \"rightEar\"],\n              [\"sternum\", \"leftShoulder\"],\n              [\"leftShoulder\", \"leftElbow\"],\n              [\"leftElbow\", \"leftHand\"],\n              [\"sternum\", \"leftThigh\"],\n              [\"leftThigh\", \"leftKnee\"],\n              [\"leftKnee\", \"leftFoot\"],\n              [\"sternum\", \"rightShoulder\"],\n              [\"rightShoulder\", \"rightElbow\"],\n              [\"rightElbow\", \"rightHand\"],\n              [\"sternum\", \"rightThigh\"],\n              [\"rightThigh\", \"rightKnee\"],\n              [\"rightKnee\", \"rightFoot\"],\n            ],\n          },\n        },\n      },\n      samples: [\n        {\n          imageUrl:\n            \"https://media.istockphoto.com/photos/businesswoman-picture-id918002786\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"3D Bounding Box\",\n    Icon: ThreeDRotation,\n    dataset: {\n      interface: {\n        type: \"3d_bounding_box\",\n        description: \"3D Bounding Box\",\n      },\n      samples: [{}],\n    },\n  },\n]\n\nexport const templateMap = templates.reduce((acc, t) => {\n  acc[t.name] = t\n  acc[t.dataset.interface.type] = t\n  return acc\n}, {})\n\nexport default templates\n","//@flow weak\n\nimport React, { useCallback } from \"react\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport { useDropzone } from \"react-dropzone\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport { GoMarkGithub } from \"react-icons/go\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport HomeIcon from \"@material-ui/icons/Home\"\nimport { FaTrashAlt } from \"react-icons/fa\"\nimport templates from \"../StartingPage/templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport NoteAddIcon from \"@material-ui/icons/NoteAdd\"\nimport SettingsInputHdmiIcon from \"@material-ui/icons/SettingsInputHdmi\"\nimport { useTranslation } from \"react-i18next\"\n\nconst useStyles = makeStyles({})\n\nexport default ({\n  recentItems,\n  changeRecentItems,\n  onClickHome,\n  onCloseDrawer,\n  onClickManagePlugins,\n  drawerOpen,\n  onOpenFile,\n  onOpenRecentItem,\n  onClickTemplate,\n}) => {\n  const c = useStyles()\n  const { t } = useTranslation()\n\n  const onDrop = useCallback(\n    (acceptedFiles) => {\n      onOpenFile(acceptedFiles[0])\n    },\n    [onOpenFile]\n  )\n\n  function onDeleteFile(i) {\n    changeRecentItems(\n      recentItems.filter((oneRecentFile) => oneRecentFile.id !== i)\n    )\n  }\n\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n  return (\n    <Drawer open={drawerOpen} onClose={onCloseDrawer}>\n      <List className={c.list}>\n        <ListItem onClick={onClickHome} button>\n          <ListItemIcon>\n            <HomeIcon />\n          </ListItemIcon>\n          <ListItemText>Home</ListItemText>\n        </ListItem>\n        <ListItem {...getRootProps()} button>\n          <ListItemIcon>\n            <NoteAddIcon />\n          </ListItemIcon>\n          <ListItemText>Open File</ListItemText>\n          <input {...getInputProps()} />\n        </ListItem>\n        {onClickManagePlugins && (\n          <ListItem\n            onClick={() => {\n              onClickManagePlugins()\n              onCloseDrawer()\n            }}\n            button\n          >\n            <ListItemIcon>\n              <SettingsInputHdmiIcon />\n            </ListItemIcon>\n            <ListItemText>Manage Plugins</ListItemText>\n          </ListItem>\n        )}\n        <ListSubheader>Recent Files</ListSubheader>\n        {recentItems.length === 0 ? (\n          <ListItem>\n            <ListItemText\n              style={{ textAlign: \"center\", color: colors.grey[500] }}\n            >\n              {t(\"no-recent-items\")}\n            </ListItemText>\n          </ListItem>\n        ) : (\n          recentItems.map((ri, index) => (\n            <ListItem key={ri.fileName} button>\n              <ListItemIcon\n                onClick={() => {\n                  onOpenRecentItem(ri)\n                }}\n              >\n                <FileIcon />\n              </ListItemIcon>\n              <ListItemText\n                onClick={() => {\n                  onOpenRecentItem(ri)\n                }}\n              >\n                {ri.fileName}\n              </ListItemText>\n              <ListItemIcon\n                onClick={() => {\n                  onDeleteFile(ri.id)\n                }}\n              >\n                <FaTrashAlt />\n              </ListItemIcon>\n            </ListItem>\n          ))\n        )}\n        <ListSubheader>Create From Template</ListSubheader>\n        {templates.map((template) => (\n          <ListItem\n            button\n            key={template.name}\n            onClick={() => onClickTemplate(template)}\n          >\n            <ListItemIcon>\n              <template.Icon />\n            </ListItemIcon>\n            <ListItemText>{template.name}</ListItemText>\n          </ListItem>\n        ))}\n        <ListSubheader>{t(\"explore-more\")}</ListSubheader>\n        {/* <ListItem button>\n      <ListItemIcon>\n        <CodeIcon />\n      </ListItemIcon>\n      <ListItemText>Integrate</ListItemText>\n    </ListItem> */}\n        <ListItem\n          button\n          onClick={() => {\n            window.location.href =\n              \"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n          }}\n        >\n          <ListItemIcon>\n            <GoMarkGithub />\n          </ListItemIcon>\n          <ListItemText>Github</ListItemText>\n        </ListItem>\n      </List>\n    </Drawer>\n  )\n}\n","// @flow weak\n\nimport React, { useState, createContext, useContext, useCallback } from \"react\"\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"\nimport LoginDrawer from \"../LoginDrawer\"\n\nimport HeaderToolbar from \"../HeaderToolbar\"\nimport HeaderDrawer from \"../HeaderDrawer\"\n\nexport const HeaderContext = createContext({\n  recentItems: [],\n  changeRecentItems: () => null,\n  onClickTemplate: () => null,\n  onClickHome: () => null,\n  onOpenFile: () => null,\n  onOpenRecentItem: () => null,\n  isDesktop: false,\n  inSession: false,\n  onJoinSession: () => null,\n  onCreateSession: () => null,\n  onLeaveSession: () => null,\n  sessionBoxOpen: false,\n  changeSessionBoxOpen: () => null,\n  fileOpen: false,\n  onDownload: () => null,\n  authConfig: null,\n  onUserChange: () => null,\n  user: null,\n  logoutUser: () => null,\n})\n\nconst emptyArray = []\n\nexport default ({\n  additionalButtons = emptyArray,\n  title,\n  currentTab,\n  onChangeTab,\n  tabs = emptyArray,\n}) => {\n  const [drawerOpen, changeDrawerOpen] = useState(false)\n  const [loginDrawerOpen, changeLoginDrawerOpen] = useState(false)\n  let headerContext = useContext(HeaderContext)\n  if (!headerContext.recentItems) headerContext.recentItems = []\n\n  const isSmall = useMediaQuery(\"(max-width: 800px)\")\n\n  const onOpenDrawer = useCallback(() => changeDrawerOpen(true), [])\n  const onCloseDrawer = useCallback(() => changeDrawerOpen(false), [])\n\n  return (\n    <>\n      <HeaderToolbar\n        tabs={tabs}\n        currentTab={currentTab}\n        onChangeTab={onChangeTab}\n        additionalButtons={additionalButtons}\n        onOpenDrawer={onOpenDrawer}\n        isSmall={isSmall}\n        {...headerContext}\n        changeLoginDrawerOpen={changeLoginDrawerOpen}\n        title={title}\n      />\n      <HeaderDrawer\n        drawerOpen={drawerOpen}\n        onCloseDrawer={onCloseDrawer}\n        onClickHome={headerContext.onClickHome}\n        onClickManagePlugins={headerContext.onClickManagePlugins}\n        recentItems={headerContext.recentItems}\n        changeRecentItems={headerContext.changeRecentItems}\n        onOpenFile={headerContext.onOpenFile}\n        onClickTemplate={headerContext.onClickTemplate}\n        onOpenRecentItem={headerContext.onOpenRecentItem}\n      />\n      <LoginDrawer\n        authConfig={headerContext.authConfig}\n        loginDrawerOpen={loginDrawerOpen}\n        onClose={() => changeLoginDrawerOpen(false)}\n        onUserChange={headerContext.onUserChange}\n        logoutUser={headerContext.logoutUser}\n      />\n    </>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport CloseIcon from \"@material-ui/icons/Close\"\nimport FullScreenIcon from \"@material-ui/icons/Fullscreen\"\nimport FullScreenExitIcon from \"@material-ui/icons/FullscreenExit\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport { grey, blue, red } from \"@material-ui/core/colors\"\nimport ReactMarkdown from \"react-markdown\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst StyledDialogTitle = styled(DialogTitle)({\n  backgroundColor: grey[100],\n  borderBottom: `1px solid ${grey[300]}`,\n  paddingBottom: 12,\n  boxShadow: \"0px 2px 3px rgba(0,0,0,0.05)\",\n})\nconst StyledDialogContent = styled(DialogContent)({\n  paddingTop: 16,\n})\nconst StyledDialogActions = styled(DialogActions)({\n  backgroundColor: grey[100],\n  borderTop: `1px solid ${grey[300]}`,\n})\n\nexport default ({\n  open = false,\n  title,\n  children,\n  markdownContent,\n  onClose,\n  red: redOn,\n  noActionBar = false,\n  actions = [],\n}) => {\n  const [fullScreen, changeFullScreen] = useState(false)\n  return (\n    <Dialog open={open} onClose={onClose} fullScreen={fullScreen}>\n      <StyledDialogTitle>\n        <Box display=\"flex\" alignItems=\"center\">\n          <span style={{ color: redOn ? red[700] : undefined }}>{title}</span>\n          <div style={{ flexGrow: 1 }} />\n          <IconButton onClick={() => changeFullScreen(!fullScreen)}>\n            {fullScreen ? <FullScreenExitIcon /> : <FullScreenIcon />}\n          </IconButton>\n          <IconButton onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </StyledDialogTitle>\n      <StyledDialogContent>\n        <Box maxWidth=\"90vw\" minWidth={400} lineHeight={1.5}>\n          {markdownContent ? (\n            <ReactMarkdown source={markdownContent} />\n          ) : (\n            children\n          )}\n        </Box>\n      </StyledDialogContent>\n      {!noActionBar && (\n        <StyledDialogActions>\n          <Button onClick={() => onClose()}>\n            <span style={{ color: grey[700], fontWeight: 500 }}>Close</span>\n          </Button>\n          {actions.map((action, i) => (\n            <Button disabled={action.disabled} key={i} onClick={action.onClick}>\n              <span\n                style={{\n                  color: redOn\n                    ? red[700]\n                    : action.disabled\n                    ? grey[400]\n                    : blue[700],\n                  fontWeight: 500,\n                }}\n              >\n                {action.text}\n              </span>\n            </Button>\n          ))}\n        </StyledDialogActions>\n      )}\n    </Dialog>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport templates from \"../StartingPage/templates\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nconst useStyles = makeStyles({\n  bigButton: {\n    padding: 10,\n    width: 150,\n    height: 120,\n    border: \"1px solid #ccc\",\n    margin: 10,\n  },\n  bigIcon: {\n    width: 48,\n    height: 48,\n  },\n})\n\nexport default ({ open, onClose, onSelect }) => {\n  const c = useStyles()\n  return (\n    <SimpleDialog title=\"Create from Template\" open={open} onClose={onClose}>\n      {templates.map((template) => (\n        <Button\n          key={template.name}\n          onClick={() => onSelect(template)}\n          className={c.bigButton}\n        >\n          <div>\n            <div>{template.name}</div>\n            <div>\n              <template.Icon className={c.bigIcon} />\n            </div>\n          </div>\n        </Button>\n      ))}\n    </SimpleDialog>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nconst CognitoIcon = (props) => {\n  return (\n    <SvgIcon {...props} viewBox=\"0 0 75 75\">\n      <g id=\"Reference\">\n        <rect\n          id=\"Red_Light_BG\"\n          data-name=\"Red Light BG\"\n          style={{ fill: \"#d6242d\" }}\n          width=\"75\"\n          height=\"75\"\n        />\n        <g id=\"Product_Icon\" data-name=\"Product Icon\">\n          <path\n            style={{ fill: \"#fff\" }}\n            d=\"M55,15H16.46a3.92,3.92,0,0,0-3.71,4.1v24.8A3.92,3.92,0,0,0,16.46,48H37.75V46H16.46a2,2,0,0,1-1.71-2.1V27h18V42a1,1,0,0,0,1,1h8V41H35.2V40.7a7.74,7.74,0,0,1,5.53-7.43,5.91,5.91,0,0,0,4.92,0,7.82,7.82,0,0,1,4.42,3.42l1.7-1v0a9.8,9.8,0,0,0-4.34-3.82,5.4,5.4,0,0,0,1.27-3.48,5.5,5.5,0,0,0-11,0A5.42,5.42,0,0,0,39,31.8a9.67,9.67,0,0,0-4.22,3.62V22h17v13.7h0V36h2V27h3V37h2l0-17.9A3.92,3.92,0,0,0,55,15ZM43.2,24.87a3.48,3.48,0,0,1,3.5,3.46,3.43,3.43,0,0,1-1.81,3,3.57,3.57,0,0,1-3.39,0,3.44,3.44,0,0,1-1.8-3A3.48,3.48,0,0,1,43.2,24.87ZM53.75,25V21a1,1,0,0,0-1-1h-19a1,1,0,0,0-1,1v4h-18v-5.9A2,2,0,0,1,16.46,17H55a2,2,0,0,1,1.73,2.1V25Z\"\n          />\n          <rect\n            style={{ fill: \"#fff\" }}\n            x=\"16.77\"\n            y=\"31.95\"\n            width=\"10.98\"\n            height=\"2\"\n          />\n          <rect\n            style={{ fill: \"#fff\" }}\n            x=\"16.77\"\n            y=\"36.95\"\n            width=\"6.98\"\n            height=\"2\"\n          />\n          <rect\n            style={{ fill: \"#fff\" }}\n            x=\"25.77\"\n            y=\"36.95\"\n            width=\"2.98\"\n            height=\"2\"\n          />\n          <path style={{ fill: \"#fff\" }} d=\"M51.78,35.65h0v0Z\" />\n          <path\n            style={{ fill: \"#fff\" }}\n            d=\"M52.14,60.05a10.11,10.11,0,1,1,1.22-20.14h0a10.12,10.12,0,0,1,6.46,16.61,10.47,10.47,0,0,1-3.37,2.57A10.19,10.19,0,0,1,52.14,60.05Zm0-18.22a8,8,0,0,0-3.69.9,8.11,8.11,0,0,0,7.16,14.55,8.2,8.2,0,0,0,2.71-2.07,8.11,8.11,0,0,0-5.19-13.32h0A8.22,8.22,0,0,0,52.12,41.83Z\"\n          />\n          <path\n            style={{ fill: \"#fff\" }}\n            d=\"M50.55,54.2h0a1,1,0,0,1-.71-.29l-3.23-3.23L48,49.27l2.52,2.52,5.7-5.71,1.42,1.42-6.42,6.41A1,1,0,0,1,50.55,54.2Z\"\n          />\n          <path style={{ fill: \"#fff\" }} d=\"M51.78,35.65h0v0Z\" />\n        </g>\n      </g>\n    </SvgIcon>\n  )\n}\n\nexport default CognitoIcon\n","// @flow\nimport CognitoIcon from \"./cognito-icon.js\"\nimport SdStorageOutlinedIcon from \"@material-ui/icons/SdStorageOutlined\"\nimport AccountTreeIcon from \"@material-ui/icons/AccountTree\"\n\nexport default [\n  {\n    name: \"AWS - Cognito\",\n    provider: \"cognito\",\n    Icon: CognitoIcon,\n  },\n  {\n    name: \"AWS - S3 (IAM)\",\n    provider: \"s3iam\",\n    Icon: SdStorageOutlinedIcon,\n  },\n  {\n    name: \"Proxy\",\n    provider: \"proxy\",\n    Icon: AccountTreeIcon,\n  },\n]\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { red } from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"center\",\n    pointerEvents: \"none\",\n  },\n  errorBox: {\n    display: \"flex\",\n    backgroundColor: red[700],\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4,\n  },\n})\n\nexport default ({ errors }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      {errors.map((err) => (\n        <Collapse key={err.id} in={err.life < 5000}>\n          <Fade in={err.life > 500}>\n            <div className={c.errorBox}>{err.message}</div>\n          </Fade>\n        </Collapse>\n      ))}\n    </div>\n  )\n}\n","// @flow\n\nimport { useState, useEffect } from \"react\"\n\nconst REFRESH_INTERVAL = 100\n\nexport default () => {\n  const [errors, changeErrors] = useState([])\n  useEffect(() => {\n    if (errors.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeErrors(\n        errors\n          .map((err) => ({\n            ...err,\n            life: err.life - REFRESH_INTERVAL,\n          }))\n          .filter((err) => err.life > 0)\n      )\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [errors])\n\n  function addError(message: string) {\n    changeErrors(\n      errors.concat([\n        {\n          id: Math.random().toString().split(\".\")[1],\n          message,\n          life: 5000,\n        },\n      ])\n    )\n  }\n\n  return [errors, addError]\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport authTemplates from \"./authTemplates\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport isEmpty from \"lodash/isEmpty\"\nimport Survey from \"material-survey/components/Survey\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport Amplify from \"aws-amplify\"\nimport { useAppConfig } from \"../AppConfig\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  bigButton: {\n    padding: 10,\n    width: 150,\n    height: 120,\n    border: \"1px solid #ccc\",\n    margin: 10,\n  },\n  bigIcon: {\n    width: 48,\n    height: 48,\n  },\n  cognitoIcon: {\n    width: 48,\n    height: 48,\n  },\n  howToSetupText: {\n    padding: 16,\n    color: colors.grey[600],\n    \"& a\": {\n      color: colors.blue[500],\n      textDecoration: \"none\",\n    },\n  },\n})\n\nconst forms = {\n  cognito: {\n    questions: [\n      {\n        name: \"auth.cognito.identity_pool_id\",\n        title: \"Amazon Cognito Identity Pool ID\",\n        placeholder: \"XX-XXXX-X:XXXXXXXX-XXXX-1234-abcd-1234567890ab\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.cognito.region\",\n        title: \"AWS Region\",\n        placeholder: \"XX-XXXX-X\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.cognito.user_pool_id\",\n        title: \"Amazon Cognito User Pool ID\",\n        placeholder: \"XX-XXXX-X_12ab34cd9\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.cognito.user_pool_web_client_id\",\n        title: \"Amazon Cognito Web Client ID\",\n        placeholder: \"26-char alphanumeric string\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.cognito.storage.aws_s3.bucket\",\n        title: \"Bucket AWS\",\n        placeholder: \"Name of the bucket\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.cognito.storage.aws_s3.region\",\n        title: \"Region of the bucket\",\n        placeholder: \"XX-XXXX-X\",\n        type: \"text\",\n        isRequired: true,\n      },\n    ],\n  },\n  s3iam: {\n    questions: [\n      {\n        name: \"auth.s3iam.access_key_id\",\n        title: \"Access Key ID\",\n        placeholder: \"\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.s3iam.secret_access_key\",\n        title: \"Secret Access Key\",\n        placeholder: \"\",\n        type: \"text\",\n        isRequired: true,\n      },\n      {\n        name: \"auth.s3iam.region\",\n        title: \"Region\",\n        placeholder: \"us-east-1\",\n        type: \"text\",\n        isRequired: true,\n      },\n    ],\n  },\n  proxy: {\n    questions: [\n      {\n        name: \"auth.proxy.corsproxy\",\n        type: \"text\",\n        title: \"CORS Proxy\",\n        description:\n          \"Some requests for images or APIs (like AWS S3) are blocked by browsers for security reasons, this CORs proxy will be used to enable blocked functionality when not using the desktop application.\",\n      },\n    ],\n  },\n}\n\nexport default ({ open, onClose, onSelect, onFinish, onAuthConfigured }) => {\n  const c = useStyles()\n  const [authProvider, setAuthProvider] = useState(null)\n  const [dialogTitle, setDialogTitle] = useState(\"Add Authentication\")\n  const [errors, addError] = useErrors()\n  const { appConfig, setAppConfig, fromConfig, setInConfig } = useAppConfig()\n\n  const getDefaultsFromConfig = (form) => {\n    const questionIds = form.questions.map((q) => q.name)\n    const defaults = {}\n    for (const questionId of questionIds) {\n      const configValue = fromConfig(questionId)\n      if (configValue !== undefined) {\n        defaults[questionId] = configValue\n      }\n    }\n    return defaults\n  }\n\n  // TODO useAppConfig to load in existing configuration\n\n  const validateAuthProvider = async (answers) => {\n    if (answers.provider === \"cognito\") {\n      const config = {\n        Auth: {\n          identityPoolId: answers[\"auth.cognito.identity_pool_id\"],\n          region: answers[\"auth.cognito.region\"],\n          userPoolId: answers[\"auth.cognito.user_pool_id\"],\n          userPoolWebClientId: answers[\"auth.cognito.user_pool_web_client_id\"],\n          mandatorySignIn: true,\n          authenticationFlowType: \"USER_PASSWORD_AUTH\",\n        },\n        Storage: {\n          AWSS3: {\n            bucket: answers[\"auth.cognito.storage.aws_s3.bucket\"],\n            region: answers[\"auth.cognito.storage.aws_s3.region\"],\n          },\n        },\n      }\n\n      try {\n        Amplify.configure(config)\n      } catch (err) {\n        addError(\"Invalid Cognito config: \" + err.toString())\n      }\n    }\n    setAppConfig({\n      ...appConfig,\n      ...answers,\n      \"auth.provider\": answers.provider,\n    })\n    // TODO some kind of success message\n    onClose()\n    setAuthProvider(null)\n  }\n\n  return (\n    <>\n      <SimpleDialog\n        title={dialogTitle}\n        open={open}\n        onClose={() => {\n          onClose()\n        }}\n        onFinish={onFinish}\n      >\n        {isEmpty(authProvider) &&\n          authTemplates.map((template, i) => (\n            <Button\n              key={template.name}\n              onClick={() => {\n                setAuthProvider(template.provider)\n                setDialogTitle(`Add Authentication for ${template.name}`)\n              }}\n              className={c.bigButton}\n            >\n              <div>\n                <div>{template.name}</div>\n                <div>\n                  <template.Icon className={c.cognitoIcon} />\n                </div>\n              </div>\n            </Button>\n          ))}\n        {authProvider === \"cognito\" && (\n          <div className={c.howToSetupText}>\n            Check this wiki{\" \"}\n            <a href=\"https://github.com/UniversalDataTool/universal-data-tool/wiki/Cognito---Amplify-Authentication-Setup-Instructions\">\n              guide for setting up AWS Cognito with the Universal Data Tool\n            </a>\n            .\n          </div>\n        )}\n        {!isEmpty(authProvider) && forms[authProvider] && (\n          <Survey\n            variant=\"flat\"\n            form={forms[authProvider]}\n            onQuestionChange={(questionId, newValue) => {\n              setInConfig(questionId, newValue)\n            }}\n            onFinish={(answers) => {\n              answers[\"provider\"] = authProvider\n              validateAuthProvider(answers)\n            }}\n            defaultAnswers={{\n              ...getDefaultsFromConfig(forms[authProvider]),\n              \"auth.provider\": fromConfig(\"auth.provider\"),\n            }}\n          />\n        )}\n        <ErrorToasts errors={errors} />\n      </SimpleDialog>\n    </>\n  )\n}\n","export default (url) => {\n  const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/\n  const match = url.match(regExp)\n\n  const id = match && match[2].length === 11 ? match[2] : null\n\n  if (!id) return null\n\n  return `https://youtube.com/embed/${id}`\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Header from \"../Header\"\nimport Button from \"@material-ui/core/Button\"\nimport templates from \"./templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { useDropzone } from \"react-dropzone\"\nimport CreateFromTemplateDialog from \"../CreateFromTemplateDialog\"\nimport AddAuthFromTemplateDialog from \"../AddAuthFromTemplateDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport packageInfo from \"../../../package.json\"\nimport useEventCallback from \"use-event-callback\"\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\nimport Box from \"@material-ui/core/Box\"\nimport Select from \"react-select\"\nimport { useTranslation } from \"react-i18next\"\nimport getEmbedYoutubeUrl from \"./get-embed-youtube-url.js\"\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: colors.grey[900],\n    height: \"100vh\",\n  },\n  headerButton: {\n    fontSize: 12,\n    backgroundColor: \"#fff\",\n  },\n  downloadIcon: {\n    marginTop: 2,\n    width: 18,\n    height: 18,\n    marginRight: 4,\n    marginLeft: -6,\n    color: colors.grey[700],\n  },\n  languageSelectionWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    textAlign: \"center\",\n  },\n  languageSelectionBox: {\n    display: \"flex\",\n    paddingTop: 24,\n    [theme.breakpoints.up(\"sm\")]: {\n      justifyContent: \"flex-end\",\n    },\n  },\n}))\n\nconst ContentContainer = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  flexGrow: 1,\n  color: \"#fff\",\n  overflowY: \"scroll\",\n  padding: 100,\n  [theme.breakpoints.down(\"sm\")]: {\n    padding: 50,\n  },\n}))\nconst Content = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"calc(100% - 32px)\",\n  marginLeft: 16,\n  maxWidth: 1000,\n}))\n\nconst Title = styled(\"div\")({\n  marginTop: 20,\n  fontSize: 36,\n  fontWeight: 600,\n  color: colors.grey[300],\n})\n\nconst languageSelectionFormStyle = {\n  control: (base, state) => ({\n    ...base,\n    border: \"1px solid #9e9e9e\",\n    background: \"transparent\",\n    color: \"#e0e0e0\",\n  }),\n  menuList: (base) => ({\n    ...base,\n    padding: 0,\n    margin: 0,\n    color: \"black\",\n  }),\n  singleValue: (base) => ({\n    ...base,\n    color: \"white\",\n  }),\n}\n\nconst Subtitle = styled(\"div\")({\n  fontSize: 18,\n  // fontWeight: \"bold\",\n  marginTop: 8,\n  color: colors.grey[500],\n})\nconst ActionList = styled(\"div\")({ marginTop: 48 })\nconst Action = styled(\"a\")({\n  display: \"block\",\n  color: colors.blue[500],\n  marginTop: 4,\n  cursor: \"pointer\",\n  textDecoration: \"none\",\n})\nconst ActionTitle = styled(\"div\")({\n  // fontWeight: \"bold\",\n  fontSize: 24,\n  marginBottom: 8,\n  color: colors.grey[500],\n})\nconst ActionText = styled(\"div\")({\n  color: colors.grey[300],\n  \"& a\": {\n    cursor: \"pointer\",\n    color: colors.blue[500],\n    textDecoration: \"none\",\n  },\n})\nconst Actionless = styled(\"div\")({\n  color: colors.grey[600],\n  paddingTop: 16,\n})\n\nconst BottomSpacer = styled(\"div\")({ height: 100 })\n\nconst languageOptions = [\n  { label: \"English\", value: \"en\" },\n  { label: \"French\", value: \"fr\" },\n  { label: \"Chinese\", value: \"cn\" },\n  { label: \"Portuguese\", value: \"pt\" },\n  { label: \"Dutch\", value: \"nl\" },\n]\n\nexport default ({\n  onFileDrop,\n  onOpenTemplate,\n  showDownloadLink = true,\n  recentItems = [],\n  onOpenRecentItem,\n  onClickOpenSession,\n}) => {\n  const c = useStyles()\n  const posthog = usePosthog()\n\n  // internalization hook\n  const { t, i18n } = useTranslation()\n\n  //const isDesktop = useIsDesktop()\n  const [newVersionAvailable, changeNewVersionAvailable] = useState(false)\n  useEffect(() => {\n    // if (!isDesktop) return\n    async function checkNewVersion() {\n      const newPackage = await fetch(\n        \"https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/package.json\"\n      ).then((r) => r.json())\n      if (newPackage.version !== packageInfo.version) {\n        changeNewVersionAvailable(newPackage.version)\n      }\n    }\n    checkNewVersion()\n  }, [])\n\n  const [latestCommunityUpdate, setLatestCommunityUpdate] = useState(null)\n  useEffect(() => {\n    async function getLatestREADME() {\n      const readme = await fetch(\n        \"https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/README.md\"\n      ).then((r) => r.text())\n      const startCU = readme.search(\"COMMUNITY-UPDATE:START\")\n      const endCU = readme.search(\"COMMUNITY-UPDATE:END\")\n      const communityUpdates = readme\n        .slice(startCU, endCU)\n        .split(\"\\n\")\n        .slice(1, -1)\n      const latestYtLink = communityUpdates[0].match(/\\((.*)\\)/)[1]\n      setLatestCommunityUpdate({\n        name: communityUpdates[0].match(/\\[(.*)\\]/)[1],\n        ytLink: latestYtLink,\n        embedYTLink: getEmbedYoutubeUrl(latestYtLink),\n      })\n    }\n    getLatestREADME()\n  }, [])\n\n  const [\n    createFromTemplateDialogOpen,\n    changeCreateFromTemplateDialogOpen,\n  ] = useState(false)\n  const [addAuthFromDialogOpen, changeAddAuthFromDialogOpen] = useState(false)\n  const onDrop = useEventCallback((acceptedFiles) => {\n    onFileDrop(acceptedFiles[0])\n  })\n\n  const changeLanguage = (language) => {\n    i18n.changeLanguage(language)\n  }\n\n  let { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n  return (\n    <div className={c.container}>\n      <CreateFromTemplateDialog\n        open={createFromTemplateDialogOpen}\n        onSelect={(template) => {\n          posthog.capture(\"template_clicked\", {\n            clicked_template: template.name,\n          })\n          onOpenTemplate(template)\n        }}\n        onClose={() => changeCreateFromTemplateDialogOpen(false)}\n      />\n      <AddAuthFromTemplateDialog\n        open={addAuthFromDialogOpen}\n        onSelect={(template) => onOpenTemplate(template)}\n        onClose={() => changeAddAuthFromDialogOpen(false)}\n      />\n      <Header\n        additionalButtons={[\n          newVersionAvailable && (\n            <Button\n              variant=\"outlined\"\n              key=\"download-latest\"\n              className={c.headerButton}\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n            >\n              <DownloadIcon className={c.downloadIcon} />\n              {t(\"Download Version\")} v{newVersionAvailable}\n            </Button>\n          ),\n          !newVersionAvailable && showDownloadLink && (\n            <Button\n              variant=\"outlined\"\n              key=\"download\"\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n              className={c.headerButton}\n            >\n              <DownloadIcon className={c.downloadIcon} />\n              {t(\"download\")}\n            </Button>\n          ),\n        ].filter(Boolean)}\n      />\n      <ContentContainer>\n        <Content>\n          <Grid container>\n            <Grid xs={12} sm={6} item>\n              <Title>Universal Data Tool</Title>\n              <Subtitle>{t(\"universaldatatool-description\")}</Subtitle>\n            </Grid>\n            <Grid xs={12} sm={6} item>\n              <Box className={c.languageSelectionBox}>\n                <Box\n                  width=\"100%\"\n                  maxWidth={200}\n                  className={c.languageSelectionWrapper}\n                >\n                  <Select\n                    styles={languageSelectionFormStyle}\n                    defaultValue={languageOptions[0]}\n                    options={languageOptions}\n                    onChange={({ value }) => changeLanguage(value)}\n                  />\n                </Box>\n              </Box>\n            </Grid>\n            <Grid xs={12} sm={6} item>\n              <ActionList>\n                <ActionTitle>Start</ActionTitle>\n                <Action\n                  onClick={() => {\n                    posthog.capture(\"template_clicked\", {\n                      clicked_template: \"empty\",\n                    })\n                    onOpenTemplate(templates.find((t) => t.name === \"Empty\"))\n                  }}\n                >\n                  {t(\"new-file\")}\n                </Action>\n                <Action\n                  onClick={() => changeCreateFromTemplateDialogOpen(true)}\n                >\n                  {t(\"start-from-template\")}\n                </Action>\n                <Action {...getRootProps()}>\n                  <input {...getInputProps()} />\n                  {t(\"open-file\")}\n                </Action>\n                {onClickOpenSession && (\n                  <Action onClick={onClickOpenSession}>\n                    {t(\"open-collaborative-session\")}\n                  </Action>\n                )}\n                <Action onClick={() => changeAddAuthFromDialogOpen(true)}>\n                  {t(\"add-authentication\")}\n                </Action>\n                <Action\n                  onClick={() => {\n                    window.location.href =\n                      \"https://universaldatatool.com/courses\"\n                  }}\n                >\n                  {t(\"create-training-course\")}\n                </Action>\n                {/* <Action>Open Folder</Action> */}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Recent</ActionTitle>\n                {recentItems.length === 0 ? (\n                  <Actionless>{t(\"no-recent-files\")}</Actionless>\n                ) : (\n                  recentItems.map((ri, i) => (\n                    <Action key={i} onClick={() => onOpenRecentItem(ri)}>\n                      {ri.fileName}\n                    </Action>\n                  ))\n                )}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Help</ActionTitle>\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool/releases\">\n                  {t(\"downloading-and-installing-udt\")}\n                </Action>\n                <Action href=\"https://dev.to/seveibar/make-bounding-boxes-for-artificial-intelligence-with-udt-1kai\">\n                  {t(\"labeling-images\")}\n                </Action>\n                {/* <Action>Custom Data Entry</Action> */}\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool\">\n                  Github Repository\n                </Action>\n                <Action href=\"https://www.youtube.com/channel/UCgFkrRN7CLt7_iTa2WDjf2g\">\n                  Youtube Channel\n                </Action>\n\n                {/* <Action href=\"#\">\n                  How to Collaborate in Real-Time with UDT\n                </Action> */}\n              </ActionList>\n            </Grid>\n            <Grid xs={12} sm={6} item>\n              <ActionList>\n                <ActionTitle>About</ActionTitle>\n                <ActionText>\n                  {t(\"start-page-about-first-paragraph\")}\n                  <br />\n                  <br />\n                  {t(\"start-page-about-second-paragraph\")}\n                  <br />\n                  <br />\n                  {t(\"the-udt-uses-an\")}{\" \"}\n                  <a href=\"https://github.com/UniversalDataTool/udt-format\">\n                    open-source data format (.udt.json / .udt.csv)\n                  </a>{\" \"}\n                  {t(\"start-page-about-third-paragraph\")}\n                  <br />\n                  <br />\n                </ActionText>\n              </ActionList>\n              <ActionList>\n                {latestCommunityUpdate && (\n                  <>\n                    <ActionTitle>{latestCommunityUpdate.name}</ActionTitle>\n                    <iframe\n                      title={latestCommunityUpdate.name}\n                      width=\"320\"\n                      height=\"178\"\n                      // src=\"https://www.youtube.com/embed/QW-s4XVK3Ok\"\n                      src={latestCommunityUpdate.embedYTLink}\n                      frameBorder=\"0\"\n                      allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                      allowFullScreen\n                    ></iframe>\n                  </>\n                )}\n                {/* <ActionText>\n                  <Action\n                    style={{ display: \"inline\" }}\n                    onClick={() => changeCreateFromTemplateDialogOpen(true)}\n                  >\n                    {t(\"open-a-template\")}\n                  </Action>{\" \"}\n                  {t(\"to-see-how-the-udt-could-work-for-your-data\")}\n                </ActionText> */}\n              </ActionList>\n            </Grid>\n            <Grid xs={12} sm={6} item>\n              <BottomSpacer />\n            </Grid>\n          </Grid>\n        </Content>\n      </ContentContainer>\n    </div>\n  )\n}\n","// @flow\nimport React, { useState } from \"react\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport isEmpty from \"lodash/isEmpty\"\n\nconst useStyles = makeStyles({\n  textField: {\n    marginLeft: 8,\n  },\n})\n\nexport default ({ value, onChange }) => {\n  const c = useStyles()\n  const [newValue, setNewValue] = useState(value || \"\")\n\n  const onBlur = () => {\n    if (!isEmpty(newValue) && newValue !== \"unnamed\") {\n      onChange(newValue)\n      setNewValue(newValue)\n    } else {\n      setNewValue(value)\n    }\n  }\n\n  return (\n    <TextField\n      className={c.textField}\n      label=\"File Name\"\n      variant=\"outlined\"\n      size=\"small\"\n      InputProps={{\n        inputProps: { style: { color: \"#000\" } },\n      }}\n      onBlur={onBlur}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\") {\n          e.preventDefault()\n          e.stopPropagation()\n          e.target.blur()\n        }\n      }}\n      onKeyPress={(e) => {\n        e.stopPropagation()\n      }}\n      onChange={(e) => {\n        setNewValue(e.target.value)\n      }}\n      value={newValue || \"\"}\n    />\n  )\n}\n","// @flow weak\n\nimport React, { memo, useCallback, useReducer, useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { useLocalStorage } from \"react-use\"\nimport { styled } from \"@material-ui/core/styles\"\nimport range from \"lodash/range\"\nimport * as colors from \"@material-ui/core/colors\"\nimport classNames from \"classnames\"\nimport TablePagination from \"@material-ui/core/TablePagination\"\nimport Box from \"@material-ui/core/Box\"\nimport getBrushColorPalette from \"../../utils/get-brush-color-palette\"\n\nconst Container = styled(\"div\")({\n  flexWrap: \"wrap\",\n  height: \"100%\",\n  boxSizing: \"border-box\",\n  display: \"flex\",\n  flexDirection: \"column\",\n})\nconst EmptyState = styled(\"div\")({\n  fontSize: 24,\n  color: colors.grey[500],\n  padding: 30,\n  textAlign: \"center\",\n})\nconst SampleDiv = styled(\"div\")(({ color }) => ({\n  color: \"#fff\",\n  fontVariantNumeric: \"tabular-nums\",\n  margin: 4,\n  padding: 4,\n  backgroundColor: color[500],\n  display: \"inline-flex\",\n  fontSize: 14,\n  fontWeight: 500,\n  textAlign: \"center\",\n  justifyContent: \"center\",\n  minWidth: \"3em\",\n  borderRadius: 3,\n  cursor: \"pointer\",\n  userSelect: \"none\",\n  transition:\n    \"box-shadow 200ms ease, transform 200ms ease, background-color 200ms ease\",\n  \"&:hover\": {\n    backgroundColor: color[700],\n  },\n  // color: color.isFaded ? \"#000\" : \"#fff\",\n  \"&.selected\": {\n    backgroundColor: color[700],\n    boxShadow: `0px 0px 2px 1px ${color[\"A200\"]}`,\n    transform: \"scale(1.05,1.05)\",\n  },\n}))\n\nconst Sample = memo(\n  ({\n    index,\n    onClick,\n    completed,\n    selected,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    brush,\n  }) => {\n    return (\n      <SampleDiv\n        className={classNames({ completed, selected })}\n        onClick={() => onClick(index)}\n        onMouseDown={() => onMouseDown(index)}\n        onMouseUp={() => onMouseUp(index)}\n        onMouseEnter={() => onMouseEnter(index)}\n        color={getBrushColorPalette(brush)}\n      >\n        {index}\n      </SampleDiv>\n    )\n  },\n  function (p, n) {\n    return (\n      p.index === n.index &&\n      p.completed === n.completed &&\n      p.selected === n.selected &&\n      p.brush === n.brush\n    )\n  }\n)\n\nexport default ({\n  count,\n  completed = [],\n  samples,\n  onClick,\n  tablePaginationPadding = 0,\n}) => {\n  const [samplesPerPage, changeSamplesPerPage] = useLocalStorage(\n    \"samplesPerPage\",\n    100\n  )\n  const [sampleOffset, changeSampleOffset] = useLocalStorage(\"sampleOffset\", 0)\n\n  useEffect(() => {\n    if (sampleOffset > count) {\n      changeSampleOffset(0)\n    }\n  }, [changeSampleOffset, sampleOffset, count])\n\n  const [selectRange, changeSelectRange] = useReducer((state, newValue) => {\n    if (newValue === null) return null\n    if (typeof newValue === \"number\") {\n      if (!state) return null\n      return [Math.min(newValue, state[0]), Math.max(newValue + 1, state[1])]\n    }\n    return newValue\n  }, null)\n\n  const startSelectRange = useCallback(\n    (index) => changeSelectRange([index, index + 1]),\n    [changeSelectRange]\n  )\n  const moveSelectRange = useCallback((index) => changeSelectRange(index), [\n    changeSelectRange,\n  ])\n  const endSelectRange = useCallback(() => {}, [])\n  const checkAndNullifySelectRange = useCallback(\n    (e) => {\n      if (e.buttons !== 1) {\n        changeSelectRange(null)\n      }\n    },\n    [changeSelectRange]\n  )\n  const onClickMemo = useEventCallback(onClick)\n\n  return (\n    <Container\n      onMouseUp={checkAndNullifySelectRange}\n      onMouseEnter={checkAndNullifySelectRange}\n    >\n      {count === 0 && (\n        <EmptyState>\n          No samples, try using \"Import Toy Dataset\" in Samples > Import\n        </EmptyState>\n      )}\n      <Box flexGrow={1}>\n        {range(\n          sampleOffset,\n          Math.min(count, sampleOffset + samplesPerPage)\n        ).map((i) => (\n          <Sample\n            onClick={onClickMemo}\n            key={i}\n            index={i}\n            completed={completed[i]}\n            brush={completed[i] ? samples[i].brush || \"complete\" : \"incomplete\"}\n            selected={selectRange && i >= selectRange[0] && i < selectRange[1]}\n            onMouseDown={startSelectRange}\n            onMouseEnter={moveSelectRange}\n            onMouseUp={endSelectRange}\n          />\n        ))}\n        {sampleOffset + samplesPerPage < count && (\n          <>\n            {range(3).map((i) => (\n              <Sample\n                onClick={() => {\n                  changeSampleOffset(sampleOffset + samplesPerPage)\n                }}\n                key={sampleOffset + samplesPerPage + i}\n                selected={false}\n                brush={`ellipsis${i + 1}`}\n                index={sampleOffset + samplesPerPage + i}\n                completed={false}\n                onMouseEnter={() => {}}\n                onMouseDown={() => {}}\n                onMouseUp={() => {}}\n              />\n            ))}\n            <Box textAlign=\"center\" marginTop=\"16px\" color={colors.grey[700]}>\n              More Samples on Next Page\n            </Box>\n          </>\n        )}\n      </Box>\n      <Box paddingRight={tablePaginationPadding}>\n        <TablePagination\n          rowsPerPageOptions={[100, 250, 500, 1000, 2000, 10000]}\n          component=\"div\"\n          count={count}\n          rowsPerPage={samplesPerPage}\n          page={Math.floor(sampleOffset / samplesPerPage)}\n          labelRowsPerPage=\"Samples per Page:\"\n          onChangePage={(e, newPage) =>\n            changeSampleOffset(newPage * samplesPerPage)\n          }\n          onChangeRowsPerPage={(e) => {\n            changeSampleOffset(0)\n            changeSamplesPerPage(+e.target.value)\n          }}\n        />\n      </Box>\n    </Container>\n  )\n}\n","export default (s, opts = {}) => {\n  console.log(s)\n  let extension = s.replace(/\\?.*/g, \"\").split(\".\").slice(-1)[0]\n  if (s.includes(\"gstatic.com/images\")) {\n    extension = \"jpg\"\n  }\n  switch (extension.toLowerCase()) {\n    case \"png\":\n    case \"jpg\":\n    case \"gif\":\n    case \"jpeg\":\n    case \"bmp\": {\n      return { imageUrl: s }\n    }\n    case \"pdf\": {\n      return { pdfUrl: s }\n    }\n    case \"mp3\":\n    case \"wav\": {\n      return { audioUrl: s }\n    }\n    default: {\n      if (opts.returnNulls) return null\n      throw new Error(`extension not recognized: \"${extension}\" in \"${s}\"`)\n      // TODO if the user doesn't care, return null (this\n      // behavior could be enabled with textfield option)\n    }\n  }\n}\n","// @flow weak\nimport React, { useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Select from \"react-select\"\nimport * as colors from \"@material-ui/core/colors\"\nimport getSampleFromUrl from \"./get-sample-from-url\"\n\nconst SelectContainer = styled(\"div\")({\n  marginTop: 8,\n  marginBottom: 16,\n})\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\nconst ErrorText = styled(\"div\")({\n  color: colors.red[600],\n  padding: 16,\n})\n\nconst autoDetectOptions = [\n  {\n    label: \"Auto Detect File Type\",\n    value: \"auto_detect\",\n  },\n  {\n    label: \"Image URLs\",\n    value: \"images\",\n  },\n]\n\nexport default ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n  const [urlType, changeURLType] = useState(\"auto_detect\")\n  const [error, setError] = useState(\"\")\n  return (\n    <SimpleDialog\n      title=\"Paste Urls\"\n      open={open}\n      onClose={onClose}\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            try {\n              onAddSamples(\n                content\n                  .split(\"\\n\")\n                  .map((l) => l.trim())\n                  .filter(Boolean)\n                  .map((s) =>\n                    urlType === \"images\"\n                      ? { imageUrl: s }\n                      : getSampleFromUrl(s, { returnNulls: true })\n                  )\n                  .filter(Boolean)\n              )\n            } catch (e) {\n              setError(e.toString())\n            }\n          },\n        },\n      ]}\n    >\n      <SelectContainer>\n        <Select\n          options={autoDetectOptions}\n          defaultValue={autoDetectOptions[0]}\n          onChange={(opt) => {\n            changeURLType(opt.value)\n          }}\n        />\n      </SelectContainer>\n      {error && <ErrorText>{error}</ErrorText>}\n      <TextArea\n        onChange={(e, v) => changeContent(e.target.value)}\n        placeholder={\"Paste URLs here\\nOne URL per line\"}\n      />\n    </SimpleDialog>\n  )\n}\n","import isEmpty from \"lodash/isEmpty\"\nexport default (sample) => {\n  var sampleName\n  if (!isEmpty(sample)) {\n    if (!isEmpty(sample.imageUrl)) {\n      sampleName = decodeURI(sample.imageUrl).match(\n        `.*\\\\/(([^\\\\/\\\\\\\\&\\\\?]*)\\\\.([a-zA-Z0-9]*))(\\\\?|$)`\n      )\n    }\n    if (!isEmpty(sample.videoUrl)) {\n      sampleName = decodeURI(sample.videoUrl).match(\n        `.*\\\\/(([^\\\\/\\\\\\\\&\\\\?]*)\\\\.([a-zA-Z0-9]*))(\\\\?|$)`\n      )\n    }\n    if (!isEmpty(sample.audioUrl)) {\n      sampleName = decodeURI(sample.audioUrl).match(\n        `.*\\\\/(([^\\\\/\\\\\\\\&\\\\?]*)\\\\.([a-zA-Z0-9]*))(\\\\?|$)`\n      )\n    }\n    if (!isEmpty(sample.pdfUrl)) {\n      sampleName = decodeURI(sample.pdfUrl).match(\n        `.*\\\\/(([^\\\\/\\\\\\\\&\\\\?]*)\\\\.([a-zA-Z0-9]*))(\\\\?|$)`\n      )\n    }\n  }\n  return sampleName\n}\n","import isEmpty from \"lodash/isEmpty\"\nexport default (UrlOfAFile) => {\n  var typeOfFile = \"File\"\n  var fileExtension = UrlOfAFile.match(\n    `\\\\/?([^\\\\/\\\\\\\\&\\\\?]*\\\\.([a-zA-Z0-9]*))(\\\\?|$)`\n  )\n  if (!isEmpty(fileExtension)) {\n    fileExtension = fileExtension[2].toLowerCase()\n  }\n  if (\n    fileExtension === \"jpg\" ||\n    fileExtension === \"jpeg\" ||\n    fileExtension === \"png\" ||\n    fileExtension === \"ico\" ||\n    fileExtension === \"jpe\" ||\n    fileExtension === \"gif\"\n  )\n    typeOfFile = \"Image\"\n  if (fileExtension === \"mp4\" || fileExtension === \"mkv\") typeOfFile = \"Video\"\n  if (fileExtension === \"mp3\") typeOfFile = \"Audio\"\n  if (fileExtension === \"pdf\") typeOfFile = \"PDF\"\n  if (fileExtension === \"txt\") typeOfFile = \"Texte\"\n  return typeOfFile\n}\n","import isEmpty from \"lodash/isEmpty\"\n\nexport default (objectOfRef, objectToCheck) => {\n  var resultSet = {\n    fileName: false,\n    content: {\n      interface: {\n        type: false,\n        labels: false,\n        regionTypesAllowed: false,\n      },\n      samples: false,\n    },\n    id: false,\n    mode: false,\n    any: false,\n  }\n  // Check if the object to check exist if not return false\n  if (isEmpty(objectToCheck)) return resultSet\n\n  // Check if the object of reference exist if not return true\n  if (isEmpty(objectOfRef)) {\n    resultSet.fileName = true\n    resultSet.content.interface.type = true\n    resultSet.content.interface.labels = true\n    resultSet.content.interface.regionTypesAllowed = true\n    resultSet.content.samples = true\n    resultSet.id = true\n    resultSet.mode = true\n    resultSet.any = true\n    return resultSet\n  }\n\n  if (objectOfRef !== objectToCheck) {\n    resultSet.any = true\n  } else {\n    return resultSet\n  }\n\n  // Check if the id doesn't exist or have change\n  if (!isEmpty(objectToCheck.id)) {\n    if (isEmpty(objectOfRef.id)) resultSet.id = true\n    else if (objectToCheck.id !== objectOfRef.id) resultSet.id = true\n  }\n\n  // Check if the content doesn't exist or have change\n  if (!isEmpty(objectToCheck.content)) {\n    if (isEmpty(objectOfRef.content)) {\n      resultSet.content.interface.type = true\n      resultSet.content.interface.labels = true\n      resultSet.content.interface.regionTypesAllowed = true\n      resultSet.content.samples = true\n    } else if (objectToCheck.content !== objectOfRef.content) {\n      //Check if the interface doesn't exist or have change\n      if (!isEmpty(objectToCheck.content.interface)) {\n        if (isEmpty(objectOfRef.content.interface)) {\n          resultSet.content.interface.type = true\n          resultSet.content.interface.labels = true\n          resultSet.content.interface.regionTypesAllowed = true\n        } else if (\n          objectToCheck.content.interface !== objectOfRef.content.interface\n        ) {\n          //Check if the type doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.type)) {\n            if (isEmpty(objectOfRef.content.interface.type)) {\n              resultSet.content.interface.type = true\n            } else if (\n              objectToCheck.content.interface.type !==\n              objectOfRef.content.interface.type\n            ) {\n              resultSet.content.interface.type = true\n            }\n          }\n          //Check if the labels doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.labels)) {\n            if (isEmpty(objectOfRef.content.interface.labels)) {\n              resultSet.content.interface.labels = true\n            } else if (\n              objectToCheck.content.interface.labels !==\n              objectOfRef.content.interface.labels\n            ) {\n              resultSet.content.interface.labels = true\n            }\n          }\n          //Check if the regionsTypesAllowed doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.regionTypesAllowed)) {\n            if (isEmpty(objectOfRef.content.interface.regionTypesAllowed)) {\n              resultSet.content.interface.regionTypesAllowed = true\n            } else if (\n              objectToCheck.content.interface.regionTypesAllowed !==\n              objectOfRef.content.interface.regionTypesAllowed\n            ) {\n              resultSet.content.interface.regionTypesAllowed = true\n            }\n          }\n        }\n      }\n      //Check if the samples doesn't exist or have change\n      if (!isEmpty(objectToCheck.content.samples)) {\n        if (isEmpty(objectOfRef.content.samples)) {\n          resultSet.content.samples = true\n        } else if (\n          objectToCheck.content.samples !== objectOfRef.content.samples\n        ) {\n          resultSet.content.samples = true\n        }\n      }\n    }\n  }\n\n  // Check if the mode doesn't exist or have change\n  if (!isEmpty(objectToCheck.mode)) {\n    if (isEmpty(objectOfRef.mode)) resultSet.mode = true\n    else if (objectToCheck.mode !== objectOfRef.mode) resultSet.mode = true\n  }\n\n  // Check if the fileName doesn't exist or have change\n  if (!isEmpty(objectToCheck.fileName)) {\n    if (isEmpty(objectOfRef.fileName)) resultSet.fileName = true\n    else if (objectToCheck.fileName !== objectOfRef.fileName)\n      resultSet.fileName = true\n  }\n  console.log({ resultSet })\n  //Default behavior return false\n  return resultSet\n}\n","// @flow weak\n\nimport getSampleNameFromURL from \"../get-sample-name-from-url\"\nimport RecognizeFileExtension from \"../RecognizeFileExtension\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { setIn } from \"seamless-immutable\"\nimport getFilesDifferencesImport from \"./get-files-differences.js\"\n\nexport const getFilesDifferences = getFilesDifferencesImport\n\nexport const getSampleName = (sample) => {\n  var sampleName\n  if (!isEmpty(sample.sampleName)) {\n    sampleName = sample.sampleName\n  } else {\n    sampleName = getSampleNameFromURL(sample)[1]\n  }\n  return sampleName\n}\n\nexport const getSampleUrl = (sample) => {\n  return (\n    sample.imageUrl ||\n    sample.videoUrl ||\n    sample.audioUrl ||\n    sample.pdfUrl ||\n    undefined\n  )\n}\n\nexport const constructSample = (sampleName, url, annotation) => {\n  var type = RecognizeFileExtension(url)\n  if (type === \"Image\") {\n    return {\n      annotation: annotation,\n      imageUrl: url,\n      sampleName: sampleName,\n    }\n  }\n  if (type === \"Video\") {\n    return {\n      annotation: annotation,\n      videoUrl: url,\n      sampleName: sampleName,\n    }\n  }\n  if (type === \"Audio\") {\n    return {\n      annotation: annotation,\n      audioUrl: url,\n      sampleName: sampleName,\n    }\n  }\n  if (type === \"PDF\") {\n    return {\n      annotation: annotation,\n      pdfUrl: url,\n      sampleName: sampleName,\n    }\n  }\n}\nexport const createOneNewSample = constructSample\n\nexport const getSampleWithName = (dataset, sampleName) => {\n  if (!dataset || !dataset.samples || !sampleName) return null\n  const { samples } = dataset\n  for (var i = 0; i < samples.length; i++) {\n    if (!isEmpty(samples[i])) {\n      const nameToSearch = getSampleNameFromURL(samples[i])\n      if (typeof samples[i].sampleName !== \"undefined\") {\n        nameToSearch[1] = samples[i].sampleName\n      }\n      if (nameToSearch[1] === sampleName) {\n        return samples[i]\n      }\n    }\n  }\n  return null\n}\nexport const getSampleWithThisSampleName = getSampleWithName\n\nexport const addNamesToSamples = (dataset) => {\n  if (!dataset || !dataset.samples) return\n  for (var i = 0; i < dataset.samples.length; i++) {\n    if (isEmpty(dataset.samples[i])) continue\n    var oldsample = dataset.samples[i]\n    var sampleName\n    if (!isEmpty(oldsample.document)) {\n      // Deal with the exception of the text file (they don't have url)\n      sampleName = [\n        oldsample.document,\n        \"sample\" + i.toString() + \".txt\",\n        \"sample\",\n        \"txt\",\n      ]\n    } else {\n      sampleName = getSampleNameFromURL(oldsample)\n      sampleName = renameSampleFromUrl(dataset.samples, oldsample, sampleName)\n    }\n    oldsample = setIn(oldsample, [\"sampleName\"], sampleName[1])\n    dataset = setIn(dataset, [\"samples\", i], oldsample)\n  }\n  return dataset\n}\nexport const setSamplesName = addNamesToSamples\n\nexport const renameSampleFromUrl = (samples, sampleToChange, sampleName) => {\n  var boolName = true\n  var v = 1\n  while (boolName) {\n    var sampletocompare1 = getSampleWithThisSampleName(sampleName[1], samples)\n    if (\n      sampletocompare1 !== null &&\n      getSampleUrl(sampletocompare1) !== getSampleUrl(sampleToChange)\n    ) {\n      if (isEmpty(sampleName[2].match(\"(.*)\\\\([0-9]*\\\\)$\"))) {\n        sampleName[1] =\n          sampleName[2] + \"(\" + v.toString() + \").\" + sampleName[3]\n      } else {\n        sampleName[1] =\n          sampleName[2].match(\"(.*)\\\\([0-9]*\\\\)$\")[1] +\n          \"(\" +\n          v.toString() +\n          \")\" +\n          +\".\" +\n          sampleName[3]\n      }\n      v++\n    } else {\n      boolName = false\n    }\n  }\n  return sampleName\n}\n\nexport const eraseAnnotation = (samples) => {\n  var samplesWithoutAnnotation = []\n  for (let i = 0; i < samples.length; i++) {\n    let Newsample = samples[i]\n    if (!isEmpty(Newsample.annotation)) {\n      Newsample = setIn(Newsample, [\"annotation\"], null)\n    }\n    samplesWithoutAnnotation.push(Newsample)\n  }\n  return samplesWithoutAnnotation\n}\n\nexport const concatSample = (actualSamples, newSamples, annotationToKeep) => {\n  var Tabsamples = actualSamples\n  if (annotationToKeep === \"incoming\") {\n    Tabsamples = eraseAnnotation(actualSamples)\n  }\n\n  var Tabsamples2 = newSamples\n  if (annotationToKeep === \"current\") {\n    Tabsamples2 = eraseAnnotation(newSamples)\n  }\n  var concatSamples = Tabsamples.concat(Tabsamples2)\n  return concatSamples\n}\n\nexport const getFileDifferences = (objectOfRef, objectToCheck) => {\n  var resultSet = {\n    fileName: false,\n    content: {\n      interface: {\n        type: false,\n        labels: false,\n        regionTypesAllowed: false,\n      },\n      samples: false,\n    },\n    id: false,\n    mode: false,\n    any: false,\n  }\n  // Check if the object to check exist if not return false\n  if (isEmpty(objectToCheck)) return resultSet\n\n  // Check if the object of reference exist if not return true\n  if (isEmpty(objectOfRef)) {\n    resultSet.fileName = true\n    resultSet.content.interface.type = true\n    resultSet.content.interface.labels = true\n    resultSet.content.interface.regionTypesAllowed = true\n    resultSet.content.samples = true\n    resultSet.id = true\n    resultSet.mode = true\n    resultSet.any = true\n    return resultSet\n  }\n\n  if (objectOfRef !== objectToCheck) {\n    resultSet.any = true\n  } else {\n    return resultSet\n  }\n\n  // Check if the id doesn't exist or have change\n  if (!isEmpty(objectToCheck.id)) {\n    if (isEmpty(objectOfRef.id)) resultSet.id = true\n    else if (objectToCheck.id !== objectOfRef.id) resultSet.id = true\n  }\n\n  // Check if the content doesn't exist or have change\n  if (!isEmpty(objectToCheck.content)) {\n    if (isEmpty(objectOfRef.content)) {\n      resultSet.content.interface.type = true\n      resultSet.content.interface.labels = true\n      resultSet.content.interface.regionTypesAllowed = true\n      resultSet.content.samples = true\n    } else if (objectToCheck.content !== objectOfRef.content) {\n      //Check if the interface doesn't exist or have change\n      if (!isEmpty(objectToCheck.content.interface)) {\n        if (isEmpty(objectOfRef.content.interface)) {\n          resultSet.content.interface.type = true\n          resultSet.content.interface.labels = true\n          resultSet.content.interface.regionTypesAllowed = true\n        } else if (\n          objectToCheck.content.interface !== objectOfRef.content.interface\n        ) {\n          //Check if the type doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.type)) {\n            if (isEmpty(objectOfRef.content.interface.type)) {\n              resultSet.content.interface.type = true\n            } else if (\n              objectToCheck.content.interface.type !==\n              objectOfRef.content.interface.type\n            ) {\n              resultSet.content.interface.type = true\n            }\n          }\n          //Check if the labels doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.labels)) {\n            if (isEmpty(objectOfRef.content.interface.labels)) {\n              resultSet.content.interface.labels = true\n            } else if (\n              objectToCheck.content.interface.labels !==\n              objectOfRef.content.interface.labels\n            ) {\n              resultSet.content.interface.labels = true\n            }\n          }\n          //Check if the regionsTypesAllowed doesn't exist or have change\n          if (!isEmpty(objectToCheck.content.interface.regionTypesAllowed)) {\n            if (isEmpty(objectOfRef.content.interface.regionTypesAllowed)) {\n              resultSet.content.interface.regionTypesAllowed = true\n            } else if (\n              objectToCheck.content.interface.regionTypesAllowed !==\n              objectOfRef.content.interface.regionTypesAllowed\n            ) {\n              resultSet.content.interface.regionTypesAllowed = true\n            }\n          }\n        }\n      }\n      //Check if the samples doesn't exist or have change\n      if (!isEmpty(objectToCheck.content.samples)) {\n        if (isEmpty(objectOfRef.content.samples)) {\n          resultSet.content.samples = true\n        } else if (\n          objectToCheck.content.samples !== objectOfRef.content.samples\n        ) {\n          resultSet.content.samples = true\n        }\n      }\n    }\n  }\n\n  // Check if the mode doesn't exist or have change\n  if (!isEmpty(objectToCheck.mode)) {\n    if (isEmpty(objectOfRef.mode)) resultSet.mode = true\n    else if (objectToCheck.mode !== objectOfRef.mode) resultSet.mode = true\n  }\n\n  // Check if the fileName doesn't exist or have change\n  if (!isEmpty(objectToCheck.fileName)) {\n    if (isEmpty(objectOfRef.fileName)) resultSet.fileName = true\n    else if (objectToCheck.fileName !== objectOfRef.fileName)\n      resultSet.fileName = true\n  }\n  //Default behavior return false\n  return resultSet\n}\n\nexport const fileHasChanged = getFileDifferences\n","import isEmpty from \"lodash/isEmpty\"\nimport Amplify, { Storage } from \"aws-amplify\"\nimport * as datasetHelper from \"../../utils//dataset-helper\"\nfunction CheckIfAnnotationExist(result, folderToFetch) {\n  return result.find(\n    (element) => element.key === `${folderToFetch}/annotations/annotations.json`\n  )\n}\n\nfunction GetSampleFromAnnotation(json, samples) {\n  if (isEmpty(json.content.samples)) return\n  var newSamples = []\n  for (var i = 0; i < json.content.samples.length; i++) {\n    var sampleName = datasetHelper.getSampleName(json.content.samples[i])\n    var annotation = json.content.samples[i].annotation\n    var sampleFound = datasetHelper.getSampleWithThisSampleName(\n      sampleName,\n      samples\n    )\n    var url\n    if (sampleFound === null) {\n      url = datasetHelper.getSampleUrl(samples)\n    } else {\n      url = datasetHelper.getSampleUrl(sampleFound)\n    }\n    newSamples.push(\n      datasetHelper.createOneNewSample(sampleName, url, annotation)\n    )\n  }\n  json.content.samples = newSamples\n}\n\nexport default async (result, samples, folderToFetch, authConfig) => {\n  Amplify.configure(authConfig)\n\n  var json = null\n  if (CheckIfAnnotationExist(result, folderToFetch)) {\n    await Storage.get(`${folderToFetch}/annotations/annotations.json`, {\n      expires: 24 * 60 * 60 * 2000,\n      level: \"private\",\n    })\n      .then(async (result) => {\n        await fetch(result).then(async (data) => {\n          return await data.json().then(async (result) => {\n            if (typeof result.content === \"undefined\") return\n            json = result\n            GetSampleFromAnnotation(json, samples)\n          })\n        })\n      })\n      .catch((err) => {\n        console.log(\"error getting link for s3 image\", err)\n        return null\n      })\n  }\n  return json\n}\n","import RecognizeFileExtension from \"../../utils/RecognizeFileExtension\"\nimport Amplify, { Storage } from \"aws-amplify\"\n\nasync function setUrl(result, configImport) {\n  if (configImport.loadProjectIsSelected) {\n    if (RecognizeFileExtension(result) === \"Image\") {\n      return { imageUrl: `${result}` }\n    } else if (RecognizeFileExtension(result) === \"Video\") {\n      return { videoUrl: `${result}` }\n    } else if (RecognizeFileExtension(result) === \"Audio\") {\n      return { audioUrl: `${result}` }\n    } else if (RecognizeFileExtension(result) === \"PDF\") {\n      return { pdfUrl: `${result}` }\n    }\n  } else {\n    if (\n      RecognizeFileExtension(result) === configImport.typeOfFileToLoad &&\n      configImport.typeOfFileToLoad === \"Image\"\n    ) {\n      return { imageUrl: `${result}` }\n    } else if (\n      RecognizeFileExtension(result) === configImport.typeOfFileToLoad &&\n      configImport.typeOfFileToLoad === \"Video\"\n    ) {\n      return { videoUrl: `${result}` }\n    } else if (\n      RecognizeFileExtension(result) === configImport.typeOfFileToLoad &&\n      configImport.typeOfFileToLoad === \"Audio\"\n    ) {\n      return { audioUrl: `${result}` }\n    } else if (\n      RecognizeFileExtension(result) === configImport.typeOfFileToLoad &&\n      configImport.typeOfFileToLoad === \"PDF\"\n    ) {\n      return { pdfUrl: `${result}` }\n    } else if (\n      RecognizeFileExtension(result) === configImport.typeOfFileToLoad &&\n      configImport.typeOfFileToLoad === \"Texte\"\n    ) {\n      var texte = await fetchTextInFile(result)\n      return { document: `${texte}` }\n    }\n  }\n}\nasync function fetchTextInFile(urlSource) {\n  var proxyUrl = \"https://cors-anywhere.herokuapp.com/\"\n  var response\n  var url\n  url = proxyUrl + urlSource\n  response = await fetch(url, {\n    method: \"GET\",\n  }).catch((error) => {\n    console.log(\"Looks like there was a problem: \\n\", error)\n  })\n  const texte = await response.text()\n  return texte\n}\nexport default async (result, folderToFetch, configImport, authConfig) => {\n  Amplify.configure(authConfig)\n  var samples = []\n  for (let i = 0; i < result.length; i++) {\n    if (result[i].key.match(`(${folderToFetch}/data).*(\\\\.).*`)) {\n      await Storage.get(result[i].key, {\n        expires: 24 * 60 * 60,\n        level: \"private\",\n      })\n        .then(async (result) => {\n          samples.push(await setUrl(result, configImport))\n        })\n        .catch((err) => {\n          console.log(\"error getting link for s3 image\", err)\n          return null\n        })\n    }\n  }\n  return samples\n}\n","import isEmpty from \"lodash/isEmpty\"\nexport default (typeAuthorize, file) => {\n  function interfaceFileType(type) {\n    if (\n      type === \"image_classification\" ||\n      type === \"image_segmentation\" ||\n      type === \"composite\"\n    )\n      return \"Image\"\n    if (type === \"video_segmentation\") return \"Video\"\n    if (type === \"audio_transcription\") return \"Audio\"\n    if (type === \"data_entry\") return \"PDF\"\n    if (type === \"text_entity_recognition\" || type === \"text_classification\")\n      return \"Texte\"\n    if (isEmpty(type)) return \"Empty\"\n    return \"File\"\n  }\n\n  function typesamplesSample(samples) {\n    if (isEmpty(samples) || isEmpty(samples[0])) return \"Empty\"\n    if (!isEmpty(samples[0].imageUrl)) return \"Image\"\n    if (!isEmpty(samples[0].videoUrl)) return \"Video\"\n    if (!isEmpty(samples[0].audioUrl)) return \"Audio\"\n    if (!isEmpty(samples[0].pdfUrl)) return \"PDF\"\n    if (!isEmpty(samples[0].document)) return \"Texte\"\n    return \"File\"\n  }\n  var result = [null, null]\n  if (isEmpty(file)) return false\n  result[0] = interfaceFileType(file.content.interface.type)\n  result[1] = typesamplesSample(file.content.samples)\n  if (typeAuthorize.includes(result[0]) && typeAuthorize.includes(result[1]))\n    return true\n  return false\n}\n","import { setIn } from \"seamless-immutable\"\nimport * as datasetHelper from \"../../utils//dataset-helper\"\nimport isEmpty from \"lodash/isEmpty\"\nexport default (file, json, configImport) => {\n  var contentOldFile = file.content\n  contentOldFile = setIn(\n    contentOldFile,\n    [\"samples\"],\n    datasetHelper.concatSample(\n      file.content.samples,\n      json.content.samples,\n      configImport.annotationToKeep\n    )\n  )\n\n  contentOldFile = setIn(contentOldFile, [\"interface\"], json.content.interface)\n  file = setIn(file, [\"content\"], contentOldFile)\n  if (isEmpty(file.fileName) || file.fileName === \"unnamed\")\n    file = setIn(file, [\"fileName\"], json.fileName)\n  return file\n}\n","// @flow weak\nimport React, { useState, useEffect, useRef, useCallback } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport DataTable from \"react-data-table-component\"\nimport Radio from \"@material-ui/core/Radio\"\nimport FormControl from \"@material-ui/core/FormControl\"\nimport FormLabel from \"@material-ui/core/FormLabel\"\nimport RadioGroup from \"@material-ui/core/RadioGroup\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\"\nimport { Storage } from \"aws-amplify\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { useLocalStorage } from \"react-use\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport StorageIcon from \"@material-ui/icons/Storage\"\nimport Button from \"@material-ui/core/Button\"\nimport GetAnnotationFromAFolderAWS from \"./get-annotation-from-aws\"\nimport GetImageFromAFolderAWS from \"./get-images-from-aws\"\nimport setButtonNameAddSample from \"./set-button-add-sample-name\"\nimport * as datasetHelper from \"../../utils//dataset-helper\"\nimport setTypeOfFileToLoadAndDisable from \"./set-type-of-file-to-load-and-disable\"\nimport initConfigImport from \"./init-config-import\"\nimport setAnnotationFromAws from \"./set-annotation-from-aws\"\nimport useAuth from \"../../utils/auth-handlers/use-auth.js\"\n\nconst selectedStyle = { color: \"DodgerBlue\" }\nconst tableStyle = {\n  marginLeft: \"auto\",\n  marginRight: \"auto\",\n  width: \"100%\",\n}\nconst expandedDataColumns = [\n  { name: \"Data\", selector: \"data\", sortable: true },\n  { name: \"Last Modified\", selector: \"lastModified\", sortable: true },\n]\n\nconst expandedAnnotationsColumns = [\n  { name: \"Annotations\", selector: \"annotation\" },\n  { name: \"Last Modified\", selector: \"lastModified\", sortable: true },\n]\n\nconst columns = [{ name: \"Projects\", selector: \"folder\", sortable: true }]\n\nconst customStyles = {\n  headCells: {\n    style: {\n      paddingLeft: \"10px\",\n      \"font-weight\": \"bold\",\n    },\n  },\n  cells: {\n    style: {\n      paddingLeft: \"25px\",\n    },\n  },\n}\n\nconst ExpandedRow = ({ data }) => {\n  const { rowData, rowAnnotations } = data\n  return (\n    <>\n      <DataTable\n        style={{\n          boxSizing: \"border-box\",\n          paddingLeft: \"50px\",\n          paddingRight: \"10px\",\n        }}\n        dense\n        striped\n        noHeader\n        columns={expandedAnnotationsColumns}\n        data={rowAnnotations}\n        noDataComponent='Make sure the project has \"annotations\" folder'\n        pagination={rowData.length > 10}\n        paginationPerPage={10}\n        paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n        customStyles={customStyles}\n      />\n      <DataTable\n        style={{\n          boxSizing: \"border-box\",\n          paddingLeft: \"50px\",\n          paddingRight: \"10px\",\n        }}\n        dense\n        striped\n        noHeader\n        columns={expandedDataColumns}\n        data={rowData}\n        noDataComponent={'Make sure the project has \"data\" folder'}\n        pagination={rowData.length > 10}\n        paginationPerPage={10}\n        paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n        customStyles={customStyles}\n      />\n    </>\n  )\n}\n\nexport default ({ file, open, onClose, onAddSamples, onChangeFile }) => {\n  const { authProvider, user, authConfig } = useAuth()\n  const [textButtonAdd, changetextButtonAdd] = useState(\"Add Samples\")\n  const [s3Content, changeS3Content] = useState(null)\n  const [dataForTable, changeDataForTable] = useState(null)\n  const [folderToFetch, setFolderToFetch] = useState(\"\")\n\n  const [configImport, setConfigImport] = useLocalStorage(\n    \"configImport\",\n    initConfigImport(file)\n  )\n  const lastObjectRef = useRef({})\n  const hasProjectStarted = useCallback(() => {\n    if (authProvider !== \"cognito\") return\n    if (\n      isEmpty(file) ||\n      isEmpty(file.content) ||\n      (isEmpty(file.content.interface) && isEmpty(file.content.samples))\n    )\n      return false\n    return true\n  }, [file, authProvider])\n\n  useEffect(() => {\n    if (authProvider !== \"cognito\") return\n    if (file === lastObjectRef.current) return\n    var configToSet = configImport\n    var changes = datasetHelper.fileHasChanged(lastObjectRef.current, file)\n    if (changes.content.interface.type || changes.content.samples) {\n      if (lastObjectRef.current !== {})\n        configToSet = setTypeOfFileToLoadAndDisable(configToSet, file)\n    }\n    setConfigImport({\n      ...configToSet,\n      projectStarted: hasProjectStarted(),\n      loadProjectIsSelected: hasProjectStarted()\n        ? false\n        : setConfigImport.loadProjectIsSelected,\n    })\n    lastObjectRef.current = file\n  }, [file, configImport, setConfigImport, hasProjectStarted, authProvider])\n\n  const handleAddSample = async () => {\n    var samples = await GetImageFromAFolderAWS(\n      s3Content,\n      folderToFetch,\n      configImport,\n      authConfig\n    )\n    var json = null\n    if (configImport.loadProjectIsSelected) {\n      json = await GetAnnotationFromAFolderAWS(\n        s3Content,\n        samples,\n        folderToFetch,\n        authConfig\n      )\n    }\n\n    if (\n      isEmpty(json) ||\n      isEmpty(json.content) ||\n      isEmpty(json.content.samples) ||\n      isEmpty(json.fileName)\n    ) {\n      onAddSamples(samples)\n    } else {\n      file = setAnnotationFromAws(file, json, configImport)\n      onChangeFile(file, true)\n      onAddSamples([])\n    }\n  }\n\n  const handleRowSelected = (whatsChanging) => {\n    if (!isEmpty(whatsChanging.selectedRows[0])) {\n      setFolderToFetch(whatsChanging.selectedRows[0].folder)\n      changeDataForTable((prevState) =>\n        prevState.map((row) => {\n          if (whatsChanging.selectedRows[0].id === row.id) {\n            row.isSelected = true\n          } else {\n            row.isSelected = false\n          }\n          return row\n        })\n      )\n    } else {\n      setFolderToFetch(null)\n      changeDataForTable((prevState) =>\n        prevState.map((row) => {\n          row.isSelected = false\n          return row\n        })\n      )\n    }\n  }\n  function changeLoadProjectIsSelected() {\n    setConfigImport({\n      ...configImport,\n      loadProjectIsSelected: !configImport.loadProjectIsSelected,\n    })\n  }\n\n  useEffect(() => {\n    var textToSet = setButtonNameAddSample(\n      configImport.loadProjectIsSelected,\n      configImport.typeOfFileToLoad,\n      dataForTable\n    )\n    changetextButtonAdd(textToSet)\n  }, [\n    configImport.loadProjectIsSelected,\n    configImport.typeOfFileToLoad,\n    dataForTable,\n  ])\n\n  useEffect(() => {\n    if (isEmpty(user)) {\n      changeS3Content(null)\n    } else if (!isEmpty(authConfig)) {\n      Storage.list(\"\", { level: \"private\" })\n        .then((result) => {\n          changeS3Content(result)\n          let _dataForTable = result\n            .filter((obj) => {\n              return obj.key.endsWith(\"/\") & (obj.key.split(\"/\").length === 2)\n            })\n            .map((obj, index) => {\n              const folder = obj.key.split(\"/\")[0]\n              const rowDataContent = result\n                .filter((obj) => {\n                  return (\n                    obj.key.startsWith(`${folder}/data/`) &\n                    !obj.key.endsWith(\"/\")\n                  )\n                })\n                .map((obj) => {\n                  return {\n                    data: obj.key.split(\"/data/\")[1],\n                    lastModified: obj.lastModified.toDateString(),\n                  }\n                })\n              const rowAnnotationsContent = result\n                .filter((obj) => {\n                  return (\n                    obj.key.startsWith(`${folder}/annotations/`) &\n                    !obj.key.endsWith(\"/\")\n                  )\n                })\n                .map((obj) => {\n                  return {\n                    annotation: obj.key.split(\"/annotations/\")[1],\n                    lastModified: obj.lastModified.toDateString(),\n                  }\n                })\n              return {\n                id: `${index}`,\n                folder: folder,\n                rowData: rowDataContent,\n                rowAnnotations: rowAnnotationsContent,\n                isSelected: true,\n              }\n            })\n          changeDataForTable(_dataForTable)\n        })\n        .catch((err) => console.log(err))\n    }\n  }, [user, authConfig])\n  return (\n    <SimpleDialog\n      title=\"Select Project\"\n      open={open}\n      onClose={onClose}\n      actions={[\n        {\n          text: textButtonAdd,\n          onClick: () => {\n            handleAddSample()\n          },\n          disabled: configImport.contentDialogBoxIsSetting,\n        },\n      ]}\n    >\n      <table style={tableStyle}>\n        <tbody>\n          <tr>\n            <th>\n              {configImport.loadProjectIsSelected ? (\n                <Button\n                  style={selectedStyle}\n                  onClick={changeLoadProjectIsSelected}\n                  disabled\n                >\n                  Load Project\n                </Button>\n              ) : (\n                <Button\n                  onClick={changeLoadProjectIsSelected}\n                  disabled={configImport.projectStarted}\n                >\n                  Load Project\n                </Button>\n              )}\n              {configImport.loadProjectIsSelected ? (\n                <Button onClick={changeLoadProjectIsSelected}>\n                  Load Samples\n                </Button>\n              ) : (\n                <Button\n                  style={selectedStyle}\n                  onClick={changeLoadProjectIsSelected}\n                  disabled\n                >\n                  Load Samples\n                </Button>\n              )}\n              <IconButton\n                onClick={() => {\n                  setConfigImport({\n                    ...configImport,\n                    contentDialogBoxIsSetting: !configImport.contentDialogBoxIsSetting,\n                  })\n                }}\n              >\n                {configImport.contentDialogBoxIsSetting ? (\n                  <StorageIcon></StorageIcon>\n                ) : (\n                  <SettingsIcon></SettingsIcon>\n                )}\n              </IconButton>\n            </th>\n          </tr>\n\n          {!configImport.contentDialogBoxIsSetting ? (\n            !isEmpty(dataForTable) && (\n              <tr>\n                <th>\n                  <DataTable\n                    expandableRows\n                    expandableRowsComponent={<ExpandedRow />}\n                    selectableRows\n                    selectableRowsHighlight\n                    selectableRowsNoSelectAll\n                    selectableRowsComponent={Radio}\n                    dense\n                    noHeader\n                    noTableHead\n                    columns={columns}\n                    onSelectedRowsChange={handleRowSelected}\n                    selectableRowSelected={(row) => row.isSelected}\n                    data={dataForTable}\n                    pagination={dataForTable.length > 10}\n                    paginationPerPage={10}\n                    paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n                  />\n                </th>\n              </tr>\n            )\n          ) : (\n            <tr>\n              <th>\n                {configImport.loadProjectIsSelected ? (\n                  <FormControl component=\"fieldset\">\n                    <FormLabel component=\"legend\">\n                      Annotation processing\n                    </FormLabel>\n                    <RadioGroup\n                      aria-label=\"option1\"\n                      onChange={(event) => {\n                        setConfigImport({\n                          ...configImport,\n                          annotationToKeep: event.target.value,\n                        })\n                      }}\n                    >\n                      <FormControlLabel\n                        value=\"both\"\n                        control={<Radio />}\n                        label=\"Keep both annotations\"\n                        checked={configImport.annotationToKeep === \"both\"}\n                      />\n                      <FormControlLabel\n                        value=\"incoming\"\n                        control={<Radio />}\n                        label=\"Keep incoming annotations\"\n                        checked={configImport.annotationToKeep === \"incoming\"}\n                      />\n                      <FormControlLabel\n                        value=\"current\"\n                        control={<Radio />}\n                        label=\"Keep current annotations\"\n                        checked={configImport.annotationToKeep === \"current\"}\n                      />\n                    </RadioGroup>\n                  </FormControl>\n                ) : (\n                  <FormControl component=\"fieldset\">\n                    <FormLabel component=\"legend\">Choose file type</FormLabel>\n                    <RadioGroup\n                      aria-label=\"option2\"\n                      onChange={(event) => {\n                        setConfigImport({\n                          ...configImport,\n                          typeOfFileToLoad: event.target.value,\n                        })\n                      }}\n                    >\n                      <FormControlLabel\n                        value=\"Image\"\n                        control={<Radio />}\n                        label=\"Load image file\"\n                        disabled={configImport.typeOfFileToDisable.Image}\n                        checked={configImport.typeOfFileToLoad === \"Image\"}\n                      />\n                      <FormControlLabel\n                        value=\"Video\"\n                        control={<Radio />}\n                        label=\"Load video file\"\n                        disabled={configImport.typeOfFileToDisable.Video}\n                        checked={configImport.typeOfFileToLoad === \"Video\"}\n                      />\n                      <FormControlLabel\n                        value=\"Audio\"\n                        control={<Radio />}\n                        label=\"Load audio file\"\n                        disabled={configImport.typeOfFileToDisable.Audio}\n                        checked={configImport.typeOfFileToLoad === \"Audio\"}\n                      />\n                      <FormControlLabel\n                        value=\"PDF\"\n                        control={<Radio />}\n                        label=\"Load PDF file\"\n                        disabled={configImport.typeOfFileToDisable.PDF}\n                        checked={configImport.typeOfFileToLoad === \"PDF\"}\n                      />\n                      <FormControlLabel\n                        value=\"Texte\"\n                        control={<Radio />}\n                        label=\"Load texte file\"\n                        disabled={configImport.typeOfFileToDisable.Texte}\n                        checked={configImport.typeOfFileToLoad === \"Texte\"}\n                      />\n                    </RadioGroup>\n                  </FormControl>\n                )}\n              </th>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </SimpleDialog>\n  )\n}\n","import checkInterfaceAndsamples from \"./check-interface-and-sample-type\"\nexport default (file) => {\n  return {\n    annotationToKeep: \"both\",\n    typeOfFileToLoad: checkInterfaceAndsamples([\"Image\", \"Empty\"], file)\n      ? \"Image\"\n      : checkInterfaceAndsamples([\"Video\", \"Empty\"], file)\n      ? \"Video\"\n      : checkInterfaceAndsamples([\"Audio\", \"Empty\"], file)\n      ? \"Audio\"\n      : checkInterfaceAndsamples([\"PDF\", \"Empty\"], file)\n      ? \"PDF\"\n      : checkInterfaceAndsamples([\"Texte\", \"Empty\"], file)\n      ? \"Texte\"\n      : \"None\",\n    typeOfFileToDisable: {\n      Image: checkInterfaceAndsamples([\"Image\", \"Empty\"], file) ? false : true,\n      Video: checkInterfaceAndsamples([\"Video\", \"Empty\"], file) ? false : true,\n      Audio: checkInterfaceAndsamples([\"Audio\", \"Empty\"], file) ? false : true,\n      PDF: checkInterfaceAndsamples([\"PDF\", \"Empty\"], file) ? false : true,\n      Texte: checkInterfaceAndsamples([\"Texte\", \"Empty\"], file) ? false : true,\n    },\n    loadProjectIsSelected: true,\n    contentDialogBoxIsSetting: false,\n    projectStarted: false,\n  }\n}\n","import isEmpty from \"lodash/isEmpty\"\nimport checkInterfaceAndsamples from \"./check-interface-and-sample-type\"\nexport default (configImport, file) => {\n  return {\n    ...configImport,\n    typeOfFileToLoad:\n      !isEmpty(configImport) &&\n      !isEmpty(configImport.typeOfFileToLoad) &&\n      checkInterfaceAndsamples([configImport.typeOfFileToLoad, \"Empty\"], file)\n        ? configImport.typeOfFileToLoad\n        : checkInterfaceAndsamples([\"Image\", \"Empty\"], file)\n        ? \"Image\"\n        : checkInterfaceAndsamples([\"Video\", \"Empty\"], file)\n        ? \"Video\"\n        : checkInterfaceAndsamples([\"Audio\", \"Empty\"], file)\n        ? \"Audio\"\n        : checkInterfaceAndsamples([\"PDF\", \"Empty\"], file)\n        ? \"PDF\"\n        : checkInterfaceAndsamples([\"Texte\", \"Empty\"], file)\n        ? \"Texte\"\n        : \"None\",\n    typeOfFileToDisable: {\n      Image: checkInterfaceAndsamples([\"Image\", \"Empty\"], file) ? false : true,\n      Video: checkInterfaceAndsamples([\"Video\", \"Empty\"], file) ? false : true,\n      Audio: checkInterfaceAndsamples([\"Audio\", \"Empty\"], file) ? false : true,\n      PDF: checkInterfaceAndsamples([\"PDF\", \"Empty\"], file) ? false : true,\n      Texte: checkInterfaceAndsamples([\"Texte\", \"Empty\"], file) ? false : true,\n    },\n  }\n}\n","import RecognizeFileExtension from \"../../utils/RecognizeFileExtension\"\nimport isEmpty from \"lodash/isEmpty\"\nexport default (loadProjectIsSelected, typeOfFileToLoad, dataForTable) => {\n  var numberOfSamples = 0\n  var textToSet = \"\"\n  var folderName\n  if (!isEmpty(dataForTable)) {\n    for (var i = 0; i < dataForTable.length; i++) {\n      if (dataForTable[i].isSelected) {\n        folderName = dataForTable[i].folder\n        if (!isEmpty(dataForTable[i].rowData)) {\n          for (var y = 0; y < dataForTable[i].rowData.length; y++) {\n            if (\n              RecognizeFileExtension(dataForTable[i].rowData[y].data) ===\n              typeOfFileToLoad\n            ) {\n              numberOfSamples++\n            }\n          }\n        }\n      }\n    }\n    if (loadProjectIsSelected) {\n      textToSet = \"Load \" + folderName\n    } else {\n      textToSet = \"Add \" + numberOfSamples + \" \" + typeOfFileToLoad\n    }\n  }\n  return textToSet\n}\n","import React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nexport default (props) => {\n  return (\n    <SvgIcon {...props} viewBox=\"0 0 50 50\">\n      <g id=\"Working\">\n        <path\n          style={props.color}\n          d=\"M21.17,42.88H13.76a1,1,0,0,1-1-1v-7.5a1,1,0,0,1,1-1h7.41a1,1,0,0,1,1,1v7.5A1,1,0,0,1,21.17,42.88Zm-6.41-2h5.41v-5.5H14.76Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M31,39.17a5.24,5.24,0,1,1,5.22-5.24A5.23,5.23,0,0,1,31,39.17Zm0-8.48a3.24,3.24,0,1,0,3.22,3.24A3.23,3.23,0,0,0,31,30.69Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M20.22,29.75H10.85a1,1,0,0,1-.87-.51,1,1,0,0,1,0-1l4.69-7.82a1,1,0,0,1,1.71,0l4.69,7.82a1,1,0,0,1,0,1A1,1,0,0,1,20.22,29.75Zm-7.61-2h5.85l-2.92-4.87Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M23.67,48.5c-6.39,0-16.5-1.45-16.63-5.34L2.51,9.55a1,1,0,0,1,2-.39c.5,1.93,8.05,4.63,19.2,4.63s18.69-2.7,19.19-4.63a1,1,0,0,1,2,.39L40.29,43.16c0,1.32-1.22,2.45-3.51,3.36a22.87,22.87,0,0,1-3.12.94A46,46,0,0,1,23.67,48.5ZM4.9,12.27,9,43s0,.09,0,.13c0,1.18,5.69,3.42,14.63,3.42a43.75,43.75,0,0,0,9.54-1A21,21,0,0,0,36,44.66c1.85-.73,2.26-1.39,2.26-1.58V43l4.14-30.68c-3.86,2.3-11.64,3.52-18.77,3.52S8.75,14.57,4.9,12.27Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M23.67,15.79c-9.47,0-20.1-2.15-21.14-6.12,0-.05,0-.09,0-.13l0-.41a.62.62,0,0,1,0-.13c0-4.42,11.18-7.5,21.22-7.5S44.88,4.58,44.88,9v.13l-.06.41a.69.69,0,0,1,0,.13C43.76,13.64,33.13,15.79,23.67,15.79ZM4.48,9.21c.62,1.93,8.14,4.58,19.19,4.58s18.56-2.65,19.18-4.58l0-.27C42.75,7,34.86,3.5,23.67,3.5S4.59,7,4.45,8.94Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M44.93,29.62c-4.76,0-15.18-4.71-21.7-7.91l.88-1.8c9,4.42,19.6,8.52,21.41,7.75-.14-.29-.81-1.19-4-2.92l-.16-.1,1-1.74.15.09c3.21,1.77,4.74,3.13,5,4.41a1.82,1.82,0,0,1-.4,1.52A2.77,2.77,0,0,1,44.93,29.62Z\"\n        />\n        <path\n          style={props.color}\n          d=\"M23.67,23a2.17,2.17,0,1,1,2.17-2.17A2.18,2.18,0,0,1,23.67,23Zm0-2.34a.17.17,0,0,0-.18.17c0,.19.35.19.35,0A.17.17,0,0,0,23.67,20.64Z\"\n        />\n      </g>\n    </SvgIcon>\n  )\n}\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Box from \"@material-ui/core/Box\"\nimport Button from \"@material-ui/core/Button\"\nimport BucketIcon from \"../ImportPage/S3Icon\"\nimport DirectoryIcon from \"@material-ui/icons/FolderOpen\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport BackIcon from \"@material-ui/icons/KeyboardArrowUp\"\nimport IconButton from \"@material-ui/core/IconButton\"\n\nconst Container = styled(Box)({})\nconst Items = styled(Box)({ height: 300, width: 400, overflowY: \"scroll\" })\nconst Path = styled(Box)({\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n})\nconst Item = styled(Button)({ width: \"100%\" })\n\nexport const S3BucketSelector = ({\n  currentPath,\n  options,\n  canCreateNew,\n  onChangePath,\n  showFiles = true,\n}) => {\n  return (\n    <Container>\n      <Path display=\"flex\" alignItems=\"center\">\n        <IconButton\n          disabled={!currentPath}\n          onClick={() => {\n            const newPath = currentPath.split(\"/\").slice(0, -2).join(\"/\") + \"/\"\n            if (newPath === \"s3://\") {\n              onChangePath(\"\")\n            } else {\n              onChangePath(newPath)\n            }\n          }}\n        >\n          <BackIcon />\n        </IconButton>\n        <Box>{currentPath}</Box>\n      </Path>\n      <Items>\n        {options\n          .filter((option) => (option.type === \"file\" ? showFiles : true))\n          .map((option, i) => (\n            <Item\n              key={i}\n              onClick={() => {\n                if (option.type === \"file\") {\n                  onChangePath(currentPath + option.name)\n                } else {\n                  if (!currentPath) {\n                    onChangePath(`s3://${option.name}/`)\n                  } else {\n                    onChangePath(`${currentPath}${option.name}`)\n                  }\n                }\n              }}\n            >\n              {option.type === \"bucket\" ? (\n                <BucketIcon className=\"icon\" />\n              ) : option.type === \"directory\" ? (\n                <DirectoryIcon className=\"icon\" />\n              ) : (\n                <FileIcon className=\"icon\" />\n              )}\n              <Box\n                flexGrow={1}\n                className=\"text\"\n                textAlign=\"left\"\n                paddingLeft={1}\n              >\n                {option.name}\n              </Box>\n            </Item>\n          ))}\n        {currentPath !== \"\" && canCreateNew && (\n          <Item\n            key=\"create-new\"\n            onClick={() => {\n              // TODO switch to MUI dialog\n              const newDirectory = window.prompt(\n                \"Enter the name of new directory\"\n              )\n              if (newDirectory) {\n                onChangePath(currentPath + newDirectory + \"/\")\n              }\n            }}\n          >\n            <DirectoryIcon className=\"icon\" />\n            <Box flexGrow={1} className=\"text\" textAlign=\"left\" paddingLeft={1}>\n              Create New\n            </Box>\n          </Item>\n        )}\n      </Items>\n    </Container>\n  )\n}\n\nexport default S3BucketSelector\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return Boolean(window.require(\"electron\"))\n  }\n  return false\n}\n","import { useMemo } from \"react\"\nimport { useAppConfig } from \"../../components/AppConfig\"\nimport xmlParser from \"fast-xml-parser\"\nimport useIsDesktop from \"../use-is-desktop\"\nimport { AwsClient } from \"aws4fetch\"\n\nfunction parseS3URI(s3Path) {\n  const bucket = s3Path.match(/s3:\\/\\/([^/]+)/)[1]\n  const path = s3Path.replace(/s3:\\/\\/[^/]+\\//, \"\")\n  return { bucket, path }\n}\n\nexport default () => {\n  const { appConfig } = useAppConfig()\n  const isDesktop = useIsDesktop()\n  let {\n    \"auth.s3iam.access_key_id\": accessKeyId,\n    \"auth.s3iam.secret_access_key\": secretAccessKey,\n    \"auth.s3iam.region\": region,\n    \"auth.proxy.corsproxy\": corsProxy,\n  } = appConfig\n  if (isDesktop) {\n    corsProxy = \"{URL}\"\n  }\n  // TODO if electron don't use CORS proxy\n\n  const awsClient = useMemo(\n    () =>\n      accessKeyId\n        ? new AwsClient({ accessKeyId, secretAccessKey, region, service: \"s3\" })\n        : null,\n    // eslint-disable-next-line\n    []\n  )\n\n  const fetchS3 = async (url, opts = {}) => {\n    const request = await awsClient.sign(url, opts)\n    const corsProxyRequest = new Request(\n      corsProxy.replace(\"{URL}\", encodeURIComponent(request.url)),\n      {\n        headers: request.headers,\n        method: request.method,\n        body: opts.body,\n      }\n    )\n    const response = await fetch(corsProxyRequest).then((r) => r.text())\n    return xmlParser.parse(response)\n  }\n\n  if (!accessKeyId) return {}\n\n  return useMemo(\n    () => ({\n      parseS3URI,\n      listBuckets: () => fetchS3(\"https://s3.amazonaws.com\"),\n      listBucketItemsAt: (s3Path, opts = {}) => {\n        const { bucket, path } = parseS3URI(s3Path)\n        return fetchS3(\n          `https://s3.${region}.amazonaws.com/${bucket}?list-type=2&delimiter=/&prefix=${path}`,\n          {\n            headers: { Host: bucket },\n          }\n        )\n      },\n      putBucketItem: async (s3Path, file) => {\n        const { bucket, path } = parseS3URI(s3Path)\n        const res = await fetchS3(\n          `https://s3.${region}.amazonaws.com/${bucket}/${path}`,\n          {\n            method: \"PUT\",\n            headers: {\n              Host: `s3.amazonaws.com/${bucket}`,\n              \"Content-Type\": file.type,\n              \"x-amz-acl\": \"public-read\",\n            },\n            body: file,\n          }\n        )\n        if (res.Error) {\n          throw new Error(`${res.Error.Code}: ${res.Error.Message}`)\n        }\n        return res\n      },\n    }),\n    // eslint-disable-next-line\n    [awsClient]\n  )\n}\n","import JAC from \"jac-format\"\n\nconst alternativeSpellings = {\n  imageUrl: [\n    \"image_url\",\n    \"image_urls\",\n    \"image\",\n    \"image_src\",\n    \"img_url\",\n    \"img\",\n    \"img_src\",\n  ],\n  document: [\"text\"],\n}\nconst badSpellingMap = {}\nfor (const [correct, badSpellings] of Object.entries(alternativeSpellings)) {\n  for (const badSpelling of badSpellings) {\n    badSpellingMap[badSpelling] = correct\n  }\n}\n\nconst convertTaskDatumMistakes = (sample) => {\n  for (const key in sample) {\n    const normalizedKey = key.toLowerCase().replace(/ /g, \"_\")\n    const correction = badSpellingMap[normalizedKey]\n    if (correction) {\n      sample[correction] = sample[key]\n      delete sample[key]\n    }\n  }\n  return sample\n}\n\nexport default (csv) => {\n  const json = JAC.fromCSV(csv, { derivePath: () => \"samples.*\" })\n  if (!json.samples) throw new Error(\"No samples\")\n  return {\n    interface: json.interface,\n    taskOutput: json.samples.map((sample) => sample.output),\n    samples: json.samples.map(convertTaskDatumMistakes).map((sample) => {\n      delete sample.output\n      return sample\n    }),\n  }\n}\n","import React, { useState, useEffect } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport S3PathSelector from \"../S3PathSelector\"\nimport getSampleFromUrl from \"../PasteUrlsDialog/get-sample-from-url.js\"\n// import { useAppConfig } from \"../AppConfig\"\nimport useIAMS3API from \"../../utils/auth-handlers/use-iam-s3-api\"\n\nexport const ImportFromS3Dialog = ({ open, onClose, onAddSamples }) => {\n  const { listBuckets, listBucketItemsAt } = useIAMS3API()\n  const [s3Path, setS3Path] = useState(\"\")\n  const [{ options, optionsLoading }, setOptions] = useState({\n    optionsLoading: true,\n  })\n  useEffect(() => {\n    if (!open) return\n    if (!listBuckets) return\n    async function loadS3Path() {\n      if (s3Path === \"\") {\n        setOptions({\n          optionsLoading: false,\n          options: (\n            await listBuckets()\n          ).ListAllMyBucketsResult.Buckets.Bucket.map((b) => ({\n            name: b.Name,\n            type: \"bucket\",\n          })),\n        })\n      } else {\n        setOptions({\n          optionsLoading: false,\n          options: (\n            (await listBucketItemsAt(s3Path)).ListBucketResult.CommonPrefixes ||\n            []\n          ).map((a) => ({\n            name: a.Prefix.split(\"/\").slice(-2).join(\"/\"),\n            type: \"directory\",\n          })),\n        })\n      }\n    }\n    loadS3Path()\n    // eslint-disable-next-line\n  }, [s3Path, listBuckets, listBucketItemsAt, open])\n  if (!open) return null\n  return (\n    <SimpleDialog\n      onClose={onClose}\n      open={open}\n      title=\"Import from S3\"\n      actions={[\n        {\n          onClick: async () => {\n            const bucket = s3Path.match(/s3:\\/\\/([^/]+)/)[1]\n\n            // TODO support more than 1000 file import by using\n            // continuation-token on S3\n            const items = (\n              await listBucketItemsAt(s3Path, { files: true })\n            ).ListBucketResult.Contents.filter(\n              (item) => !item.Key.endsWith(\"/\")\n            )\n              .map((item) => `https://s3.amazonaws.com/${bucket}/${item.Key}`)\n              .map((url) => getSampleFromUrl(url, { returnNulls: true }))\n              .filter(Boolean)\n            onAddSamples(items)\n          },\n          disabled: !s3Path,\n          text: \"Import All Files in Directory\",\n        },\n      ]}\n    >\n      {optionsLoading ? (\n        <Box height={300} width={400} paddingTop={4} textAlign=\"center\">\n          <CircularProgress size={100} />\n        </Box>\n      ) : (\n        <S3PathSelector\n          currentPath={s3Path}\n          options={options || []}\n          onChangePath={(newS3Path) => {\n            setS3Path(newS3Path)\n            setOptions({ optionsLoading: true })\n          }}\n        />\n      )}\n    </SimpleDialog>\n  )\n}\n\nexport default ImportFromS3Dialog\n","import React, { useCallback, useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Box from \"@material-ui/core/Box\"\nimport { useDropzone } from \"react-dropzone\"\n\nconst Container = styled(Box)({\n  width: 400,\n  height: 200,\n  padding: 20,\n  border: `2px dotted ${colors.grey[400]}`,\n  textAlign: \"center\",\n  fontSize: 24,\n})\n\nconst FileCounter = styled(Box)({\n  fontSize: 24,\n  color: colors.grey[700],\n  fontWeight: \"bold\",\n})\n\n/*\n  This component allows you to upload multiple files, then reads the files in\n  serial. It's perfect for an uploading process where you don't want to upload one\n  file at a time. It gives a progress bar indicating upload progres.\n*/\n\nexport const MultiFileDrop = ({ loadFile, onComplete }) => {\n  const [totalUploaded, setTotalUploaded] = useState(0)\n  const [errors, setErrors] = useState([])\n  const [{ totalFiles, filesSelected }, setUploadStartState] = useState({\n    filesSelected: false,\n  })\n  const onDrop = useCallback(async (acceptedFiles) => {\n    setUploadStartState({\n      totalFiles: acceptedFiles.length,\n      filesSelected: true,\n    })\n    const errors = []\n    for (const [index, file] of acceptedFiles.entries()) {\n      await loadFile(file).catch((err) => {\n        errors.push(err.toString())\n        setErrors(errors)\n      })\n      setTotalUploaded(index + 1)\n    }\n    onComplete()\n    // eslint-disable-next-line\n  }, [])\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  if (!filesSelected) {\n    return (\n      <Container {...getRootProps()}>\n        <input {...getInputProps()} />\n        {isDragActive ? (\n          <p>Drop the files here ...</p>\n        ) : (\n          <p>Drag 'n' drop some files here, or click to select files</p>\n        )}\n      </Container>\n    )\n  }\n\n  return (\n    <Container>\n      <FileCounter>\n        {totalUploaded} / {totalFiles} Files Processed\n      </FileCounter>\n      {/* TODO progress bar */}\n      <Box\n        maxHeight={100}\n        overflowY=\"auto\"\n        textAlign=\"left\"\n        color=\"red\"\n        fontSize={12}\n      >\n        {errors.map((err, i) => (\n          <div key={i}>{err}</div>\n        ))}\n      </Box>\n    </Container>\n  )\n}\n\nexport default MultiFileDrop\n","import React, { useState, useEffect, useRef } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport S3PathSelector from \"../S3PathSelector\"\nimport getSampleFromUrl from \"../PasteUrlsDialog/get-sample-from-url.js\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport BackIcon from \"@material-ui/icons/KeyboardArrowLeft\"\n// import { useAppConfig } from \"../AppConfig\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport useIAMS3API from \"../../utils/auth-handlers/use-iam-s3-api\"\nimport MultiFileDrop from \"../MultiFileDrop\"\nimport Stepper from \"@material-ui/core/Stepper\"\nimport Step from \"@material-ui/core/Step\"\nimport StepLabel from \"@material-ui/core/StepLabel\"\n\nconst SelectedPath = styled(\"div\")({\n  fontSize: 14,\n  color: colors.grey[700],\n  fontWeight: \"bold\",\n})\n\nexport const UploadToS3Dialog = ({ open, onClose, onAddSamples }) => {\n  const {\n    listBuckets,\n    listBucketItemsAt,\n    putBucketItem,\n    parseS3URI,\n  } = useIAMS3API()\n  const [complete, setComplete] = useState(false)\n  const uploadedPaths = useRef([])\n  const [s3Path, setS3Path] = useState(\"\")\n  const [activeStep, setActiveStep] = useState(0)\n  const [{ options, optionsLoading }, setOptions] = useState({\n    optionsLoading: true,\n  })\n  useEffect(() => {\n    if (!listBuckets) return\n    if (!open) return\n    async function loadS3Path() {\n      if (s3Path === \"\") {\n        setOptions({\n          optionsLoading: false,\n          options: (\n            await listBuckets()\n          ).ListAllMyBucketsResult.Buckets.Bucket.map((b) => ({\n            name: b.Name,\n            type: \"bucket\",\n          })),\n        })\n      } else {\n        setOptions({\n          optionsLoading: false,\n          options: (\n            (await listBucketItemsAt(s3Path)).ListBucketResult.CommonPrefixes ||\n            []\n          ).map((a) => ({\n            name: a.Prefix.split(\"/\").slice(-2).join(\"/\"),\n            type: \"directory\",\n          })),\n        })\n      }\n    }\n    loadS3Path()\n    // eslint-disable-next-line\n  }, [open, s3Path, listBuckets, listBucketItemsAt])\n  if (!open) return null\n  return (\n    <SimpleDialog\n      onClose={onClose}\n      open={open}\n      title=\"Upload to S3\"\n      actions={[\n        activeStep === 0 && {\n          onClick: () => setActiveStep(1),\n          disabled: !s3Path,\n          text: \"Upload to this directory\",\n        },\n        activeStep === 1 && {\n          disabled: !complete,\n          onClick: () => {\n            const samples = uploadedPaths.current\n              .map((url) => getSampleFromUrl(url, { returnNulls: true }))\n              .filter(Boolean)\n            onAddSamples(samples)\n          },\n          text: \"Add Samples\",\n        },\n      ].filter(Boolean)}\n    >\n      <Stepper activeStep={activeStep}>\n        <Step>\n          <StepLabel>Directory to Upload To</StepLabel>\n        </Step>\n        <Step>\n          <StepLabel>Upload Files</StepLabel>\n        </Step>\n      </Stepper>\n      {activeStep === 0 && (\n        <>\n          {optionsLoading ? (\n            <Box height={300} width={400} paddingTop={4} textAlign=\"center\">\n              <CircularProgress size={100} />\n            </Box>\n          ) : (\n            <S3PathSelector\n              currentPath={s3Path}\n              canCreateNew\n              options={options || []}\n              onChangePath={(newS3Path) => {\n                setS3Path(newS3Path)\n                setOptions({ optionsLoading: true })\n              }}\n            />\n          )}\n        </>\n      )}\n      {activeStep === 1 && (\n        <>\n          <Box display=\"flex\" alignItems=\"center\">\n            <IconButton onClick={() => setActiveStep(0)}>\n              <BackIcon />\n            </IconButton>\n            <SelectedPath>Uploading to: {s3Path}</SelectedPath>\n          </Box>\n          <Box>\n            <MultiFileDrop\n              loadFile={async (file) => {\n                const filePath = s3Path + file.name\n                await putBucketItem(filePath, file)\n                const { bucket, path } = parseS3URI(filePath)\n                uploadedPaths.current.push(\n                  `https://s3.amazonaws.com/${bucket}/${path}`\n                )\n              }}\n              onComplete={() => {\n                setComplete(true)\n              }}\n            />\n          </Box>\n        </>\n      )}\n    </SimpleDialog>\n  )\n}\n\nexport default UploadToS3Dialog\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\nimport { useDropzone } from \"react-dropzone\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\n\nconst UploadHover = styled(\"div\")({\n  fontSize: 24,\n  color: colors.grey[600],\n  textAlign: \"center\",\n  padding: 48,\n})\n\nconst emptyFunc = () => null\n\nexport default ({ content, onChangeContent, placeholder }) => {\n  const onDrop = useEventCallback((acceptedFiles) => {\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      const fileContent = e.target.result\n      onChangeContent(fileContent)\n    }\n    reader.readAsText(acceptedFiles[0])\n  })\n\n  const [lastClickTime, changeLastClickTime] = useState(0)\n  const onClick = useEventCallback((e) => {\n    if (Date.now() - lastClickTime < 400) {\n      getRootProps().onClick(e)\n    }\n    changeLastClickTime(Date.now())\n  })\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  return (\n    <div {...getRootProps()} onClick={emptyFunc}>\n      <input {...getInputProps()} />\n      {isDragActive ? (\n        <UploadHover>Drop the text or csv file here.</UploadHover>\n      ) : (\n        <TextArea\n          value={content}\n          onChange={(e, v) => onChangeContent(e.target.value)}\n          onClick={onClick}\n          placeholder={placeholder}\n        />\n      )}\n    </div>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\n\nconst ImportTextSnippetsDialog = ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Import Text Snippets\"\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            onAddSamples(\n              content\n                .split(\"\\n\")\n                .map((l) => l.trim())\n                .filter(Boolean)\n                .map((s) => ({ document: s }))\n            )\n          },\n        },\n      ]}\n    >\n      <TextAreaWithUpload\n        content={content}\n        onChangeContent={changeContent}\n        placeholder={\n          \"Paste Snippets here\\nOne snippet per line.\\n\\nYou can also drag a text or csv file here (double click to open file dialog)\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n\nexport default ImportTextSnippetsDialog\n","import React, { useState, useEffect, useCallback } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Button from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { useTranslation } from \"react-i18next\"\n\nconst ExplainText = styled(\"div\")({\n  marginTop: 8,\n  marginBottom: 8,\n})\nconst GoogleDriveScreenshot = styled(\"img\")({\n  width: \"100%\",\n  boxSizing: \"border-box\",\n})\n\n// Example for Google OAuth\n// https://developers.google.com/drive/api/v3/picker\n\nconst credentials = {\n  web: {\n    client_id:\n      process.env.REACT_APP_GOOGLE_DRIVE_CLIENT_ID ||\n      \"294393711342-h5aqqt3pvn8othepvsmi16iakdhi7m6j.apps.googleusercontent.com\",\n    app_id: process.env.REACT_APP_GOOGLE_DRIVE_APP_ID || \"294393711342\",\n    developer_key:\n      process.env.REACT_APP_GOOGLE_DRIVE_DEVELOPER_KEY ||\n      \"AIzaSyCoNoDnfzDBSXpt84Q75LU9UMTzvyLkRhg\",\n  },\n}\n\nconst scope = \"https://www.googleapis.com/auth/drive.readonly\"\n\nexport default ({ open, onClose, onAddSamples }) => {\n  const { t } = useTranslation()\n  const [googleScriptLoaded, setGoogleScriptLoaded] = useState(false)\n  const [pickerApiLoaded, setPickerApiLoaded] = useState(false)\n  const [oauthToken, setOAuthToken] = useState(null)\n  const [userSelectedItemsFromDrive, setUserSelectedItemsFromDrive] = useState(\n    []\n  )\n  const [isPickerOpen, setIsPickerOpen] = useState(false)\n\n  useEffect(() => {\n    const scriptElement = document.createElement(\"script\")\n    scriptElement.src = \"https://apis.google.com/js/api.js\"\n    scriptElement.async = true\n\n    scriptElement.onload = () => {\n      setGoogleScriptLoaded(true)\n    }\n\n    document.body.appendChild(scriptElement)\n    return () => {\n      scriptElement.remove()\n    }\n  }, [])\n\n  const googlePickerActionCallback = useCallback(\n    (data) => {\n      if (data.action === window.google.picker.Action.PICKED) {\n        setUserSelectedItemsFromDrive(\n          data.docs.map((googleDriveDocument) => ({\n            url: googleDriveDocument.url,\n            mimeType: googleDriveDocument.mimeType,\n            name: googleDriveDocument.name,\n            id: googleDriveDocument.id,\n          }))\n        )\n\n        setIsPickerOpen(false)\n      } else if (data.action === \"cancel\") {\n        onClose()\n      }\n    },\n    [onClose]\n  )\n\n  const createPicker = useCallback(() => {\n    if (pickerApiLoaded && oauthToken) {\n      const view = new window.google.picker.DocsView(\n        window.google.picker.ViewId.Docs,\n        window.google.picker.ViewId.FOLDERS\n      )\n        .setIncludeFolders(true)\n        .setSelectFolderEnabled(true)\n\n      const picker = new window.google.picker.PickerBuilder()\n        .enableFeature(window.google.picker.Feature.NAV_HIDDEN)\n        .enableFeature(window.google.picker.Feature.MINE_ONLY)\n        .enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED)\n        .setAppId(credentials.web.app_id)\n        .setOAuthToken(oauthToken)\n        .addView(view)\n        .addView(window.google.picker.ViewId.DOCS)\n        .setDeveloperKey(credentials.web.developer_key)\n        .setCallback(googlePickerActionCallback)\n        .build()\n      picker.setVisible(true)\n      setIsPickerOpen(true)\n    }\n  }, [googlePickerActionCallback, oauthToken, pickerApiLoaded])\n\n  useEffect(() => {\n    createPicker()\n  }, [pickerApiLoaded, oauthToken, createPicker])\n\n  const handleAuthenticationResponse = useCallback(\n    (authenticationResponse) => {\n      if (authenticationResponse && !authenticationResponse.error) {\n        setOAuthToken(authenticationResponse.access_token)\n        createPicker()\n      }\n    },\n    [createPicker]\n  )\n\n  const onAuthApiLoad = useCallback(() => {\n    window.gapi.auth.authorize(\n      {\n        client_id: credentials.web.client_id,\n        scope: scope,\n        immediate: false,\n      },\n      handleAuthenticationResponse\n    )\n  }, [handleAuthenticationResponse])\n\n  const onPickerApiLoad = useCallback(() => {\n    setPickerApiLoaded(true)\n    createPicker()\n  }, [createPicker])\n\n  const onLoadPicker = useCallback(() => {\n    if (googleScriptLoaded === true) {\n      window.gapi.load(\"auth\", { callback: onAuthApiLoad })\n      window.gapi.load(\"picker\", { callback: onPickerApiLoad })\n    }\n  }, [googleScriptLoaded, onAuthApiLoad, onPickerApiLoad])\n\n  const onAddSamplesClicked = () => {\n    const samples = []\n    for (const item of userSelectedItemsFromDrive) {\n      if (item.mimeType.includes(\"image/\")) {\n        samples.push({ imageUrl: `https://drive.google.com/uc?id=${item.id}` })\n      } else if (item.mimeType.includes(\"video/\")) {\n        samples.push({ videoUrl: `https://drive.google.com/uc?id=${item.id}` })\n      }\n    }\n\n    onAddSamples(samples)\n  }\n\n  useEffect(() => {\n    if (open) {\n      onLoadPicker()\n    }\n  }, [open, googleScriptLoaded, onLoadPicker])\n\n  return (\n    <SimpleDialog\n      open={open && !isPickerOpen}\n      onClose={onClose}\n      title=\"Import from Google Drive\"\n      actions={[\n        userSelectedItemsFromDrive &&\n          userSelectedItemsFromDrive.length > 0 && {\n            text: `Add ${userSelectedItemsFromDrive.length} Samples`,\n            onClick: onAddSamplesClicked,\n          },\n      ].filter(Boolean)}\n    >\n      <Button variant=\"outlined\" onClick={onLoadPicker}>\n        {t(\"reopen-google-drive-picker\")}\n      </Button>\n      <ExplainText>\n        {t(\"import-from-google-drive-explanation-text\")}.{\" \"}\n        <b>{t(\"import-from-google-drive-explanation-bold-text\")}!</b>\n      </ExplainText>\n      <GoogleDriveScreenshot\n        src={\n          \"https://s3.amazonaws.com/asset.workaround.online/google-share-screenshot.png\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\nimport * as colors from \"@material-ui/core/colors\"\nimport fromUDTCSV from \"../../utils/from-udt-csv.js\"\n\nconst InfoText = styled(\"div\")({\n  fontFamily: \"Inter\",\n  marginBottom: 20,\n  \"& a\": {\n    color: colors.blue[500],\n  },\n})\n\nconst Error = styled(\"div\")({\n  color: colors.red[500],\n  whiteSpace: \"pre-wrap\",\n  marginBottom: 20,\n})\n\nconst ImportUDTFileDialog = ({ open, onClose, onAddSamples }) => {\n  const [error, changeError] = useState(null)\n  const [content, setContent] = useState(\"\")\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Import JSON/CSV Samples\"\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            changeError(null)\n            let samples, taskOutput\n            try {\n              ;[samples, taskOutput] = JSON.parse(content).samples\n            } catch (e1) {\n              try {\n                const udt = fromUDTCSV(content)\n                ;({ samples, taskOutput } = udt)\n              } catch (e2) {\n                console.log({\n                  message: \"CSV/JSON Error Stacks\",\n                  jsonError: e1.stack,\n                  csvError: e2.stack,\n                })\n                changeError(\n                  `JSON did not parse. CSV did not parse.\\n\\nJSON Error: ${e1.toString()}\\nCSV Error: ${e2.toString()}`\n                )\n                return\n              }\n            }\n            if (!samples || samples.length === 0) {\n              changeError(\"No task data found\")\n              return\n            }\n            onAddSamples(samples, taskOutput)\n          },\n        },\n      ]}\n    >\n      <InfoText>\n        See the{\" \"}\n        <a href=\"https://github.com/UniversalDataTool/udt-format\">\n          UDT JSON format\n        </a>{\" \"}\n        or the{\" \"}\n        <a href=\"https://github.com/UniversalDataTool/udt-format\">\n          UDT CSV format\n        </a>{\" \"}\n        for formatting details. Or take a look at a{\" \"}\n        <a href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.json\">\n          sample JSON\n        </a>{\" \"}\n        or{\" \"}\n        <a href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.csv\">\n          sample CSV\n        </a>{\" \"}\n        file.\n      </InfoText>\n      <Error>{error}</Error>\n      <TextAreaWithUpload\n        content={content}\n        onChangeContent={setContent}\n        placeholder={\n          \"Paste CSV/JSON here. The file should be in the UDT JSON/CSV format.\\n\\nYou can also drag a json or csv file here (double click to open file dialog)\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n\nexport default ImportUDTFileDialog\n","// @flow weak\n\nimport React from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport Table from \"@material-ui/core/Table\"\nimport TableBody from \"@material-ui/core/TableBody\"\nimport TableCell from \"@material-ui/core/TableCell\"\nimport TableContainer from \"@material-ui/core/TableContainer\"\nimport TableHead from \"@material-ui/core/TableHead\"\nimport TableRow from \"@material-ui/core/TableRow\"\nimport { useTranslation } from \"react-i18next\"\n\nconst datasets = [\n  { name: \"Elon Musk Tweets\", type: \"text\", size: 2800 },\n  { name: \"Cats\", type: \"image\", size: 360 },\n  { name: \"VR Hand Pinching\", type: \"image\", size: 20517 },\n  { name: \"AI Generated Faces\", type: \"image\", size: 1999 },\n  { name: \"Text to Speech Audio\", type: \"audio\", size: 200 },\n]\n\nasync function getSamples(dataset) {\n  const datasetName =\n    dataset.name.toLowerCase().replace(/ /g, \"_\") + \".udt.json\"\n\n  const datasetUrl = `https://s3.amazonaws.com/datasets.workaround.online/${datasetName}`\n\n  return await fetch(datasetUrl)\n    .then((r) => r.json())\n    .then((r) => r.samples || r.taskData)\n}\n\nconst StyledButton = styled(Button)({})\n\nconst ImportToyDatasetDialog = ({ onClose, onAddSamples, open }) => {\n  const { t } = useTranslation()\n\n  return (\n    <SimpleDialog onClose={onClose} open={open} title=\"Import Toy Dataset\">\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t(\"name\")}</TableCell>\n              <TableCell>{t(\"type\")}</TableCell>\n              <TableCell>{t(\"size\")}</TableCell>\n              <TableCell>{t(\"actions\")}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {datasets.map((dataset) => (\n              <TableRow key={dataset.name}>\n                <TableCell>{dataset.name}</TableCell>\n                <TableCell>{dataset.type}</TableCell>\n                <TableCell>{dataset.size}</TableCell>\n                <TableCell>\n                  <StyledButton\n                    data-import-toy-dataset-name={dataset.name}\n                    onClick={async () => {\n                      onAddSamples(await getSamples(dataset))\n                    }}\n                    variant=\"outlined\"\n                  >\n                    {t(\"import\")}\n                  </StyledButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </SimpleDialog>\n  )\n}\n\nexport default ImportToyDatasetDialog\n","const idify = (s) =>\n  s\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, \"_\")\n    .replace(/_+/g, \"_\")\n\nexport default ({\n  youtubeUrl,\n  title: videoTitle,\n  remote,\n  videoQuality,\n  downloadPath,\n  onProgress,\n  onComplete,\n  onChangeOverallProgress,\n}) => {\n  //let starttime = Date.now()\n\n  const ytdl = remote.require(\"ytdl-core\")\n  const path = remote.require(\"path\")\n\n  const videoName = videoQuality.includes(\"audio\")\n    ? `${idify(videoTitle) + \".mp3\"}`\n    : `${idify(videoTitle) + \".mp4\"}`\n\n  const fullVideoPath = path.join(downloadPath, videoName)\n  const writableVideoFile = remote\n    .require(\"fs\")\n    .createWriteStream(fullVideoPath)\n\n  const videoFormat = videoName.endsWith(\".mp3\") ? \"audio/mp3\" : \"video/mp4\"\n\n  const youtubeVideoWithOptions = ytdl(youtubeUrl, {\n    format: videoFormat,\n    quality: videoQuality !== null ? videoQuality : \"highest\",\n  })\n\n  youtubeVideoWithOptions.pipe(writableVideoFile)\n\n  /*youtubeVideoWithOptions.once(\"response\", () => {\n    starttime = Date.now()\n  })*/\n\n  youtubeVideoWithOptions.on(\"progress\", (chunkLength, downloaded, total) => {\n    const percent = downloaded / total\n    // const downloadedMinutes = (Date.now() - starttime) / 1000 / 60\n\n    // const downloadedPercentage = (percent * 100).toFixed(2)\n    // const downloadedSize = (downloaded / 1024 / 1024).toFixed(2)\n    // const downloadedMBs = (\n    //   downloaded /\n    //   1024 /\n    //   1024\n    // ).toFixed(2)\n    // const totalSize = (total / 1024 / 1024).toFixed(2)\n    // const informationText = `${downloadedPercentage}% downloaded (${downloadedMBs}MB of ${totalSize}MB)\\nestimated time left: ${(downloadedMinutes / percent -downloadedMinutes).toFixed(2)}minutes`\n\n    onProgress({\n      progress: percent * 100,\n    })\n\n    onChangeOverallProgress(percent * 100)\n  })\n\n  youtubeVideoWithOptions.on(\"end\", () => onComplete(fullVideoPath))\n\n  return {\n    cancel: () => {\n      youtubeVideoWithOptions.destroy()\n    },\n  }\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  height: 36,\n  width: \"100%\",\n  boxSizing: \"border-box\",\n  position: \"relative\",\n  marginTop: 8,\n  marginBottom: 8,\n  backgroundColor: colors.blue[50],\n})\nconst Text = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0,\n  paddingTop: 4,\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n})\nconst Bar = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  bottom: 0,\n  top: 0,\n  backgroundColor: colors.blue[300],\n})\n\nexport default ({ progress }) => {\n  return (\n    <Container>\n      <Bar style={{ right: 100 - progress + \"%\" }} />\n      <Text>{Math.floor(progress)}%</Text>\n    </Container>\n  )\n}\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ProgressBar from \"../ProgressBar\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\n\nconst ProgressContainer = styled(\"div\")({\n  width: \"100%\",\n  height: \"100%\",\n})\n\nconst TotalPercentageWrapper = styled(\"div\")({\n  flexDirection: \"row\",\n  width: \"100%\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n})\n\nconst Progress = ({ unitProgress, overallProgress, completedVideoTitles }) => {\n  return (\n    <ProgressContainer>\n      <ProgressBar progress={overallProgress} />\n      <ProgressBar progress={unitProgress.progress} />\n\n      <h3>Downloading: {unitProgress.title}</h3>\n      <ExpansionPanel>\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n          <TotalPercentageWrapper>\n            <h3>Downloaded Video Titles</h3>\n          </TotalPercentageWrapper>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <ul>\n            {completedVideoTitles && completedVideoTitles.length > 0\n              ? completedVideoTitles\n              : null}\n          </ul>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </ProgressContainer>\n  )\n}\n\nexport default Progress\n","const getYoutubeVideoInformation = async (\n  remote,\n  splittedURLsArray,\n  progressCallback = () => null\n) => {\n  const ytdl = remote.require(\"ytdl-core\")\n  const checkedVideos = []\n  if (splittedURLsArray.length > 0) {\n    for (let i = 0; i < splittedURLsArray.length; i++) {\n      const url = splittedURLsArray[i]\n      const video = await new Promise((resolve, reject) => {\n        ytdl.getBasicInfo(url, (err, info) => {\n          if (info && !err) {\n            resolve({\n              url,\n              title: info.title,\n            })\n          } else {\n            const errorText = `Error with video at \"${url}\"\\n\\n${err.toString()}`\n            reject(new Error(errorText))\n          }\n        })\n      })\n      checkedVideos.push(video)\n      progressCallback({\n        progress: (i / (splittedURLsArray.length - 1)) * 100,\n        text: \"Inspecting Video Information...\",\n      })\n    }\n  }\n  return checkedVideos\n}\n\nexport default getYoutubeVideoInformation\n","const splitURLsFromTextArea = (stringURLs) => {\n  const urlsHasHTTPS = []\n  const splittedURLsByNewLines = stringURLs.split(\"\\n\")\n  for (const url of splittedURLsByNewLines) {\n    if (url.includes(\"https://\")) {\n      urlsHasHTTPS.push(url)\n    }\n  }\n  return urlsHasHTTPS\n}\n\nexport default splitURLsFromTextArea\n","import React, { useState, useRef } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport useElectron from \"../../utils/use-electron\"\nimport Select from \"react-select\"\nimport downloadYoutubeVideo from \"./download-youtube-video\"\nimport Progress from \"./progress\"\nimport getYoutubeVideoInformation from \"./get-youtube-video-information\"\nimport splitURLsFromTextArea from \"./split-urls-from-text-area\"\nimport { useTranslation } from \"react-i18next\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\n\nconst SelectVideoQualityHeader = styled(\"h3\")({\n  lineHeight: 0,\n  textAlign: \"center\",\n})\n\nconst SelectVideoQuality = styled(\"div\")({\n  width: \"100%\",\n  marginBottom: 8,\n  paddingBottom: 4,\n})\n\nconst ErrorText = styled(\"pre\")({\n  whiteSpace: \"pre-wrap\",\n  color: \"#f00\",\n})\n\nconst LoadingText = styled(\"h2\")({\n  width: \"100%\",\n  height: \"100%\",\n  margin: \"auto auto\",\n  textAlign: \"center\",\n})\n\nconst CompletedVideoTitle = styled(\"h3\")({\n  textDecoration: \"line-through\",\n  lineHeight: 0,\n})\n\nconst qualityOptions = [\n  { value: \"136\", label: \"720p\" },\n  { value: \"135\", label: \"480p\" },\n  { value: \"lowestvideo\", label: \"Lowest Video Only\" },\n  // TODO these did not seem to work in a local test (missing video)\n  // { value: \"lowest\", label: \"lowest\" },\n  // { value: \"highest\", label: \"Highest\" },\n  { value: \"highestvideo\", label: \"Highest Video Only\" },\n  { value: \"lowestaudio\", label: \"Lowest Audio Only\" },\n  { value: \"highestaudio\", label: \"Highest Audio Only\" },\n]\n\nconst ImportFromYoutubeUrls = ({ open, onClose, onAddSamples }) => {\n  const { remote } = useElectron() || {}\n  const { t } = useTranslation()\n\n  const [urlsFromTextArea, setUrlsFromTextArea] = useState([])\n  const [videoQuality, setVideoQuality] = useState(qualityOptions[0].value)\n  const [error, setError] = useState(null)\n\n  const [unitProgress, setUnitProgress] = useState({ progress: 0 })\n  const [overallProgress, setOverallProgress] = useState(0)\n  const [isDownloading, setIsDownloading] = useState(false)\n  const [completedVideoTitles, setCompletedVideoTitles] = useState(null)\n\n  const cancelRef = useRef()\n\n  const setDefaultState = async () => {\n    setUnitProgress({ progress: 0, title: \"\" })\n    setOverallProgress(0)\n    setIsDownloading(false)\n  }\n\n  const closeDialog = async () => {\n    await setDefaultState()\n    onClose()\n  }\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={closeDialog}\n      title=\"Import from Youtube URLs\"\n      actions={[\n        {\n          text: \"Cancel Downloads\",\n          disabled: !isDownloading,\n          onClick: () => {\n            cancelRef.current()\n            setIsDownloading(false)\n          },\n        },\n        {\n          text: \"Download Youtube URLs\",\n          onClick: async () => {\n            setIsDownloading(true)\n            const { canceled, filePaths } = await remote.dialog.showOpenDialog({\n              title: \"Directory to download files to\",\n              buttonLabel: \"Download Files Here\",\n              properties: [\n                \"createDirectory\",\n                \"openDirectory\",\n                \"promptToCreate\",\n              ],\n            })\n\n            if (canceled || !filePaths) return setIsDownloading(false)\n\n            const downloadPath = filePaths[0]\n\n            const youtubeVideoInfos = await getYoutubeVideoInformation(\n              remote,\n              urlsFromTextArea,\n              ({ progress, text }) => {\n                setUnitProgress({ progress })\n              }\n            ).catch((errorMessage) => {\n              console.error(errorMessage.stack)\n              setError(errorMessage.toString())\n              return null\n            })\n            if (!youtubeVideoInfos) return setIsDownloading(false)\n\n            const completedVideoPaths = []\n            const completedVideoTitlesArray = []\n\n            const youtubeVideosCount = youtubeVideoInfos.length\n\n            for (let i = 0; i < youtubeVideosCount; i++) {\n              const youtubeVideoInfo = youtubeVideoInfos[i]\n              const videoPath = await new Promise((resolve, reject) => {\n                const { cancel } = downloadYoutubeVideo({\n                  remote,\n                  downloadPath,\n                  youtubeUrl: youtubeVideoInfo.url,\n                  title: youtubeVideoInfo.title,\n                  videoQuality,\n                  onChangeOverallProgress: (currentProgress) =>\n                    setOverallProgress(\n                      ((completedVideoTitlesArray.length * 100 +\n                        currentProgress) /\n                        (youtubeVideosCount * 100)) *\n                        100\n                    ),\n                  onProgress: ({ progress, text }) =>\n                    setUnitProgress({\n                      progress,\n                      title: youtubeVideoInfo.title,\n                      progressText: text,\n                    }),\n                  onComplete: (filePath) => resolve(filePath),\n                })\n                cancelRef.current = cancel\n              })\n\n              completedVideoTitlesArray.push(\n                <li key={i + youtubeVideoInfo.title}>\n                  <CompletedVideoTitle>\n                    {youtubeVideoInfo.title}\n                  </CompletedVideoTitle>\n                </li>\n              )\n              setCompletedVideoTitles(completedVideoTitlesArray)\n\n              completedVideoPaths.push(videoPath)\n            }\n\n            onAddSamples(\n              completedVideoPaths.map((videoPath) => ({\n                videoUrl: `file://${videoPath}`,\n              }))\n            )\n\n            setIsDownloading(false)\n          },\n          disabled: isDownloading,\n        },\n      ]}\n    >\n      {error && <ErrorText>{error}</ErrorText>}\n      {isDownloading &&\n      ((unitProgress && unitProgress.progress && unitProgress.progress > 0) ||\n        (completedVideoTitles &&\n          Array.isArray(completedVideoTitles) === true &&\n          completedVideoTitles.length > 0)) ? (\n        <Progress\n          unitProgress={unitProgress}\n          completedVideoTitles={completedVideoTitles}\n          overallProgress={overallProgress}\n        />\n      ) : isDownloading === true ? (\n        <LoadingText>Information is Loading</LoadingText>\n      ) : null}\n      {!isDownloading && (\n        <React.Fragment>\n          <SelectVideoQuality>\n            <SelectVideoQualityHeader>\n              {t(\"select-video-quality\")}\n            </SelectVideoQualityHeader>\n            <Select\n              defaultValue={qualityOptions[0]}\n              options={qualityOptions}\n              onChange={({ value }) => setVideoQuality(value)}\n            />\n          </SelectVideoQuality>\n          <TextArea\n            onChange={(e, v) => {\n              setUrlsFromTextArea(splitURLsFromTextArea(e.target.value))\n            }}\n            placeholder={\"Paste Youtube URLs here\\nOne URL per line\"}\n          />\n        </React.Fragment>\n      )}\n    </SimpleDialog>\n  )\n}\n\nexport default ImportFromYoutubeUrls\n","import React, { useState, useEffect } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport CreatableSelect from \"react-select/creatable\"\n\nimport FormGroup from \"@material-ui/core/FormGroup\"\nimport Box from \"@material-ui/core/Box\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport { setIn } from \"seamless-immutable\"\n\nconst Image = styled(\"img\")({\n  width: 100,\n  height: 100,\n  margin: 8,\n})\n\nconst TermsOfUse = styled(\"div\")({\n  padding: 16,\n  margin: 16,\n  backgroundColor: colors.green[200],\n  \"& a\": {\n    color: colors.blue[600],\n  },\n})\n\nexport const ImportFromCOCODialog = ({\n  open,\n  onClose,\n  onChangeDataset,\n  dataset,\n}) => {\n  const [labelsSelected, setLabelsSelected] = useState([])\n  const [exclusive, setExclusive] = useState()\n  const [shouldReplaceInterface, setShouldReplaceInterface] = useState()\n  const [importedDataset, setImportedDataset] = useState(null)\n\n  useEffect(() => {\n    if (labelsSelected.length === 0) return\n    async function loadSamples() {\n      const ds = await fetch(\n        `https://coco.universaldatatool.com/api/captions?labels=${encodeURIComponent(\n          labelsSelected.join(\",\")\n        )}${exclusive ? \"&exclusive\" : \"\"}`\n      ).then((r) => r.json())\n      setImportedDataset(ds)\n    }\n    loadSamples()\n  }, [exclusive, labelsSelected])\n\n  return (\n    <SimpleDialog\n      open={open}\n      title=\"Import from COCO\"\n      onClose={onClose}\n      actions={[\n        importedDataset?.samples.length > 0 && {\n          text: \"Add Samples\",\n          disabled: !importedDataset,\n          onClick: () => {\n            onChangeDataset(\n              setIn(\n                dataset,\n                [\"samples\"],\n                dataset.samples.concat(importedDataset.samples)\n              ).setIn([\"interface\"], importedDataset.interface)\n            )\n            onClose()\n          },\n        },\n      ].filter(Boolean)}\n    >\n      <TermsOfUse>\n        By clicking \"Add Samples\" you understand that these images are from the{\" \"}\n        <a href=\"https://cocodataset.org\">Common Objects in Context dataset</a>{\" \"}\n        and you must abide by{\" \"}\n        <a href=\"https://cocodataset.org/#termsofuse\">their terms of use</a>.\n      </TermsOfUse>\n      <CreatableSelect\n        isMulti\n        onChange={(labels) => {\n          setLabelsSelected((labels || []).map((l) => l.value))\n        }}\n        options={[]}\n      />\n      <FormGroup>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={exclusive}\n              onChange={(e, checked) => setExclusive(checked)}\n            />\n          }\n          label=\"Exclusive (Single Classification)\"\n        />\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={shouldReplaceInterface}\n              onChange={(e, checked) => setShouldReplaceInterface(checked)}\n            />\n          }\n          label=\"Replace Interface?\"\n        />\n      </FormGroup>\n      <Box padding={2} minHeight=\"400px\">\n        {(importedDataset?.samples || []).slice(0, 9).map((s) => (\n          <Image src={s.imageUrl} />\n        ))}\n      </Box>\n    </SimpleDialog>\n  )\n}\n\nexport default ImportFromCOCODialog\n","// @flow weak\n\nconst convertToSamplesObject = (fp) => {\n  const ext = fp.split(\".\").slice(-1)[0].toLowerCase()\n  if ([\"png\", \"jpg\", \"jpeg\"].includes(ext)) {\n    return { imageUrl: `file://${fp}` }\n  }\n  if ([\"pdf\"].includes(ext)) {\n    return { pdfUrl: `file://${fp}` }\n  }\n  if ([\"mp4\", \"webm\", \"mkv\"].includes(ext)) {\n    return { videoUrl: `file://${fp}` }\n  }\n  return null\n}\n\nasync function promptAndGetSamplesLocalDirectory({ electron }) {\n  const {\n    canceled,\n    filePaths: dirPaths,\n  } = await electron.remote.dialog.showOpenDialog({\n    title: \"Select Directory to Import Files\",\n    properties: [\"openDirectory\"],\n  })\n  if (canceled) return\n  const dirPath = dirPaths[0]\n  const fs = electron.remote.require(\"fs\")\n  const path = electron.remote.require(\"path\")\n  return (await fs.promises.readdir(dirPath))\n    .filter((fn) => fn.includes(\".\"))\n    .map((fileName) => path.join(dirPath, fileName))\n    .map(convertToSamplesObject)\n    .filter(Boolean)\n}\n\nexport default promptAndGetSamplesLocalDirectory\n","// @flow weak\n\nimport React, { useState, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\"\nimport TextFieldsIcon from \"@material-ui/icons/TextFields\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport PetsIcon from \"@material-ui/icons/Pets\"\nimport * as colors from \"@material-ui/core/colors\"\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\nimport ImportFromCognitoS3Dialog from \"../ImportFromCognitoS3Dialog\"\nimport ImportFromS3Dialog from \"../ImportFromS3Dialog\"\nimport UploadToS3Dialog from \"../UploadToS3Dialog\"\nimport ImportTextSnippetsDialog from \"../ImportTextSnippetsDialog\"\nimport useElectron from \"../../utils/use-electron\"\nimport classnames from \"classnames\"\nimport S3Icon from \"./S3Icon\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport ImportFromGoogleDriveDialog from \"../ImportFromGoogleDriveDialog\"\nimport ImportUDTFileDialog from \"../ImportUDTFileDialog\"\nimport ImportToyDataset from \"../ImportToyDatasetDialog\"\nimport ImportFromYoutubeUrls from \"../ImportFromYoutubeUrls\"\nimport ImportFromCOCODialog from \"../ImportFromCOCODialog\"\nimport { FaGoogleDrive, FaYoutube } from \"react-icons/fa\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport promptAndGetSamplesFromLocalDirectory from \"./prompt-and-get-samples-from-local-directory.js\"\nimport { useTranslation } from \"react-i18next\"\nimport useAuth from \"../../utils/auth-handlers/use-auth.js\"\nimport { useAppConfig } from \"../AppConfig\"\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\"\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200],\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 48,\n    height: 48,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400],\n    },\n  },\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500],\n  },\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({\n  Icon,\n  desktopOnly,\n  isDesktop,\n  children,\n  dialog,\n  authConfiguredOnly,\n  signedInOnly,\n  disabledReason,\n  user,\n  onlySupportType,\n  type,\n}) => {\n  const posthog = usePosthog()\n\n  const { isLoggedIn, authConfig } = useAuth()\n\n  const isDisabled = () => {\n    if (disabledReason) {\n      return { disabled: true, disabledText: disabledReason }\n    } else if (desktopOnly) {\n      return { disabled: !isDesktop, disabledText: \"DESKTOP ONLY\" }\n    } else if (onlySupportType && !onlySupportType.includes(type)) {\n      return { disabled: true, disabledText: `DOESN'T SUPPORT THIS INTERFACE` }\n    } else if (authConfiguredOnly && !isLoggedIn) {\n      if (signedInOnly) {\n        return { disabled: isEmpty(user), disabledText: \"MUST BE SIGNED IN\" }\n      } else {\n        return {\n          disabled: isEmpty(authConfig),\n          disabledText: \"AUTH MUST BE CONFIGURED\",\n        }\n      }\n    } else {\n      return { disabled: false, disabledText: \"\" }\n    }\n  }\n\n  const { disabled, disabledText } = isDisabled()\n\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => {\n              posthog.capture(\"import_button_clicked\", {\n                import_button: dialog,\n              })\n              onChangeDialog(dialog)\n            }}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              <Icon className={classnames(\"icon\", { disabled })} />\n              <div>{children}</div>\n              {disabled && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  {disabledText}\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nexport default ({\n  // TODO remove file, onChangeFile\n  file,\n  onChangeFile,\n\n  dataset,\n  onChangeDataset,\n  isDesktop,\n  authConfig,\n  user,\n}) => {\n  const { t } = useTranslation()\n  const [selectedDialog, changeDialog] = useState()\n  const electron = useElectron()\n  const { fromConfig } = useAppConfig()\n  const onChangeDialog = async (dialog) => {\n    switch (dialog) {\n      case \"upload-directory\": {\n        if (!electron) return\n        const localSamples = await promptAndGetSamplesFromLocalDirectory({\n          electron,\n        })\n\n        if (typeof localSamples === \"undefined\") {\n          return\n        }\n\n        onChangeDataset(\n          setIn(\n            dataset,\n            [\"samples\"],\n            (dataset.samples || []).concat(localSamples)\n          ),\n          true\n        )\n        return\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n\n  const closeDialog = () => changeDialog(null)\n\n  const onAddSamples = useEventCallback(async (samplesToAdd) => {\n    onChangeDataset(\n      setIn(dataset, [\"samples\"], (dataset.samples || []).concat(samplesToAdd))\n    )\n    closeDialog()\n  })\n\n  const onAddSamplesAsToyDataset = useEventCallback(async (samplesToAdd) => {\n    onChangeDataset(\n      setIn(\n        dataset,\n        [\"samples\"],\n        (dataset.samples || []).concat(samplesToAdd)\n      ).setIn([\"usedToyDataset\"], true)\n    )\n    closeDialog()\n  })\n\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"paste-image-urls\"\n          Icon={AssignmentReturnedIcon}\n          authConfig={authConfig}\n          signedInOnly={false}\n          user={user}\n        >\n          {t(\"paste-urls\")}\n        </Button>\n        <Button\n          desktopOnly\n          isDesktop={isDesktop}\n          dialog=\"upload-directory\"\n          Icon={CreateNewFolderIcon}\n          authConfig={authConfig}\n          signedInOnly={false}\n          user={user}\n        >\n          {t(\"files-from-directory\")}\n        </Button>\n        <Button\n          dialog=\"import-text-snippets\"\n          Icon={TextFieldsIcon}\n          onlySupportType={[\n            \"text_entity_recognition\",\n            \"text_classification\",\n            \"text_entity_relations\",\n          ]}\n          type={dataset.interface.type}\n        >\n          {t(\"import-text-snippets\")}\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"import-toy-dataset\"\n          Icon={PetsIcon}\n        >\n          {t(\"import-toy-dataset\")}\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"youtube-urls\"\n          Icon={FaYoutube}\n          desktopOnly\n        >\n          {t(\"import-from\")} Youtube URLs\n        </Button>\n        <Button\n          Icon={S3Icon}\n          dialog=\"import-from-s3\"\n          disabledReason={\n            fromConfig(\"auth.s3iam.access_key_id\") ? null : \"NEED AWS IAM AUTH\"\n          }\n        >\n          {t(\"import-from-s3\")}\n        </Button>\n        <Button\n          Icon={S3Icon}\n          dialog=\"upload-to-s3\"\n          disabledReason={\n            fromConfig(\"auth.s3iam.access_key_id\") ? null : \"NEED AWS IAM AUTH\"\n          }\n        >\n          {t(\"upload-to-s3\")}\n        </Button>\n        {file && (\n          <Button\n            isDesktop={isDesktop}\n            dialog=\"import-from-cognito-s3\"\n            Icon={S3Icon}\n            authConfiguredOnly={true}\n            signedInOnly={true}\n            user={user}\n          >\n            {t(\"import-from-cognito-s3\")}\n          </Button>\n        )}\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"google-drive-file-picker\"\n          Icon={FaGoogleDrive}\n          onAddSamples={onAddSamples}\n        >\n          {t(\"import-from\")} Google Drive\n        </Button>\n        <Button dialog=\"import-csv-json\" Icon={DescriptionIcon}>\n          {t(\"import-from\")} CSV / JSON\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"import-from-coco\"\n          Icon={PhotoLibraryIcon}\n        >\n          {t(\"import-from-coco\")}\n        </Button>\n\n        <ImportFromCOCODialog\n          open={selectedDialog === \"import-from-coco\"}\n          onClose={closeDialog}\n          dataset={dataset}\n          onChangeDataset={onChangeDataset}\n        />\n        <ImportTextSnippetsDialog\n          open={selectedDialog === \"import-text-snippets\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <PasteUrlsDialog\n          open={selectedDialog === \"paste-image-urls\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportFromS3Dialog\n          open={selectedDialog === \"import-from-s3\"}\n          onChangeFile={onChangeFile}\n          onClose={closeDialog}\n          user={user}\n          onAddSamples={onAddSamples}\n        />\n        <UploadToS3Dialog\n          open={selectedDialog === \"upload-to-s3\"}\n          onChangeFile={onChangeFile}\n          onClose={closeDialog}\n          user={user}\n          onAddSamples={onAddSamples}\n        />\n        {file && (\n          <ImportFromCognitoS3Dialog\n            file={file}\n            open={selectedDialog === \"import-from-cognito-s3\"}\n            onChangeFile={onChangeFile}\n            onClose={closeDialog}\n            user={user}\n            onAddSamples={onAddSamples}\n          />\n        )}\n        <ImportFromGoogleDriveDialog\n          open={selectedDialog === \"google-drive-file-picker\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportToyDataset\n          open={selectedDialog === \"import-toy-dataset\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamplesAsToyDataset}\n        />\n        <ImportFromYoutubeUrls\n          open={selectedDialog === \"youtube-urls\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportUDTFileDialog\n          open={selectedDialog === \"import-csv-json\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Box from \"@material-ui/core/Box\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport immutable from \"seamless-immutable\"\nimport { useTranslation } from \"react-i18next\"\n\nconst Code = styled(\"pre\")({\n  fontSize: 8,\n})\n\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  backgroundColor: colors.grey[100],\n  border: `1px solid ${colors.grey[500]}`,\n  marginTop: 16,\n  marginBottom: 16,\n})\n\nconst StyledExpansionPanelSummary = styled(ExpansionPanelSummary)({\n  fontWeight: \"bold\",\n})\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  const { t } = useTranslation()\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Transform Video Keyframes\"\n      actions={[\n        {\n          text: \"Transform Video Keyframes\",\n          disabled: !dataset.samples,\n          onClick: () => {\n            const samples = dataset.samples.flatMap((item, index) => {\n              if (!item.videoUrl) return { data: item, output: item.annotation }\n              if (item.videoUrl && !item.videoFrameAt) {\n                if (!item.annotation) return []\n                if (!item.annotation.keyframes) return []\n                const { keyframes } = item[index].annotation\n                return Object.keys(keyframes).map((kf) => ({\n                  videoUrl: item.videoUrl,\n                  videoFrameAt: parseInt(kf),\n                  annotation: keyframes[kf].regions || [],\n                }))\n              }\n            })\n\n            onChangeDataset(\n              immutable(dataset)\n                .setIn(\n                  [\"samples\"],\n                  samples.map((s) => s.data)\n                )\n                .setIn([\"interface\", \"type\"], \"image_segmentation\")\n            )\n          },\n        },\n      ]}\n    >\n      {t(\"transform-video-keyframes-dialog-explanation-text\")}\n      {!dataset.samples && (\n        <b>\n          <br />\n          <br />\n          {t(\"transform-video-keyframes-dialog-explanation-warning\")}\n        </b>\n      )}\n      <StyledExpansionPanel>\n        <StyledExpansionPanelSummary>Details</StyledExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <Box display=\"flex\">\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"video_segmentation\" },\n  samples: [\n    {\n      videoUrl: \"https://example.com/video1.mp4\"\n    }\n  ],\n  taskOutput: [\n    {\n      keyframes: {\n        \"0\": { /* labels */ },\n        \"1000\": { /* labels */ },\n        \"2000\": { /* labels */ }\n      }\n    }\n  ]\n}`}\n              </Code>\n            </Box>\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n              <ArrowForwardIcon\n                style={{ color: colors.grey[500], width: 48, height: 48 }}\n              />\n            </Box>\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"image_segmentation\" },\n  samples: [\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 0\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 1000\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 2000\n    }\n  ],\n  taskOutput: [\n    { /* labels */ },\n    { /* labels */ },\n    { /* labels */ }\n  ]\n}`}\n              </Code>\n            </Box>\n          </Box>\n        </ExpansionPanelDetails>\n      </StyledExpansionPanel>\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport md5 from \"js-md5\"\nimport path from \"path\"\nimport { setIn } from \"seamless-immutable\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nfunction downloadFile(urlToDownload, directoryPath, remote) {\n  const fileName = `sample_${md5(urlToDownload).slice(0, 6)}__${urlToDownload\n    .split(\"/\")\n    .slice(-1)[0]\n    .replace(/[^a-zA-Z0-9_\\-.]/g, \"\")}`\n  const downloadPath = path.join(directoryPath, fileName)\n  if (remote.require(\"fs\").existsSync(downloadPath)) return downloadPath\n  return new Promise((resolve, reject) => {\n    remote.require(\"download-file\")(\n      urlToDownload,\n      {\n        directory: directoryPath,\n        filename: fileName,\n      },\n      (err) => {\n        if (err) return reject(err)\n        return resolve(downloadPath)\n      }\n    )\n  })\n}\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n\n  const { t } = useTranslation()\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Download URLs\"\n      actions={[\n        {\n          text: \"Download URLs\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            const {\n              cancelled,\n              filePaths: [directoryPath] = [null],\n            } = await remote.dialog.showOpenDialog({\n              title: \"Directory to download files to\",\n              buttonLabel: \"Download Files Here\",\n              properties: [\n                \"createDirectory\",\n                \"openDirectory\",\n                \"promptToCreate\",\n              ],\n            })\n            if (cancelled || !directoryPath) {\n              changeProgress(null)\n              return\n            }\n\n            const newSamples = [...dataset.samples]\n            let errors = \"\"\n\n            // Iterate over each task datum and download the url, then convert\n            // the path to a filesystem path\n            for (let i = 0; i < dataset.samples.length; i++) {\n              const td = dataset.samples[i]\n              let urlKey\n              if (td.imageUrl) urlKey = \"imageUrl\"\n              if (td.videoUrl) urlKey = \"videoUrl\"\n              if (!urlKey || !td[urlKey].startsWith(\"http\")) continue\n              const urlToDownload = td[urlKey]\n              try {\n                const pathToFile = await downloadFile(\n                  urlToDownload,\n                  directoryPath,\n                  remote\n                )\n                newSamples[i] = {\n                  ...td,\n                  [urlKey]: `file://${pathToFile}`,\n                }\n              } catch (e) {\n                errors += `Skipping sample, error downloading samples[${i}] (${urlToDownload}): ${e.toString()} \\n`\n              }\n              changeProgress((i / dataset.samples.length) * 100)\n            }\n\n            onChangeDataset(setIn(dataset, [\"samples\"], newSamples))\n\n            changeErrors(errors)\n            changeProgress(100)\n          },\n        },\n      ]}\n    >\n      {t(\"download-urls-dialog\")}\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport { setIn, without } from \"seamless-immutable\"\nimport { useTranslation } from \"react-i18next\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nconst getFfmpegTimeCode = (ms) => {\n  const cs = Math.floor(ms / 10) % 100\n  const ss = Math.floor(ms / 1000) % 60\n  const mn = Math.floor(ms / 1000 / 60) % 60\n  const hr = Math.floor(ms / 1000 / 60 / 60)\n  return [hr, \":\", mn, \":\", ss, \".\", cs]\n    .map((n) => (typeof n === \"number\" ? n.toString().padStart(2, \"0\") : n))\n    .join(\"\")\n}\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n  const { t } = useTranslation()\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Video Frames to Images\"\n      actions={[\n        {\n          text: \"Convert Video Frames to Images\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            let errors = \"\"\n            const pathToFfmpeg = remote.require(\"ffmpeg-static\")\n            if (!pathToFfmpeg) {\n              changeErrors(\n                \"There was an issue using ffmpeg. Please create an issue on the github repository.\"\n              )\n            }\n\n            const shell = remote.require(\"any-shell-escape\")\n            const { exec } = remote.require(\"child_process\")\n            const newsamples = [...dataset.samples]\n            let transformsPerformed = 0\n\n            for (let i = 0; i < dataset.samples.length; i++) {\n              const td = dataset.samples[i]\n              if (td.videoUrl && td.videoFrameAt !== undefined) {\n                if (td.videoUrl.startsWith(\"http\")) {\n                  errors += `Sample ${i} has a url to a video, videos must be downloaded before extracting frames.`\n                  continue\n                }\n                transformsPerformed++\n\n                const videoPath = td.videoUrl.replace(/^file:\\/\\//, \"\")\n                const imageOutputPath =\n                  videoPath + \"__frameat__\" + td.videoFrameAt + \".jpg\"\n                const ffmpegCommand = shell([\n                  pathToFfmpeg,\n                  \"-y\",\n                  \"-ss\",\n                  getFfmpegTimeCode(td.videoFrameAt),\n                  \"-i\",\n                  videoPath,\n                  \"-frames:v\",\n                  1,\n                  imageOutputPath,\n                ])\n                await new Promise((resolve, reject) => {\n                  exec(ffmpegCommand, { timeout: 5000 }, (err) => {\n                    if (err) return reject(err)\n                    resolve()\n                  })\n                })\n                newsamples[i] = {\n                  ...without(\n                    without(dataset.samples[i], \"videoUrl\"),\n                    \"videoFrameAt\"\n                  ),\n                  imageUrl: `file://${imageOutputPath}`,\n                }\n              }\n              changeProgress((i / dataset.samples.length) * 100)\n            }\n\n            if (transformsPerformed === 0) {\n              errors +=\n                \"No transforms were performed, do all of your video samples have frames specified? You may need to convert the keyframes to samples.\"\n            }\n\n            onChangeDataset(setIn(dataset, [\"samples\"], newsamples))\n\n            changeErrors(errors)\n            changeProgress(100)\n          },\n        },\n      ]}\n    >\n      {t(\"transform-video-frames-to-images-dialog-explanation-text\")}\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","const uploadFileToTransferSh = async ({ fileName, fileURL, remote }) => {\n  window.remote = remote // TODO remove\n  const remoteURL = `https://files.universaldatatool.com/${fileName}` ///${hashedFileName}\n\n  const axios = remote.require(\"axios\")\n  const exactFilePath = fileURL.split(\"file://\")[1]\n\n  const fsFileBuffer = remote.require(\"fs\").readFileSync(exactFilePath)\n\n  const uploadedFileURL = await axios\n    .put(remoteURL, fsFileBuffer)\n    .then((response) => {\n      if (response.status === 200) {\n        return response.data\n      }\n    })\n\n  return uploadedFileURL.replace(\n    \"universaldatatool.com/\",\n    \"universaldatatool.com/get/\"\n  )\n}\n\nexport default uploadFileToTransferSh\n","const splitFileNameFromFileURL = (fileURL) => {\n  if (fileURL.startsWith(\"file://\")) {\n    const splittedFullFileName = fileURL.split(\"/\")\n    const fullFileName = splittedFullFileName[splittedFullFileName.length - 1]\n    return fullFileName\n  }\n}\n\nexport default splitFileNameFromFileURL\n","const getFileURLKey = (item) => {\n  if (item.imageUrl) return \"imageUrl\"\n  if (item.videoUrl) return \"videoUrl\"\n  if (item.audioUrl) return \"audioUrl\"\n  return null\n}\n\nexport default getFileURLKey\n","import uploadFileToTransferSh from \"./upload-file-to-transfersh\"\nimport splitFileNameFromFileURL from \"./split-file-name-from-file-url\"\nimport getFileURLKey from \"./get-file-url-key\"\nimport { setIn } from \"seamless-immutable\"\n\n// TODO move to utils directory\nconst idify = (s) =>\n  s\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, \"_\")\n    .replace(/_+/g, \"_\")\n\nconst transformFileURLsToWebURLs = async ({\n  dataset,\n  onChangeDataset,\n  setProgress,\n  remote,\n}) => {\n  const newsamples = []\n\n  const progressUnit = 100 / dataset.samples.length\n  for (\n    let samplesIndex = 0;\n    samplesIndex < dataset.samples.length;\n    samplesIndex++\n  ) {\n    const samplesItem = dataset.samples[samplesIndex]\n\n    const fileURLKey = getFileURLKey(samplesItem)\n\n    if (!fileURLKey) {\n      newsamples.push(samplesItem)\n      continue\n    }\n\n    const fileURL = samplesItem[fileURLKey]\n\n    if (!fileURL.startsWith(\"file://\")) {\n      newsamples.push(samplesItem)\n      continue\n    }\n\n    const halfProgressOfUnit = progressUnit * samplesIndex\n    setProgress(halfProgressOfUnit)\n\n    const fileName = idify(splitFileNameFromFileURL(fileURL))\n\n    const webURLOfUploadedFile = await uploadFileToTransferSh({\n      fileName,\n      fileURL,\n      remote,\n    }).catch((e) => console.warn(e))\n\n    if (!webURLOfUploadedFile) {\n      newsamples.push(samplesItem)\n      continue\n    }\n\n    newsamples.push({\n      ...samplesItem,\n      [fileURLKey]: webURLOfUploadedFile,\n    })\n  }\n  setProgress(100)\n  onChangeDataset(setIn(dataset, [\"samples\"], newsamples))\n}\n\nexport default transformFileURLsToWebURLs\n","import React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport transformFileURLsToWebURLs from \"./functions/transform-file-urls-to-web-urls\"\nimport ProgressBar from \"../ProgressBar\"\nimport useElectron from \"../../utils/use-electron\"\nimport { useTranslation } from \"react-i18next\"\n\nconst TransformLocalFilesToWebURLs = ({\n  open,\n  onClose,\n  dataset,\n  onChangeDataset,\n}) => {\n  const { t } = useTranslation()\n\n  const [progress, setProgress] = useState(0)\n  const { remote } = useElectron() || {}\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Local Files to Web URLs\"\n      actions={[\n        {\n          text: \"Convert Local Files to Web URLs\",\n          onClick: async () =>\n            await transformFileURLsToWebURLs({\n              dataset,\n              onChangeDataset,\n              setProgress,\n              remote,\n            }),\n        },\n      ]}\n    >\n      {t(\"transform-local-files-to-web-urls-explanation\")}\n      <ProgressBar progress={progress} />\n    </SimpleDialog>\n  )\n}\n\nexport default TransformLocalFilesToWebURLs\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\nimport Box from \"@material-ui/core/Box\"\nimport range from \"lodash/range\"\nimport TextField from \"@material-ui/core/TextField\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  const [errors, setErrors] = useState(\"\")\n  const [rows, setRows] = useState(\"2\")\n  const [columns, setColumns] = useState(\"2\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Image Samples into Segments\"\n      actions={[\n        {\n          text: \"Convert Image Samples into Segments\",\n          onClick: async () => {\n            const [nRows, nCols] = [parseInt(rows), parseInt(columns)]\n\n            try {\n              onChangeDataset(\n                setIn(\n                  dataset,\n                  [\"samples\"],\n                  range(nRows).flatMap((y) =>\n                    range(nCols).flatMap((x) =>\n                      dataset.samples.map((s) => {\n                        return setIn(s, [\"allowedArea\"], {\n                          x: x / nCols,\n                          y: y / nRows,\n                          width: 1 / nCols,\n                          height: 1 / nRows,\n                        })\n                      })\n                    )\n                  )\n                )\n              )\n              onClose()\n            } catch (e) {\n              setErrors(e.toString())\n            }\n          },\n        },\n      ]}\n    >\n      This transformation will multiply the number of image samples you have,\n      splitting each individual image into segments. The image is not processed\n      and clipped, but rather an \"allowedArea\" property is placed on the sample\n      which limits the labeling to a section of the image. This is useful when\n      trying to reduce the amount of work per image sample.\n      <Box padding={4}>\n        <TextField\n          label=\"Rows\"\n          value={rows}\n          onChange={(e) => setRows(e.target.value)}\n        />\n        <TextField\n          label=\"Columns\"\n          value={columns}\n          onChange={(e) => setColumns(e.target.value)}\n        />\n      </Box>\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  const [errors, setErrors] = useState(\"\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Segments to Image Samples\"\n      actions={[\n        {\n          text: \"Convert Segments to Image Samples\",\n          onClick: async () => {\n            try {\n              const imageUrls = Array.from(\n                new Set(dataset.samples.map((s) => s.imageUrl))\n              )\n              const newSamples = []\n              for (const imageUrl of imageUrls) {\n                const pieces = dataset.samples.filter(\n                  (s) => s.imageUrl === imageUrl\n                )\n                newSamples.push({\n                  imageUrl,\n                  annotation: pieces\n                    .flatMap((p) => p.annotation)\n                    .filter(Boolean),\n                })\n              }\n              onChangeDataset(setIn(dataset, [\"samples\"], newSamples))\n              onClose()\n            } catch (e) {\n              setErrors(e.toString())\n            }\n          },\n        },\n      ]}\n    >\n      This transformation will take image samples that have been split into\n      segments (each with an allowedArea), and combine them into one image\n      sample again. This is typically executed after a splitting operation when\n      the samples are to be recombined.\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { setIn } from \"seamless-immutable\"\nimport ProgressBar from \"../ProgressBar\"\n\nasync function isUrlValid(url) {\n  return new Promise((resolve) => {\n    const image = document.createElement(\"img\")\n\n    image.onload = () => {\n      resolve(true)\n    }\n    image.onerror = () => {\n      resolve(false)\n    }\n\n    image.src = url\n\n    setTimeout(() => {\n      resolve(true)\n    }, 200)\n  })\n}\n\nexport default ({ open, onChangeDataset, onClose, dataset }) => {\n  // const [errors, setErrors] = useState(\"\")\n  const [filteredSamples, setFilteredSamples] = useState()\n  const [\n    { samplesRemoved, samplesProcessed, complete },\n    setProcessState,\n  ] = useState({\n    samplesRemoved: 0,\n    samplesProcessed: 0,\n    complete: false,\n  })\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Remove Invalid Samples\"\n      actions={[\n        {\n          text: \"Find Invalid Samples\",\n          onClick: async () => {\n            const samples = []\n            let samplesProcessed = 0,\n              samplesRemoved = 0\n            // TODO add parallelism\n            for (const sample of dataset.samples) {\n              setProcessState({\n                samplesRemoved,\n                samplesProcessed,\n                complete: false,\n              })\n              samplesProcessed += 1\n              const requestUrl = sample.imageUrl\n              if (!requestUrl || !requestUrl.startsWith(\"http\")) {\n                samples.push(sample)\n                continue\n              }\n              if (await isUrlValid(requestUrl)) {\n                samples.push(sample)\n                continue\n              }\n              samplesRemoved += 1\n            }\n\n            setProcessState({\n              samplesRemoved,\n              samplesProcessed,\n              complete: true,\n            })\n            setFilteredSamples(samples)\n          },\n        },\n        complete && {\n          text: \"Remove Invalid Samples\",\n          onClick: async () => {\n            onChangeDataset(setIn(dataset, [\"samples\"], filteredSamples))\n          },\n        },\n      ].filter(Boolean)}\n    >\n      <ProgressBar\n        progress={\n          complete\n            ? 100\n            : (samplesProcessed / (dataset.samples?.length + 1)) * 100\n        }\n      />\n      <div>\n        Samples processed: {samplesProcessed}\n        <br />\n        Samples to be removed: {samplesRemoved}\n        <br />\n        Total samples: {dataset.samples?.length}\n      </div>\n      <div style={{ marginTop: 16 }}>\n        This transformation will try to request each sample's url, if any of\n        them do not return a valid status code the sample will be removed from\n        the dataset.\n      </div>\n    </SimpleDialog>\n  )\n}\n","// @flow\nimport React, { createContext, useContext, useEffect, useReducer } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\nimport classNames from \"classnames\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"flex-start\",\n    pointerEvents: \"none\",\n  },\n  msgBox: {\n    display: \"flex\",\n    backgroundColor: colors.blue[700],\n    fontSize: 12,\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4,\n    boxShadow: \"0px 3px 8px rgba(0,0,0,0.5)\",\n    \"&.warning\": {\n      backgroundColor: colors.orange[700],\n    },\n    \"&.error\": {\n      backgroundColor: colors.red[700],\n    },\n  },\n})\n\nconst REFRESH_INTERVAL = 100\n\nconst ToastContext = createContext({})\n\nexport const useToasts = () => {\n  const { addToast } = useContext(ToastContext)\n\n  return { addToast }\n}\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, changeToasts] = useReducer((state = [], action) => {\n    if (action.type === \"add\") {\n      const fullLife =\n        action.messageType === \"info\"\n          ? 2000\n          : action.messageType === \"warning\"\n          ? 5000\n          : 5000\n\n      return state.concat([\n        {\n          id: Math.random().toString().split(\".\")[1],\n          message: action.message,\n          type: action.messageType,\n          life: fullLife,\n          fullLife,\n        },\n      ])\n    } else if (action.type === \"tick\") {\n      return state\n        .map((msg) => ({\n          ...msg,\n          life: msg.life - REFRESH_INTERVAL,\n        }))\n        .filter((msg) => msg.life > 0)\n    }\n    return state\n  }, [])\n  const c = useStyles()\n\n  useEffect(() => {\n    if (toasts.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeToasts({ type: \"tick\" })\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [toasts])\n\n  const addToast = (message: string, messageType: string = \"info\") =>\n    changeToasts({ type: \"add\", message, messageType })\n\n  return (\n    <>\n      <ToastContext.Provider value={{ toasts, addToast }}>\n        {children}\n      </ToastContext.Provider>\n      <div className={c.root}>\n        {toasts.map((msg) => (\n          <Collapse key={msg.id} in={msg.life < msg.fullLife}>\n            <Fade in={msg.life > 600}>\n              <div className={classNames(c.msgBox, msg.type)}>\n                {msg.message}\n              </div>\n            </Fade>\n          </Collapse>\n        ))}\n      </div>\n    </>\n  )\n}\n","import { useEffect } from \"react\"\nimport { useAppConfig } from \"../AppConfig\"\nimport { atom, useRecoilState, useRecoilValue } from \"recoil\"\nimport { useToasts } from \"../Toasts\"\n\nconst pluginsState = atom({\n  key: \"plugins\",\n  default: [],\n})\n\nexport const usePlugins = () => useRecoilValue(pluginsState)\n\nexport default () => {\n  // eslint-disable-next-line\n  const [plugins, setPlugins] = useRecoilState(pluginsState)\n  const { fromConfig } = useAppConfig()\n  const { addToast } = useToasts()\n\n  useEffect(() => {\n    async function loadPlugins() {\n      const pluginUrls = (fromConfig(\"pluginUrls\") || \"\")\n        .split(\"\\n\")\n        .filter(Boolean)\n\n      const plugins = []\n\n      for (const pluginUrl of pluginUrls) {\n        try {\n          const {\n            transformPlugins,\n            importPlugins,\n            interfacePlugins,\n            authenticationPlugins,\n          } = (await import(/* webpackIgnore: true */ pluginUrl)).default()\n\n          plugins.push(\n            ...transformPlugins.map((p) => ({ ...p, type: \"transform\" }))\n          )\n          plugins.push(...importPlugins.map((p) => ({ ...p, type: \"import\" })))\n          plugins.push(\n            ...interfacePlugins.map((p) => ({ ...p, type: \"interface\" }))\n          )\n          plugins.push(\n            ...authenticationPlugins.map((p) => ({\n              ...p,\n              type: \"authentication\",\n            }))\n          )\n        } catch (e) {\n          // TODO display broken plugin more nicely, using regex extraction of\n          // package and version\n          addToast(\n            \"Couldn't load plugin: \" + pluginUrl + \"\\n\\n\" + e.toString(),\n            \"error\"\n          )\n        }\n      }\n      setPlugins(plugins)\n    }\n    loadPlugins()\n    // eslint-disable-next-line\n  }, [fromConfig(\"pluginUrls\")])\n}\n","import React, { useEffect, useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { setIn } from \"seamless-immutable\"\n\nexport default ({\n  open,\n  onChangeDataset,\n  onClose,\n  dataset,\n  name,\n  renderDialog,\n}) => {\n  const [ref, setRef] = useState()\n  const [actions, setActions] = useState([])\n  useEffect(() => {\n    if (!open) return\n    if (!ref) return\n\n    let actions = []\n\n    renderDialog({\n      elm: ref,\n      onSuccess: () => {\n        onClose()\n      },\n      addAction: (action) => {\n        actions.push(action)\n        setActions(actions)\n      },\n      removeAction: (action) => {\n        actions = actions.filter((a) => a !== action)\n        setActions(actions)\n      },\n      dataset,\n      setInDataset: (path, val) => {\n        onChangeDataset(setIn(dataset, path, val))\n      },\n    })\n    //eslint-disable-next-line\n  }, [open, ref])\n\n  return (\n    <SimpleDialog title={name} open={open} onClose={onClose} actions={actions}>\n      <div ref={(newRef) => setRef(newRef)} />\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ImageIcon from \"@material-ui/icons/Image\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport * as colors from \"@material-ui/core/colors\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport classnames from \"classnames\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport TransformVideoKeyframesDialog from \"../TransformVideoKeyframesDialog\"\nimport DownloadURLsDialog from \"../DownloadURLsDialog\"\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\nimport CollectionsIcon from \"@material-ui/icons/Collections\"\nimport TransformVideoFramesToImagesDialog from \"../TransformVideoFramesToImagesDialog\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport TransformLocalFilesToWebURLs from \"../TransformLocalFilesToWebURLs\"\nimport TransformImageSamplesIntoSegmentsDialog from \"../TransformImageSamplesIntoSegmentsDialog\"\nimport TransformSegmentsIntoImageSamplesDialog from \"../TransformSegmentsIntoImageSamplesDialog\"\nimport TransformRemoveInvalidSamplesDialog from \"../TransformRemoveInvalidSamplesDialog\"\nimport { usePlugins } from \"../PluginProvider\"\nimport PluginDialog from \"../PluginDialog\"\n\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\"\nimport ComputerIcon from \"@material-ui/icons/Computer\"\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\"\nimport LanguageIcon from \"@material-ui/icons/Language\"\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\"\nimport GridOnIcon from \"@material-ui/icons/GridOn\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200],\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 36,\n    height: 36,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400],\n    },\n  },\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500],\n  },\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({\n  Icon1,\n  Icon2,\n  desktopOnly,\n  children,\n  dialog,\n  disabled,\n  onClick,\n}) => {\n  const isDesktop = useIsDesktop()\n  const posthog = usePosthog()\n  const { t } = useTranslation()\n\n  disabled =\n    disabled === undefined ? (desktopOnly ? !isDesktop : false) : disabled\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => {\n              posthog.capture(\"transform_button_clicked\", {\n                transform_button: dialog || children,\n              })\n              if (onClick) return onClick()\n              onChangeDialog(dialog)\n            }}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              {Icon1 && Icon2 ? (\n                <>\n                  <Icon1 className={classnames(\"icon\", { disabled })} />\n                  <ArrowForwardIcon\n                    className={classnames(\"icon\", { disabled })}\n                  />\n                  <Icon2 className={classnames(\"icon\", { disabled })} />\n                </>\n              ) : (\n                <Icon1 className={classnames(\"icon\", { disabled })} />\n              )}\n              <div>{children}</div>\n              {desktopOnly && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  {t(\"desktop-only\").toUpperCase()}\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nexport default ({ dataset, onChangeDataset }) => {\n  const { t } = useTranslation()\n  const [selectedDialog, changeDialog] = useState()\n  const onChangeDialog = async (dialog) => {\n    switch (dialog) {\n      case \"convert-keyframes-to-samples\": {\n        break\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n  const closeDialog = () => changeDialog(null)\n  const [openPlugin, setOpenPlugin] = useState(null)\n  const plugins = usePlugins()\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          disabled={dataset.interface.type !== \"video_segmentation\"}\n          dialog=\"convert-keyframes-to-samples\"\n          Icon1={OndemandVideoIcon}\n          Icon2={CollectionsIcon}\n        >\n          {t(\"convert-video-keyframes-to-samples\")}\n        </Button>\n        <Button\n          desktopOnly\n          dialog=\"convert-local-files-to-web-urls\"\n          Icon1={ComputerIcon}\n          Icon2={LanguageIcon}\n        >\n          {t(\"transform-local-files-to-web-urls\")}\n        </Button>\n        <Button desktopOnly dialog=\"download-urls\" Icon1={GetAppIcon}>\n          {t(\"download\")} URLs\n        </Button>\n        <Button\n          desktopOnly\n          dialog=\"convert-video-frames-to-images\"\n          Icon1={OndemandVideoIcon}\n          Icon2={ImageIcon}\n        >\n          {t(\"convert-video-frames-to-images\")}\n        </Button>\n        <Button\n          dialog=\"split-image-samples-into-segments\"\n          Icon1={CheckBoxOutlineBlankIcon}\n          Icon2={GridOnIcon}\n        >\n          Split Image Samples into Segments\n        </Button>\n        <Button\n          dialog=\"combine-segments-into-image-samples\"\n          Icon1={GridOnIcon}\n          Icon2={CheckBoxOutlineBlankIcon}\n        >\n          Combine Segments into Image Samples\n        </Button>\n        <Button\n          dialog=\"remove-invalid-samples\"\n          Icon1={ImageIcon}\n          Icon2={HighlightOffIcon}\n        >\n          Remove Invalid Samples\n        </Button>\n        {plugins.map((plugin) => (\n          <Button\n            key={plugin.name}\n            Icon1={PeopleAltIcon}\n            Icon2={PeopleAltIcon}\n            onClick={() => setOpenPlugin(plugin)}\n          >\n            {plugin.name}\n          </Button>\n        ))}\n        {openPlugin && (\n          <PluginDialog\n            open={Boolean(openPlugin)}\n            onClose={() => setOpenPlugin(null)}\n            {...openPlugin}\n            dataset={dataset}\n            onChangeDataset={(...args) => {\n              onChangeDataset(...args)\n              closeDialog()\n            }}\n          />\n        )}\n        <TransformRemoveInvalidSamplesDialog\n          open={selectedDialog === \"remove-invalid-samples\"}\n          onClose={closeDialog}\n          dataset={dataset}\n          onChangeDataset={(...args) => {\n            onChangeDataset(...args)\n            closeDialog()\n          }}\n        />\n        <TransformVideoKeyframesDialog\n          open={selectedDialog === \"convert-keyframes-to-samples\"}\n          onClose={closeDialog}\n          dataset={dataset}\n          onChangeDataset={(...args) => {\n            onChangeDataset(...args)\n            closeDialog()\n          }}\n        />\n        <DownloadURLsDialog\n          open={selectedDialog === \"download-urls\"}\n          onClose={closeDialog}\n          dataset={dataset}\n          desktopOnly\n          onChangeDataset={onChangeDataset}\n        ></DownloadURLsDialog>\n        <TransformLocalFilesToWebURLs\n          dataset={dataset}\n          onClose={closeDialog}\n          onChangeDataset={onChangeDataset}\n          desktopOnly\n          open={selectedDialog === \"convert-local-files-to-web-urls\"}\n        ></TransformLocalFilesToWebURLs>\n        <TransformVideoFramesToImagesDialog\n          open={selectedDialog === \"convert-video-frames-to-images\"}\n          onClose={closeDialog}\n          dataset={dataset}\n          desktopOnly\n          onChangeDataset={onChangeDataset}\n        ></TransformVideoFramesToImagesDialog>\n        <TransformImageSamplesIntoSegmentsDialog\n          dataset={dataset}\n          open={selectedDialog === \"split-image-samples-into-segments\"}\n          onClose={closeDialog}\n          onChangeDataset={onChangeDataset}\n        ></TransformImageSamplesIntoSegmentsDialog>\n        <TransformSegmentsIntoImageSamplesDialog\n          dataset={dataset}\n          open={selectedDialog === \"combine-segments-into-image-samples\"}\n          onClose={closeDialog}\n          onChangeDataset={onChangeDataset}\n        ></TransformSegmentsIntoImageSamplesDialog>\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React, { useMemo, useState } from \"react\"\nimport DataTable from \"react-data-table-component\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport SampleGrid from \"../SampleGrid\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport AppsIcon from \"@material-ui/icons/Apps\"\nimport SlideshowIcon from \"@material-ui/icons/Slideshow\"\nimport TableChartIcon from \"@material-ui/icons/TableChart\"\nimport Box from \"@material-ui/core/Box\"\nimport ImportIcon from \"@material-ui/icons/Publish\"\nimport ImportPage from \"../ImportPage\"\nimport TransformPage from \"../TransformPage\"\nimport useIsDesktop from \"../../utils/use-is-desktop.js\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  padding: 16,\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  boxSizing: \"border-box\",\n})\n\nconst SampleCounter = styled(\"div\")({\n  fontSize: 14,\n  color: colors.grey[600],\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  alignItems: \"center\",\n  flexGrow: 1,\n})\n\nconst ExpandedRowContainer = styled(\"div\")({\n  padding: 8,\n  border: \"#888 solid 1px\",\n  borderTop: \"none\",\n  borderRadius: 4,\n  borderTopLeftRadius: 0,\n  borderTopRightRadius: 0,\n  boxShadow: \"inset 0 3px 3px rgba(0,0,0,0.2)\",\n})\nconst ExpandedRowTitle = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n})\nconst ExpandedRowCode = styled(\"pre\")({ whiteSpace: \"pre-wrap\", fontSize: 11 })\n\nconst ExpandedRow = ({ data }) => {\n  const { annotation, ...input } = data\n\n  return (\n    <ExpandedRowContainer>\n      <Grid spacing={2} container>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>samples[{data.index}]:</ExpandedRowTitle>\n          <ExpandedRowCode>{JSON.stringify(input, null, \"  \")}</ExpandedRowCode>\n        </Grid>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>samples[{data.index}].annotation:</ExpandedRowTitle>\n          <ExpandedRowCode>\n            {JSON.stringify(annotation, null, \"  \")}\n          </ExpandedRowCode>\n        </Grid>\n      </Grid>\n    </ExpandedRowContainer>\n  )\n}\n\nexport const SamplesView = ({\n  file,\n  dataset,\n  openSampleInputEditor,\n  openSampleLabelEditor,\n  deleteSample,\n  onChangeDataset,\n  onChangeFile,\n  authConfig,\n  user,\n}) => {\n  const isDesktop = useIsDesktop()\n  const [currentTab, changeTabState] = useState(\n    (dataset.samples || []).length === 0\n      ? \"import\"\n      : window.localStorage.lastSampleTab || \"grid\"\n  )\n  const changeTab = (tab) => {\n    changeTabState(tab)\n    window.localStorage.lastSampleTab = tab\n  }\n  const columns = useMemo(() => {\n    if (!dataset.samples) return []\n    const columns = [\n      {\n        name: \"Index\",\n        selector: \"index\",\n        sortable: true,\n      },\n    ]\n    const knownKeys = new Set()\n    for (const td of dataset.samples) {\n      for (const key in td) {\n        if (!knownKeys.has(key)) {\n          columns.push({\n            name: key,\n            selector: key,\n            cell: (row) =>\n              typeof row[key] !== \"object\"\n                ? row[key]\n                : JSON.stringify(row[key]).slice(0, 30) + \"...\",\n          })\n          knownKeys.add(key)\n        }\n      }\n    }\n    columns.push({\n      name: \"Edit\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised onClick={() => openSampleInputEditor(row.index)}>\n          <EditIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    columns.push({\n      name: \"Label\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised onClick={() => openSampleLabelEditor(row.index)}>\n          <BorderColorIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    columns.push({\n      name: \"Delete\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised primary onClick={() => deleteSample(row.index)}>\n          <DeleteIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    return columns\n  }, [\n    dataset.samples,\n    deleteSample,\n    openSampleInputEditor,\n    openSampleLabelEditor,\n  ])\n\n  const data = useMemo(() => {\n    if (!dataset.samples) return []\n    return dataset.samples.map((td, i) => ({\n      ...td,\n      index: i,\n    }))\n  }, [dataset.samples])\n  return (\n    <Container>\n      <Box display=\"flex\">\n        <Tabs value={currentTab} onChange={(e, newTab) => changeTab(newTab)}>\n          <Tab icon={<ImportIcon />} label=\"Import\" value=\"import\" />\n          <Tab icon={<SlideshowIcon />} label=\"Transform\" value=\"transform\" />\n          <Tab icon={<AppsIcon />} label=\"Grid\" value=\"grid\" />\n          <Tab icon={<TableChartIcon />} label=\"Table\" value=\"table\" />\n        </Tabs>\n        <SampleCounter>\n          {(dataset.samples || []).length} Samples\n          <br />\n          {(dataset.samples || []).filter((s) => s.annotation).length} Labels\n        </SampleCounter>\n      </Box>\n      <Box paddingTop={2} />\n      <Box flexGrow={1}>\n        {currentTab === \"import\" && (\n          <ImportPage\n            file={file}\n            isDesktop={isDesktop}\n            onChangeFile={(file) => onChangeFile(file)}\n            onImportPageShouldExit={() => changeTab(\"grid\")}\n            onChangeDataset={(newOHA) => onChangeDataset(newOHA)}\n            dataset={dataset}\n            authConfig={authConfig}\n            user={user}\n          />\n        )}\n        {currentTab === \"transform\" && (\n          <TransformPage\n            isDesktop={isDesktop}\n            dataset={dataset}\n            onChangeDataset={(dataset, shouldViewChange) => {\n              onChangeDataset(dataset)\n              if (shouldViewChange) {\n                changeTab(\"grid\")\n              }\n            }}\n          />\n        )}\n        {currentTab === \"grid\" && (\n          <SampleGrid\n            tablePaginationPadding={6}\n            count={(dataset.samples || []).length}\n            samples={dataset.samples || []}\n            completed={(dataset.samples || []).map((s) =>\n              Boolean(s.annotation)\n            )}\n            onClick={(sampleIndex) => {\n              openSampleLabelEditor(sampleIndex)\n            }}\n          />\n        )}\n        {currentTab === \"table\" && (\n          <DataTable\n            title=\"Samples\"\n            expandableRowsComponent={<ExpandedRow />}\n            expandableRows\n            dense\n            columns={columns}\n            data={data}\n            pagination\n            paginationPerPage={10}\n            paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n          />\n        )}\n      </Box>\n    </Container>\n  )\n}\nexport default SamplesView\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn, asMutable } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"],\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an image, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () =>\n      asMutable(\n        {\n          multipleRegions: Boolean(\n            iface.multipleRegions || iface.multipleRegions === undefined\n          ),\n          multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n          regionTypesAllowed: iface.regionTypesAllowed,\n          labels:\n            (iface.labels || []).map((a) =>\n              typeof a === \"string\" ? { id: a, description: a } : a\n            ) || [],\n        },\n        { deep: true }\n      ),\n    [iface]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\n\nconst maxClusterPresets = {\n  low: 1000,\n  medium: 8000,\n  high: 64000,\n}\nconst maxClusterPresetsRev = Object.entries(maxClusterPresets).reduce(\n  (acc, curr) => {\n    acc[curr[1]] = curr[0]\n    return acc\n  },\n  {}\n)\n\nconst form = {\n  questions: [\n    {\n      name: \"labels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an image, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n    {\n      name: \"description\",\n      title: \"Sidebar Description\",\n      description: \"Any instructions or notes in markdown.\",\n      type: \"text\",\n    },\n    {\n      name: \"autosegMode\",\n      type: \"dropdown\",\n      title: \"Automatic Segmentation Engine\",\n      choices: [\"simple\", \"autoseg\"],\n    },\n    {\n      name: \"autosegPreset\",\n      type: \"dropdown\",\n      visibleIf: \"{autosegMode}='autoseg'\",\n      title: \"Super Pixel Quality\",\n      choices: [\"low\", \"medium\", \"high\", \"custom\"],\n    },\n    {\n      name: \"autosegMaxClusters\",\n      type: \"slider\",\n      visibleIf: \"{autosegPreset}='custom'\",\n      title: \"Total Super Pixels\",\n      min: 10,\n      max: 100000,\n      step: 10,\n      defaultValue: 1000,\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      description: iface.description,\n      labels:\n        (iface.labels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n      autosegMode: iface.autoSegmentationEngine?.mode,\n      autosegPreset:\n        maxClusterPresetsRev[\n          iface.autoSegmentationEngine?.maxClusters || 1000\n        ] || \"custom\",\n      autosegMaxClusters: iface.autoSegmentationEngine?.maxClusters || 1000,\n    }),\n    [iface]\n  )\n  return (\n    <>\n      <Survey\n        noActions\n        variant=\"flat\"\n        defaultAnswers={defaultAnswers}\n        onQuestionChange={(questionId, newValue, answers) => {\n          onChange({\n            ...iface,\n            description: answers.description,\n            labels: answers.labels,\n            autoSegmentationEngine: {\n              mode: answers.autosegMode,\n              maxClusters:\n                answers.autosegPreset === \"custom\"\n                  ? answers.autosegMaxClusters\n                  : maxClusterPresets[answers.autosegPreset],\n            },\n          })\n        }}\n        form={form}\n      />\n    </>\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"multiple\",\n      title: \"Allow multiple classifications per image?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multiple: iface.multiple ? iface.multiple : false,\n      labels:\n        (iface.labels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n    }),\n    [iface.labels, iface.multiple]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"multiple\",\n      title: \"Allow Multiple Classifications\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        { cellType: \"text\", name: \"displayName\", title: \"Display Name\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multiple: false,\n      labels:\n        (iface.labels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, displayName: a, description: a } : a\n        ) || [],\n    }),\n    [iface.labels]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","import React from \"react\"\nimport Survey from \"material-survey/components/Survey\"\n\n// https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2021620\nconst languages = [\n  { value: \"ab\", text: \"Abkhazian\" },\n  { value: \"aa\", text: \"Afar\" },\n  { value: \"af\", text: \"Afrikaans\" },\n  { value: \"ak\", text: \"Akan\" },\n  { value: \"sq\", text: \"Albanian\" },\n  { value: \"am\", text: \"Amharic\" },\n  { value: \"ar\", text: \"Arabic\" },\n  { value: \"an\", text: \"Aragonese\" },\n  { value: \"hy\", text: \"Armenian\" },\n  { value: \"as\", text: \"Assamese\" },\n  { value: \"av\", text: \"Avaric\" },\n  { value: \"ae\", text: \"Avestan\" },\n  { value: \"ay\", text: \"Aymara\" },\n  { value: \"az\", text: \"Azerbaijani\" },\n  { value: \"bm\", text: \"Bambara\" },\n  { value: \"ba\", text: \"Bashkir\" },\n  { value: \"eu\", text: \"Basque\" },\n  { value: \"be\", text: \"Belarusian\" },\n  { value: \"bn\", text: \"Bengali\" },\n  { value: \"bh\", text: \"Bihari languages\" },\n  { value: \"bi\", text: \"Bislama\" },\n  { value: \"bs\", text: \"Bosnian\" },\n  { value: \"br\", text: \"Breton\" },\n  { value: \"bg\", text: \"Bulgarian\" },\n  { value: \"my\", text: \"Burmese\" },\n  { value: \"ca\", text: \"Catalan, Valencian\" },\n  { value: \"km\", text: \"Central Khmer\" },\n  { value: \"ch\", text: \"Chamorro\" },\n  { value: \"ce\", text: \"Chechen\" },\n  { value: \"ny\", text: \"Chichewa, Chewa, Nyanja\" },\n  { value: \"zh\", text: \"Chinese\" },\n  { value: \"cu\", text: \"Church Slavonic, Old Bulgarian, Old Church Slavonic\" },\n  { value: \"cv\", text: \"Chuvash\" },\n  { value: \"kw\", text: \"Cornish\" },\n  { value: \"co\", text: \"Corsican\" },\n  { value: \"cr\", text: \"Cree\" },\n  { value: \"hr\", text: \"Croatian\" },\n  { value: \"cs\", text: \"Czech\" },\n  { value: \"da\", text: \"Danish\" },\n  { value: \"dv\", text: \"Divehi, Dhivehi, Maldivian\" },\n  { value: \"nl\", text: \"Dutch, Flemish\" },\n  { value: \"dz\", text: \"Dzongkha\" },\n  { value: \"en\", text: \"English\" },\n  { value: \"eo\", text: \"Esperanto\" },\n  { value: \"et\", text: \"Estonian\" },\n  { value: \"ee\", text: \"Ewe\" },\n  { value: \"fo\", text: \"Faroese\" },\n  { value: \"fj\", text: \"Fijian\" },\n  { value: \"fi\", text: \"Finnish\" },\n  { value: \"fr\", text: \"French\" },\n  { value: \"ff\", text: \"Fulah\" },\n  { value: \"gd\", text: \"Gaelic, Scottish Gaelic\" },\n  { value: \"gl\", text: \"Galician\" },\n  { value: \"lg\", text: \"Ganda\" },\n  { value: \"ka\", text: \"Georgian\" },\n  { value: \"de\", text: \"German\" },\n  { value: \"ki\", text: \"Gikuyu, Kikuyu\" },\n  { value: \"el\", text: \"Greek (Modern)\" },\n  { value: \"kl\", text: \"Greenlandic, Kalaallisut\" },\n  { value: \"gn\", text: \"Guarani\" },\n  { value: \"gu\", text: \"Gujarati\" },\n  { value: \"ht\", text: \"Haitian, Haitian Creole\" },\n  { value: \"ha\", text: \"Hausa\" },\n  { value: \"he\", text: \"Hebrew\" },\n  { value: \"hz\", text: \"Herero\" },\n  { value: \"hi\", text: \"Hindi\" },\n  { value: \"ho\", text: \"Hiri Motu\" },\n  { value: \"hu\", text: \"Hungarian\" },\n  { value: \"is\", text: \"Icelandic\" },\n  { value: \"io\", text: \"Ido\" },\n  { value: \"ig\", text: \"Igbo\" },\n  { value: \"id\", text: \"Indonesian\" },\n  {\n    value: \"ia\",\n    text: \"Interlingua (International Auxiliary Language Association)\",\n  },\n  { value: \"ie\", text: \"Interlingue\" },\n  { value: \"iu\", text: \"Inuktitut\" },\n  { value: \"ik\", text: \"Inupiaq\" },\n  { value: \"ga\", text: \"Irish\" },\n  { value: \"it\", text: \"Italian\" },\n  { value: \"ja\", text: \"Japanese\" },\n  { value: \"jv\", text: \"Javanese\" },\n  { value: \"kn\", text: \"Kannada\" },\n  { value: \"kr\", text: \"Kanuri\" },\n  { value: \"ks\", text: \"Kashmiri\" },\n  { value: \"kk\", text: \"Kazakh\" },\n  { value: \"rw\", text: \"Kinyarwanda\" },\n  { value: \"kv\", text: \"Komi\" },\n  { value: \"kg\", text: \"Kongo\" },\n  { value: \"ko\", text: \"Korean\" },\n  { value: \"kj\", text: \"Kwanyama, Kuanyama\" },\n  { value: \"ku\", text: \"Kurdish\" },\n  { value: \"ky\", text: \"Kyrgyz\" },\n  { value: \"lo\", text: \"Lao\" },\n  { value: \"la\", text: \"Latin\" },\n  { value: \"lv\", text: \"Latvian\" },\n  { value: \"lb\", text: \"Letzeburgesch, Luxembourgish\" },\n  { value: \"li\", text: \"Limburgish, Limburgan, Limburger\" },\n  { value: \"ln\", text: \"Lingala\" },\n  { value: \"lt\", text: \"Lithuanian\" },\n  { value: \"lu\", text: \"Luba-Katanga\" },\n  { value: \"mk\", text: \"Macedonian\" },\n  { value: \"mg\", text: \"Malagasy\" },\n  { value: \"ms\", text: \"Malay\" },\n  { value: \"ml\", text: \"Malayalam\" },\n  { value: \"mt\", text: \"Maltese\" },\n  { value: \"gv\", text: \"Manx\" },\n  { value: \"mi\", text: \"Maori\" },\n  { value: \"mr\", text: \"Marathi\" },\n  { value: \"mh\", text: \"Marshallese\" },\n  { value: \"ro\", text: \"Moldovan, Moldavian, Romanian\" },\n  { value: \"mn\", text: \"Mongolian\" },\n  { value: \"na\", text: \"Nauru\" },\n  { value: \"nv\", text: \"Navajo, Navaho\" },\n  { value: \"nd\", text: \"Northern Ndebele\" },\n  { value: \"ng\", text: \"Ndonga\" },\n  { value: \"ne\", text: \"Nepali\" },\n  { value: \"se\", text: \"Northern Sami\" },\n  { value: \"no\", text: \"Norwegian\" },\n  { value: \"nb\", text: \"Norwegian Bokmål\" },\n  { value: \"nn\", text: \"Norwegian Nynorsk\" },\n  { value: \"ii\", text: \"Nuosu, Sichuan Yi\" },\n  { value: \"oc\", text: \"Occitan (post 1500)\" },\n  { value: \"oj\", text: \"Ojibwa\" },\n  { value: \"or\", text: \"Oriya\" },\n  { value: \"om\", text: \"Oromo\" },\n  { value: \"os\", text: \"Ossetian, Ossetic\" },\n  { value: \"pi\", text: \"Pali\" },\n  { value: \"pa\", text: \"Panjabi, Punjabi\" },\n  { value: \"ps\", text: \"Pashto, Pushto\" },\n  { value: \"fa\", text: \"Persian\" },\n  { value: \"pl\", text: \"Polish\" },\n  { value: \"pt\", text: \"Portuguese\" },\n  { value: \"qu\", text: \"Quechua\" },\n  { value: \"rm\", text: \"Romansh\" },\n  { value: \"rn\", text: \"Rundi\" },\n  { value: \"ru\", text: \"Russian\" },\n  { value: \"sm\", text: \"Samoan\" },\n  { value: \"sg\", text: \"Sango\" },\n  { value: \"sa\", text: \"Sanskrit\" },\n  { value: \"sc\", text: \"Sardinian\" },\n  { value: \"sr\", text: \"Serbian\" },\n  { value: \"sn\", text: \"Shona\" },\n  { value: \"sd\", text: \"Sindhi\" },\n  { value: \"si\", text: \"Sinhala, Sinhalese\" },\n  { value: \"sk\", text: \"Slovak\" },\n  { value: \"sl\", text: \"Slovenian\" },\n  { value: \"so\", text: \"Somali\" },\n  { value: \"st\", text: \"Sotho, Southern\" },\n  { value: \"nr\", text: \"South Ndebele\" },\n  { value: \"es\", text: \"Spanish, Castilian\" },\n  { value: \"su\", text: \"Sundanese\" },\n  { value: \"sw\", text: \"Swahili\" },\n  { value: \"ss\", text: \"Swati\" },\n  { value: \"sv\", text: \"Swedish\" },\n  { value: \"tl\", text: \"Tagalog\" },\n  { value: \"ty\", text: \"Tahitian\" },\n  { value: \"tg\", text: \"Tajik\" },\n  { value: \"ta\", text: \"Tamil\" },\n  { value: \"tt\", text: \"Tatar\" },\n  { value: \"te\", text: \"Telugu\" },\n  { value: \"th\", text: \"Thai\" },\n  { value: \"bo\", text: \"Tibetan\" },\n  { value: \"ti\", text: \"Tigrinya\" },\n  { value: \"to\", text: \"Tonga (Tonga Islands)\" },\n  { value: \"ts\", text: \"Tsonga\" },\n  { value: \"tn\", text: \"Tswana\" },\n  { value: \"tr\", text: \"Turkish\" },\n  { value: \"tk\", text: \"Turkmen\" },\n  { value: \"tw\", text: \"Twi\" },\n  { value: \"ug\", text: \"Uighur, Uyghur\" },\n  { value: \"uk\", text: \"Ukrainian\" },\n  { value: \"ur\", text: \"Urdu\" },\n  { value: \"uz\", text: \"Uzbek\" },\n  { value: \"ve\", text: \"Venda\" },\n  { value: \"vi\", text: \"Vietnamese\" },\n  { value: \"vo\", text: \"Volap_k\" },\n  { value: \"wa\", text: \"Walloon\" },\n  { value: \"cy\", text: \"Welsh\" },\n  { value: \"fy\", text: \"Western Frisian\" },\n  { value: \"wo\", text: \"Wolof\" },\n  { value: \"xh\", text: \"Xhosa\" },\n  { value: \"yi\", text: \"Yiddish\" },\n  { value: \"yo\", text: \"Yoruba\" },\n  { value: \"za\", text: \"Zhuang, Chuang\" },\n  { value: \"zu\", text: \"Zulu\" },\n]\n\nconst form = {\n  questions: [\n    {\n      name: \"transcriptionType\",\n      title: \"Transcription Type\",\n      type: \"dropdown\",\n      choices: [\"simple\", \"proper\"],\n    },\n    {\n      name: \"phraseBank\",\n      title: \"Phrase Bank\",\n      description: \"URL of single-column CSV or TXT file with allowed phrases\",\n      type: \"text\",\n    },\n    {\n      name: \"onlyUseWordsInPhraseBank\",\n      title: \"Only Use Words In Phrase Bank\",\n      type: \"boolean\",\n    },\n    {\n      name: \"language\",\n      title: \"Language\",\n      type: \"dropdown\",\n      // https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2858621\n      choices: languages,\n    },\n    {\n      name: \"description\",\n      title: \"Description\",\n      type: \"multiline-text\",\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        if (newValue.value) {\n          onChange({ ...iface, [questionId]: newValue.value })\n        } else {\n          onChange({ ...iface, [questionId]: newValue })\n        }\n      }}\n      form={form}\n    />\n  )\n}\n","import React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    // TODO uncomment when description can be seen in the interface somewhere\n    // {\n    //   name: \"description\",\n    //   title: \"Description\",\n    //   type: \"multiline-text\",\n    // },\n    // TODO enable when we support overlap\n    // {\n    //   name: \"overlapAllowed\",\n    //   title: \"Overlap Allowed\",\n    //   type: \"boolean\",\n    // },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      type: \"matrixdynamic\",\n      hasOther: true,\n      columns: [\n        {\n          cellType: \"text\",\n          name: \"id\",\n          title: \"ID\",\n        },\n        {\n          cellType: \"text\",\n          name: \"displayName\",\n          title: \"Display Name\",\n        },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      description: iface.description,\n      overlapAllowed: Boolean(\n        iface.overlapAllowed || iface.overlapAllowed === undefined\n      ),\n      labels: (iface.labels || []).map((column) =>\n        typeof column === \"string\"\n          ? {\n              id: column,\n              displayName: column,\n              description: column,\n            }\n          : column\n      ),\n    }),\n    [iface]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n      defaultAnswers={defaultAnswers}\n    />\n  )\n}\n","import React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"entityLabels\",\n      title: \"Entity Labels\",\n      type: \"matrixdynamic\",\n      columns: [\n        {\n          cellType: \"text\",\n          name: \"id\",\n          title: \"ID\",\n        },\n        {\n          cellType: \"text\",\n          name: \"displayName\",\n          title: \"Display Name\",\n        },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description\",\n        },\n      ],\n    },\n    {\n      name: \"relationLabels\",\n      title: \"Relation Labels\",\n      type: \"matrixdynamic\",\n      columns: [\n        {\n          cellType: \"text\",\n          name: \"id\",\n          title: \"ID\",\n        },\n        {\n          cellType: \"text\",\n          name: \"displayName\",\n          title: \"Display Name\",\n        },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      entityLabels: (iface.entityLabels || []).map((column) =>\n        typeof column === \"string\"\n          ? {\n              id: column,\n              displayName: column,\n              description: column,\n            }\n          : column\n      ),\n      relationLabels: (iface.relationLabels || []).map((column) =>\n        typeof column === \"string\"\n          ? {\n              id: column,\n              displayName: column,\n              description: column,\n            }\n          : column\n      ),\n    }),\n    [iface]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n      defaultAnswers={defaultAnswers}\n    />\n  )\n}\n","// @flow\n\nimport React, { useRef, useState } from \"react\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\"\nimport CancelIcon from \"@material-ui/icons/Cancel\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Survey from \"material-survey/components/Survey\"\nimport Grid from \"@material-ui/core/Grid\"\nimport { setIn } from \"seamless-immutable\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst ButtonsContainer = styled(\"div\")({\n  textAlign: \"right\",\n})\nconst NoQuestions = styled(\"div\")({\n  fontSize: 18,\n  color: colors.grey[500],\n  fontWeight: \"bold\",\n  textAlign: \"center\",\n  padding: 16,\n})\n\nconst Question = styled(\"div\")({\n  position: \"relative\",\n  padding: 16,\n  margin: 16,\n  borderLeft: `4px solid ${colors.blue[400]}`,\n  // backgroundColor: colors.grey[50],\n  borderRadius: 4,\n  paddingRight: 64,\n  \"& .quitButton\": {\n    position: \"absolute\",\n    right: 4,\n    top: 4,\n  },\n  \"& > *\": {\n    margin: 8,\n  },\n})\nconst PreviewHeader = styled(\"div\")({\n  fontSize: 12,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  textTransform: \"uppercase\",\n  margin: 16,\n  marginBottom: 32,\n})\n\nconst StyledButton = styled(Button)({\n  position: \"relative\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n  },\n})\n\nexport default ({ iface, onChange }) => {\n  const anchorEl = useRef()\n  const [menuOpen, changeMenuOpen] = useState(false)\n  const { questions = [] } = iface.surveyjs || {}\n\n  const { t } = useTranslation()\n\n  return (\n    <div>\n      {questions.length === 0 ? (\n        <NoQuestions>No Inputs, Click Add Input Below</NoQuestions>\n      ) : (\n        questions.map((q, i) => (\n          <Question key={i}>\n            <div style={{ display: \"flex\" }}>\n              <TextField\n                variant=\"outlined\"\n                label=\"Name / Identifier\"\n                value={q.name || \"\"}\n                onChange={(e) => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"name\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n              <TextField\n                style={{ marginLeft: 8, flexGrow: 1 }}\n                variant=\"outlined\"\n                label=\"Title / Instruction\"\n                value={q.title || \"\"}\n                onChange={(e) => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"title\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n            </div>\n            <Grid container>\n              <Grid item xs={6}>\n                {q.choices && (\n                  <TextField\n                    style={{\n                      marginTop: 8,\n                      paddingRight: 8,\n                      boxSizing: \"border-box\",\n                    }}\n                    variant=\"outlined\"\n                    fullWidth\n                    label=\"Choices (One per Line)\"\n                    defaultValue={q.choices.join(\"\\n\") || \"\"}\n                    onChange={(e) => {\n                      onChange(\n                        setIn(\n                          iface,\n                          [\"surveyjs\", \"questions\", i, \"choices\"],\n                          e.target.value.split(\"\\n\")\n                        )\n                      )\n                    }}\n                    multiline\n                    rows={6}\n                  />\n                )}\n              </Grid>\n              <Grid item xs={6}>\n                <PreviewHeader>Preview</PreviewHeader>\n                <Survey\n                  noActions\n                  variant=\"flat\"\n                  key={q}\n                  form={{ questions: [q] }}\n                />\n              </Grid>\n            </Grid>\n            <IconButton\n              className=\"quitButton\"\n              onClick={() => {\n                onChange(\n                  setIn(\n                    iface,\n                    [\"surveyjs\", \"questions\"],\n                    [...questions.slice(0, i), ...questions.slice(i + 1)]\n                  )\n                )\n              }}\n            >\n              <CancelIcon />\n            </IconButton>\n          </Question>\n        ))\n      )}\n      <ButtonsContainer>\n        <StyledButton onClick={(e) => changeMenuOpen(true)} ref={anchorEl}>\n          <AddCircleIcon className=\"icon\" />\n          {t(\"add-input\")}\n        </StyledButton>\n      </ButtonsContainer>\n      <Menu\n        anchorEl={anchorEl && anchorEl.current}\n        open={menuOpen}\n        onClose={() => changeMenuOpen(false)}\n      >\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                ((iface.surveyjs || {}).questions || []).concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"text\",\n                    title: \"New Text Input\",\n                  },\n                ])\n              )\n            )\n          }}\n        >\n          {t(\"text-input\")}\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"radiogroup\",\n                  title: \"New Exclusive Choice Input\",\n                  choices: [\"Yes\", \"Maybe\", \"No\"],\n                })\n              )\n            )\n          }}\n        >\n          {t(\"exclusive-choice\")}\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"checkbox\",\n                  title: \"New Checkbox Input\",\n                  choices: [\"A\", \"B\", \"C\"],\n                })\n              )\n            )\n          }}\n        >\n          Checkboxes\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat({\n                  name: \"input\" + questions.length,\n                  type: \"boolean\",\n                  title: \"New Boolean Input\",\n                })\n              )\n            )\n          }}\n        >\n          Boolean\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"dropdown\",\n                  title: \"New Dropdown Input\",\n                  choices: [\"A\", \"B\", \"C\"],\n                })\n              )\n            )\n          }}\n        >\n          {t(\"drop-down-autocomplete\")}\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"multiple-dropdown\",\n                    title: \"New Multiple Dropdown Input\",\n                    choices: [\"A\", \"B\", \"C\"],\n                  },\n                ])\n              )\n            )\n          }}\n        >\n          {t(\"multiple-item-dropdown-autocomplete\")}\n        </MenuItem>\n      </Menu>\n    </div>\n  )\n}\n","import React from \"react\"\nimport ConfigureInterface from \"../ConfigureInterface\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { setIn } from \"seamless-immutable\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Fields = styled(\"div\")({})\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  marginTop: 16,\n  border: \"2px solid #000\",\n})\nconst StyledButton = styled(Button)({\n  width: \"100%\",\n  margin: 16,\n  marginLeft: 0,\n})\n\nexport default ({ iface, onChange }) => {\n  const { t } = useTranslation()\n\n  return (\n    <React.Fragment>\n      <Fields>\n        {(iface.fields || []).map((f, fieldIndex) => (\n          <StyledExpansionPanel key={fieldIndex}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n              {f.fieldName}\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              <Box display=\"flex\" flexDirection=\"column\">\n                <TextField\n                  label=\"Field Name\"\n                  value={f.fieldName}\n                  onChange={(e) => {\n                    onChange(\n                      setIn(\n                        [\"fields\", fieldIndex, \"fieldName\"],\n                        e.target.value,\n                        iface\n                      )\n                    )\n                  }}\n                />\n                <ConfigureInterface\n                  isNested\n                  dataset={{ interface: f.interface }}\n                  onChange={(newFieldInterface) => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.map((field) =>\n                        field.fieldName === f.fieldName\n                          ? { ...f, interface: newFieldInterface }\n                          : field\n                      ),\n                    })\n                  }}\n                />\n                <Button\n                  onClick={() => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.filter(\n                        ({ fieldName }) => fieldName !== f.fieldName\n                      ),\n                    })\n                  }}\n                >\n                  {t(\"remove-field\")}\n                </Button>\n              </Box>\n            </ExpansionPanelDetails>\n          </StyledExpansionPanel>\n        ))}\n        <StyledButton\n          onClick={() => {\n            onChange(\n              setIn(\n                iface,\n                [\"fields\"],\n                (iface.fields || []).concat({\n                  fieldOrder: (iface.fields || []).length,\n                  fieldName: \"New Field\",\n                  interface: {\n                    type: \"empty\",\n                  },\n                })\n              )\n            )\n          }}\n        >\n          {t(\"add-new-field\")}\n        </StyledButton>\n      </Fields>\n    </React.Fragment>\n  )\n}\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst ExplanationTextHeader = styled(\"div\")({\n  textAlign: \"center\",\n  paddingTop: 30,\n  paddingBottom: 50,\n  userSelect: \"none\",\n})\n\nconst ExplanationText = styled(\"h3\")({\n  fontWeight: \"bold\",\n  color: colors.grey[500],\n})\n\nconst GithubLink = styled(\"a\")({\n  color: colors.blue[500],\n})\n\nconst Configure3D = () => {\n  const { t } = useTranslation()\n\n  return (\n    <ExplanationTextHeader>\n      <ExplanationText>\n        {t(\"configure-3d-explanation-text-part-1\")}{\" \"}\n        <GithubLink\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/UniversalDataTool/universal-data-tool/issues/20\"\n        >\n          this\n        </GithubLink>{\" \"}\n        {t(\"github-issue\")}.\n      </ExplanationText>\n    </ExplanationTextHeader>\n  )\n}\n\nexport default Configure3D\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"],\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      description:\n        \"If you're labeling regions on an video frames, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multipleRegions: Boolean(\n        iface.multipleRegions || iface.multipleRegions === undefined\n      ),\n      multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n      regionTypesAllowed: iface.regionTypesAllowed,\n      labels:\n        (iface.labels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n    }),\n    [iface]\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","import React from \"react\"\n\nexport default ({ iface, onChange }) => {\n  return (\n    <div>\n      We'd like to put a little interface to edit poses or landmarks here, but\n      we need help! Check out this{\" \"}\n      <a href=\"https://github.com/UniversalDataTool/universal-data-tool/issues/307\">\n        Github Issue\n      </a>{\" \"}\n      to learn more! For now just turn to the JSON tab to edit the landmarks\n      manually!\n    </div>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport ConfigureImageSegmentation from \"../ConfigureImageSegmentation\"\nimport ConfigureImagePixelSegmentation from \"../ConfigureImagePixelSegmentation\"\nimport ConfigureImageClassification from \"../ConfigureImageClassification\"\nimport ConfigureTextClassification from \"../ConfigureTextClassification\"\nimport ConfigureAudioTranscription from \"../ConfigureAudioTranscription\"\nimport ConfigureTextEntityRecognition from \"../ConfigureTextEntityRecognition\"\nimport ConfigureTextEntityRelations from \"../ConfigureTextEntityRelations\"\nimport ConfigureDataEntry from \"../ConfigureDataEntry\"\nimport ConfigureComposite from \"../ConfigureComposite\"\nimport Configure3D from \"../Configure3D\"\nimport ConfigureVideoSegmentation from \"../ConfigureVideoSegmentation\"\nimport ConfigureImageLandmarkAnnotation from \"../ConfigureImageLandmarkAnnotation\"\n\nconst Container = styled(\"div\")({\n  padding: 24,\n})\n\nconst NoOptions = styled(\"div\")({\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n  color: colors.grey[500],\n  paddingTop: 30,\n  paddingBottom: 50,\n})\n\nexport const ConfigureInterface = ({\n  dataset,\n  onChange,\n  onClickEditJSON,\n  isNested = false,\n}) => {\n  const iface = dataset.interface\n\n  return (\n    <Container>\n      {!iface.type && <NoOptions>Select a Type</NoOptions>}\n      {iface.type === \"image_segmentation\" && (\n        <ConfigureImageSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"image_pixel_segmentation\" && (\n        <ConfigureImagePixelSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"image_classification\" && (\n        <ConfigureImageClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"composite\" && (\n        <ConfigureComposite iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"data_entry\" && (\n        <ConfigureDataEntry iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"audio_transcription\" && (\n        <ConfigureAudioTranscription iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_entity_recognition\" && (\n        <ConfigureTextEntityRecognition iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_entity_relations\" && (\n        <ConfigureTextEntityRelations iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_classification\" && (\n        <ConfigureTextClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"video_segmentation\" && (\n        <ConfigureVideoSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"3d_bounding_box\" && (\n        <Configure3D iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"image_landmark_annotation\" && (\n        <ConfigureImageLandmarkAnnotation iface={iface} onChange={onChange} />\n      )}\n    </Container>\n  )\n}\n\nexport default ConfigureInterface\n","import React, { useState, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Table from \"@material-ui/core/Table\"\nimport TableBody from \"@material-ui/core/TableBody\"\nimport TableCell from \"@material-ui/core/TableCell\"\nimport TableContainer from \"@material-ui/core/TableContainer\"\nimport TableHead from \"@material-ui/core/TableHead\"\nimport TableRow from \"@material-ui/core/TableRow\"\nimport Button from \"@material-ui/core/Button\"\nimport EditIcon from \"@material-ui/icons/Edit\"\n\nconst useStyles = makeStyles({\n  table: {},\n})\n\nconst hotkeyIconStyle = { marginLeft: 8, width: 16, height: 16 }\n\nexport default ({\n  open,\n  onClose,\n  onChangeHotkey,\n  hotkeyList,\n  onClearHotkeys,\n}) => {\n  const classes = useStyles()\n  const [selectedHotKey, setSelectedHotKey] = useState()\n  const [{ modifier, key }, setCurrentKeyCombo] = useState({})\n\n  useEffect(() => {\n    if (!selectedHotKey) return\n    function keyListener(e) {\n      if ([\"shift\", \"ctrl\", \"cmd\", \"alt\"].includes(e.key.toLowerCase())) {\n        setCurrentKeyCombo({ modifier: e.key.toLowerCase(), key })\n      }\n      if (e.key.length === 1) {\n        setCurrentKeyCombo({ modifier, key: e.key.toLowerCase() })\n      }\n    }\n    window.addEventListener(\"keydown\", keyListener)\n    return () => {\n      window.removeEventListener(\"keydown\", keyListener)\n    }\n  }, [selectedHotKey, key, modifier, setCurrentKeyCombo])\n\n  useEffect(() => {\n    if (!key) return\n    if (modifier) {\n      onChangeHotkey(selectedHotKey, `${modifier} + ${key}`)\n    } else {\n      onChangeHotkey(selectedHotKey, key)\n    }\n    setCurrentKeyCombo({})\n    setSelectedHotKey(null)\n  }, [modifier, key, onChangeHotkey, selectedHotKey])\n\n  return (\n    <SimpleDialog\n      title=\"Manage Keyboard Shortcuts\"\n      actions={[\n        {\n          text: \"Clear Hotkeys\",\n          onClick: onClearHotkeys,\n        },\n      ]}\n      open={open}\n      onClose={onClose}\n    >\n      <TableContainer>\n        <Table className={classes.table} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Action</TableCell>\n              <TableCell align=\"right\">Keyboard Shortcut</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {hotkeyList.map((hotkey) => (\n              <TableRow key={hotkey.description}>\n                <TableCell>{hotkey.description}</TableCell>\n                <TableCell align=\"right\">\n                  <Button\n                    onClick={() => {\n                      if (selectedHotKey !== hotkey) {\n                        setSelectedHotKey(hotkey)\n                        setCurrentKeyCombo({})\n                        return\n                      }\n                    }}\n                    style={{ minWidth: 0 }}\n                  >\n                    <b>\n                      {selectedHotKey === hotkey\n                        ? modifier || key\n                          ? `<${modifier ? modifier + \"+\" : \"\"}${key || \"???\"}>`\n                          : \"<Press Any Key>\"\n                        : hotkey.binding}\n                    </b>\n                    {selectedHotKey === hotkey ? (\n                      <EditIcon style={hotkeyIconStyle} />\n                    ) : (\n                      <EditIcon style={hotkeyIconStyle} />\n                    )}\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </SimpleDialog>\n  )\n}\n","import React, { useState } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { useUpdate } from \"react-use\"\nimport { styled } from \"@material-ui/core/styles\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport { useAppConfig } from \"../AppConfig\"\nimport { useHotkeyStorage } from \"../HotkeyStorage\"\nimport KeyboardShortcutManagerDialog from \"../KeyboardShortcutManagerDialog\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Button = styled(MuiButton)({\n  margin: 8,\n})\n\nexport const AdvancedOptionsView = ({ onClickEditJSON, onClearLabelData }) => {\n  const forceUpdate = useUpdate()\n  const posthog = usePosthog()\n  const { fromConfig, setInConfig } = useAppConfig()\n  const { hotkeys, changeHotkey, clearHotkeys } = useHotkeyStorage()\n  const [hotkeyDialogOpen, setHotkeyDialogOpen] = useState(false)\n\n  // internalization hook\n  const { t } = useTranslation()\n\n  return (\n    <Box padding={2}>\n      <Button\n        onClick={() => {\n          if (\n            window.confirm(\n              \"Are you sure you want to delete all your label data? Click OK to delete.\"\n            )\n          ) {\n            onClearLabelData()\n          }\n        }}\n        variant=\"outlined\"\n      >\n        {t(\"clear-labels\")}\n      </Button>\n      <Button\n        variant=\"outlined\"\n        onClick={() => {\n          if (posthog.has_opted_out_capturing()) {\n            posthog.opt_in_capturing()\n          } else {\n            posthog.opt_out_capturing()\n          }\n          forceUpdate()\n        }}\n      >\n        {posthog.has_opted_out_capturing() ? \"Enable\" : \"Disable\"}{\" \"}\n        {t(\"telemetry\")}\n      </Button>\n      <Button\n        variant=\"outlined\"\n        onClick={() => {\n          // TODO store in appConfig\n          const response = window.prompt(\n            \"Input URL for new collaboration server (empty to use universaldatatool.com):\",\n            window.localStorage.getItem(\"CUSTOM_COLLABORATION_SERVER\") || \"\"\n          )\n          if (response === null) return\n          window.localStorage.setItem(\"CUSTOM_COLLABORATION_SERVER\", response)\n          window.location.reload()\n        }}\n      >\n        {t(\"custom-collaboration-server\")}\n      </Button>\n      <Button\n        variant=\"outlined\"\n        onClick={() => {\n          setInConfig(\n            \"labelhelp.disabled\",\n            !Boolean(fromConfig(\"labelhelp.disabled\"))\n          )\n        }}\n      >\n        {fromConfig(\"labelhelp.disabled\") ? \"Enable\" : \"Disable\"}{\" \"}\n        {t(\"label-help\")}\n      </Button>\n      {!fromConfig(\"labelhelp.disabled\") && (\n        <Button\n          variant=\"outlined\"\n          disabled={Boolean(fromConfig(\"labelhelp.disabled\"))}\n          onClick={() => {\n            const response = window.prompt(\n              \"Label Help API Key:\",\n              fromConfig(\"labelhelp.apikey\") || \"\"\n            )\n            if (response === null) return\n            setInConfig(\"labelhelp.apikey\", response)\n          }}\n        >\n          {t(\"label-help-api-key\")}\n        </Button>\n      )}\n      <Button\n        variant=\"outlined\"\n        onClick={() => {\n          setHotkeyDialogOpen(true)\n        }}\n      >\n        Change/View Hotkeys\n      </Button>\n      <KeyboardShortcutManagerDialog\n        open={hotkeyDialogOpen}\n        hotkeyList={hotkeys}\n        onClose={() => setHotkeyDialogOpen(false)}\n        onClearHotkeys={clearHotkeys}\n        onChangeHotkey={(hotkey, newBinding) =>\n          changeHotkey(hotkey.id, newBinding)\n        }\n      />\n    </Box>\n  )\n}\n\nexport default AdvancedOptionsView\n","import React from \"react\"\nimport templates from \"../StartingPage/templates\"\nimport Button from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  padding: 24,\n  \"&.emptyState\": {\n    textAlign: \"center\",\n    backgroundColor: colors.blue[800],\n    minHeight: \"71vh\",\n    padding: 64,\n    \"& .bigText\": {\n      textAlign: \"left\",\n      fontSize: 48,\n      color: \"#fff\",\n      fontWeight: \"bold\",\n      marginBottom: 48,\n    },\n  },\n})\n\nconst BigButton = styled(Button)({\n  padding: 10,\n  width: 200,\n  height: 150,\n  boxShadow: \"0px 3px 5px rgba(0,0,0,0.3)\",\n  margin: 12,\n  \"& .bigIcon\": {\n    marginTop: 16,\n    width: 64,\n    height: 64,\n  },\n  transition: \"transform 100ms\",\n  \"&:hover\": {\n    backgroundColor: \"#fff\",\n    transform: \"scale(1.04,1.04)\",\n  },\n  backgroundColor: colors.blue[100],\n  \"&.selected\": {\n    backgroundColor: \"#fff\",\n  },\n})\n\nexport const BigInterfaceSelect = ({ onChange, currentInterfaceType }) => {\n  return (\n    <Container className=\"emptyState\">\n      <div className=\"bigText\">Choose an Interface:</div>\n      {templates\n        .filter((t) => t.name !== \"Empty\")\n        .map((template) => (\n          <BigButton\n            key={template.name}\n            className={\n              currentInterfaceType === template.dataset.interface.type\n                ? \"selected\"\n                : \"\"\n            }\n            disabled={currentInterfaceType === template.dataset.interface.type}\n            onClick={() => onChange(template.dataset.interface)}\n          >\n            <div>\n              <div>{template.name}</div>\n              <div>\n                <template.Icon className=\"bigIcon\" />\n              </div>\n            </div>\n          </BigButton>\n        ))}\n    </Container>\n  )\n}\n\nexport default BigInterfaceSelect\n","import i18n from \"i18next\"\nimport { initReactI18next } from \"react-i18next\"\nimport enTranslation from \"./locales/en/translation.json\"\nimport frTranslation from \"./locales/fr/translations.json\"\nimport cnTranslation from \"./locales/cn/translations.json\"\nimport ptBrTranslation from \"./locales/pt-br/translation.json\"\nimport nlTranslation from \"./locales/nl/translation.json\"\n\nimport LanguageDetector from \"i18next-browser-languagedetector\"\n// not like to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\ni18n\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: \"en\",\n    debug: true,\n\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    },\n\n    resources: {\n      fr: {\n        translation: frTranslation,\n      },\n      en: {\n        translation: enTranslation,\n      },\n      cn: {\n        translation: cnTranslation,\n      },\n      pt: {\n        translation: ptBrTranslation,\n      },\n      nl: {\n        translation: nlTranslation,\n      },\n    },\n  })\n\nexport default i18n\n","import { useState, useMemo, useDebugValue } from \"react\"\n\nexport default (clobber, defaultIfNotClobbered) => {\n  const isClobbered = useMemo(\n    () => clobber !== undefined,\n    //eslint-disable-next-line\n    []\n  )\n  useDebugValue(isClobbered ? \"Clobbered\" : \"Not Clobbered\")\n  const [notClobberedValue, setNotClobberedValue] = useState(\n    defaultIfNotClobbered\n  )\n  if (isClobbered) {\n    return [clobber, undefined]\n  } else {\n    return [notClobberedValue, setNotClobberedValue]\n  }\n}\n","import React from \"react\"\nimport NLPAnnotator from \"react-nlp-annotate\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nexport const TextClassification = (props) => {\n  const [currentSampleIndex, setCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n  const { annotation } = props.samples[currentSampleIndex]\n  // TODO remove legacy support for availableLabels\n  if (!props.interface.labels && props.interface.availableLabels) {\n    props.interface.labels = props.interface.availableLabels\n  }\n  const initialLabels = annotation\n    ? typeof annotation === \"string\"\n      ? [annotation]\n      : annotation\n    : undefined\n  if (!props.interface.labels) {\n    throw new Error(\"Labels not defined. Try defining some labels in Setup\")\n  }\n  let labels = props.interface.labels\n    .map((l) =>\n      typeof l === \"string\" ? { id: l, description: l, displayName: l } : l\n    )\n    .map((l) => (!l.displayName ? { ...l, displayName: l.id } : l))\n  return (\n    <NLPAnnotator\n      key={currentSampleIndex}\n      type=\"label-document\"\n      labels={labels}\n      multipleLabels={props.interface.multiple}\n      document={props.samples[currentSampleIndex].document}\n      initialLabels={initialLabels}\n      hotkeysEnabled={!props.disableHotkeys}\n      onPrev={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex - 1)\n        } else {\n          props.onExit(\"go-to-previous\")\n        }\n      }}\n      onNext={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex + 1)\n        } else {\n          props.onExit(\"go-to-next\")\n        }\n      }}\n      onFinish={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        props.onExit()\n      }}\n    />\n  )\n}\n\nexport default TextClassification\n","export const simpleSequenceToEntitySequence = (simpleSeq) => {\n  const entSeq = []\n  let charsPassed = 0\n  for (const seq of simpleSeq || []) {\n    if (seq.label) {\n      entSeq.push({\n        text: seq.text,\n        label: seq.label,\n        start: charsPassed,\n        end: charsPassed + seq.text.length,\n      })\n    }\n    charsPassed += seq.text.length\n  }\n  return entSeq\n}\n\nexport const simpleSequenceAndRelationsToEntitySequence = ({\n  sequence: simpleSeq,\n  relationships,\n}) => {\n  const textIdsInRelation = new Set(\n    (relationships || []).flatMap((r) => [r.from, r.to])\n  )\n\n  const entSeq = []\n  let charsPassed = 0\n  for (const seq of simpleSeq || []) {\n    if (seq.label || (seq.textId && textIdsInRelation.has(seq.textId))) {\n      entSeq.push({\n        text: seq.text,\n        textId: seq.textId,\n        label: seq.label,\n        start: charsPassed,\n        end: charsPassed + seq.text.length - 1,\n      })\n    }\n    charsPassed += seq.text.length\n  }\n  return { entities: entSeq, relations: relationships }\n}\n\nexport const entitySequenceToSimpleSeq = (doc, entSeq) => {\n  if (!entSeq) return undefined\n  const simpleSeq = []\n  entSeq = [...entSeq]\n  entSeq.sort((a, b) => a.start - b.start)\n  let nextEntity = 0\n  for (let i = 0; i < doc.length; i++) {\n    if ((entSeq[nextEntity] || {}).start === i) {\n      simpleSeq.push({\n        text: entSeq[nextEntity].text,\n        label: entSeq[nextEntity].label,\n        textId:\n          entSeq[nextEntity].textId || Math.random().toString(36).slice(-6),\n      })\n      // i = entSeq[nextEntity].end\n      i += entSeq[nextEntity].text.length - 1\n      simpleSeq.push({ text: \"\" })\n      nextEntity += 1\n    } else {\n      if (simpleSeq.length === 0 || simpleSeq[simpleSeq.length - 1].label) {\n        simpleSeq.push({\n          text: doc[i],\n          textId: Math.random().toString(36).slice(-6),\n        })\n      } else {\n        simpleSeq[simpleSeq.length - 1].text += doc[i]\n      }\n    }\n  }\n  if (simpleSeq.map((s) => s.text).join(\"\") !== doc) {\n    throw new Error(\n      \"Combining annotation entities with document didn't match document.\\n\\n\" +\n        simpleSeq.map((s) => s.text).join(\"\") +\n        \"\\n\\nvs\\n\\n\" +\n        doc\n    )\n  }\n  return simpleSeq.filter((item) => item.text.length > 0)\n}\n","import React from \"react\"\nimport NLPAnnotator from \"react-nlp-annotate\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\nimport Box from \"@material-ui/core/Box\"\nimport {\n  simpleSequenceToEntitySequence,\n  entitySequenceToSimpleSeq,\n} from \"./convert-react-nlp-annotate-types\"\n\nexport const TextEntityRecognition = (props) => {\n  const [currentSampleIndex, setCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n  const initialSequence = props.samples[currentSampleIndex].annotation\n    ? entitySequenceToSimpleSeq(\n        props.samples[currentSampleIndex].document,\n        props.samples[currentSampleIndex].annotation.entities\n      )\n    : undefined\n\n  if (!props.interface.labels && !props.interface.availableLabels) {\n    throw new Error(\"Labels not defined. Try adding some labels in setup.\")\n  }\n\n  return (\n    <NLPAnnotator\n      key={currentSampleIndex}\n      titleContent={<Box paddingLeft={4}>Sample {currentSampleIndex}</Box>}\n      type=\"label-sequence\"\n      document={props.samples[currentSampleIndex].document}\n      labels={props.interface.labels || props.interface.availableLabels}\n      initialSequence={initialSequence}\n      hotkeysEnabled={!props.disableHotkeys}\n      onPrev={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, {\n          entities: simpleSequenceToEntitySequence(result),\n        })\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex - 1)\n        } else {\n          props.onExit(\"go-to-previous\")\n        }\n      }}\n      onNext={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, {\n          entities: simpleSequenceToEntitySequence(result),\n        })\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex + 1)\n        } else {\n          props.onExit(\"go-to-next\")\n        }\n      }}\n      onFinish={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, {\n          entities: simpleSequenceToEntitySequence(result),\n        })\n        props.onExit()\n      }}\n    />\n  )\n}\n\nexport default TextEntityRecognition\n","import React from \"react\"\nimport NLPAnnotator from \"react-nlp-annotate\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\nimport Box from \"@material-ui/core/Box\"\nimport {\n  simpleSequenceAndRelationsToEntitySequence,\n  entitySequenceToSimpleSeq,\n} from \"../TextEntityRecognition/convert-react-nlp-annotate-types\"\n\nexport const TextEntityRelations = (props) => {\n  console.log(props)\n  const [currentSampleIndex, setCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n  const initialSequence = props.samples[currentSampleIndex].annotation\n    ? entitySequenceToSimpleSeq(\n        props.samples[currentSampleIndex].document,\n        props.samples[currentSampleIndex].annotation.entities\n      )\n    : undefined\n\n  const initialRelations =\n    props.samples[currentSampleIndex].annotation?.relations || []\n\n  if (!props.interface.relationLabels) {\n    throw new Error(\n      \"Relation labels not defined. Try adding some labels in setup.\"\n    )\n  }\n\n  console.log({ initialSequence, initialRelations })\n\n  return (\n    <NLPAnnotator\n      key={currentSampleIndex}\n      titleContent={<Box paddingLeft={4}>Sample {currentSampleIndex}</Box>}\n      type=\"label-relationships\"\n      document={props.samples[currentSampleIndex].document}\n      entityLabels={props.interface.entityLabels}\n      relationshipLabels={props.interface.relationLabels}\n      initialSequence={initialSequence}\n      initialRelationships={initialRelations}\n      hotkeysEnabled={!props.disableHotkeys}\n      onPrev={(result) => {\n        props.onSaveTaskOutputItem(\n          currentSampleIndex,\n          simpleSequenceAndRelationsToEntitySequence(result)\n        )\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex - 1)\n        } else {\n          props.onExit(\"go-to-previous\")\n        }\n      }}\n      onNext={(result) => {\n        props.onSaveTaskOutputItem(\n          currentSampleIndex,\n          simpleSequenceAndRelationsToEntitySequence(result)\n        )\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex + 1)\n        } else {\n          props.onExit(\"go-to-next\")\n        }\n      }}\n      onFinish={(result) => {\n        props.onSaveTaskOutputItem(\n          currentSampleIndex,\n          simpleSequenceAndRelationsToEntitySequence(result)\n        )\n        props.onExit()\n      }}\n    />\n  )\n}\n\nexport default TextEntityRelations\n","// @flow\n\n// RIA = React Image Annotate\n\nexport function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function getRandomColor() {\n  var h = getRandomInt(0, 360)\n  var s = 100\n  var l = 50\n  return \"hsl(\"\n    .concat(h.toString(), \",\")\n    .concat(s.toString(), \"%,\")\n    .concat(l.toString(), \"%)\")\n}\n\nexport const rid = () => Math.random().toString().split(\".\")[1]\n\nexport const convertToRIARegionFmt = (region) => {\n  switch (region.regionType) {\n    case \"bounding-box\": {\n      return {\n        id: region.id || rid(),\n        cls: region.classification,\n        tags: region.labels,\n        color: region.color || getRandomColor(),\n        type: \"box\",\n        x: region.centerX - region.width / 2,\n        y: region.centerY - region.height / 2,\n        w: region.width,\n        h: region.height,\n      }\n    }\n    case \"point\": {\n      return {\n        id: region.id || rid(),\n        type: \"point\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        x: region.x,\n        y: region.y,\n      }\n    }\n    case \"polygon\": {\n      return {\n        id: region.id || rid(),\n        type: \"polygon\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        open: false,\n        points: region.points.map((p) => [p.x, p.y]),\n      }\n    }\n    case \"line\":\n    case \"pixel-mask\": {\n      throw new Error(`Unsupported region \"${JSON.stringify(region)}\"`)\n    }\n    case \"keypoints\": {\n      return {\n        id: region.id || rid(),\n        type: \"keypoints\",\n        keypointsDefinitionId: region.keypointsDefinitionId,\n        points: region.points,\n      }\n    }\n    default:\n      return null\n  }\n}\n\nexport const convertFromRIARegionFmt = (riaRegion) => {\n  switch (riaRegion.type) {\n    case \"point\": {\n      return {\n        regionType: \"point\",\n        id: riaRegion.id,\n        x: riaRegion.x,\n        y: riaRegion.y,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n      }\n    }\n    case \"box\": {\n      return {\n        regionType: \"bounding-box\",\n        id: riaRegion.id,\n        centerX: riaRegion.x + riaRegion.w / 2,\n        centerY: riaRegion.y + riaRegion.h / 2,\n        width: riaRegion.w,\n        height: riaRegion.h,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n      }\n    }\n    case \"polygon\": {\n      return {\n        regionType: \"polygon\",\n        id: riaRegion.id,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n        points: riaRegion.points.map(([x, y]) => ({ x, y })),\n      }\n    }\n    case \"keypoints\": {\n      return {\n        id: riaRegion.id || rid(),\n        keypointsDefinitionId: riaRegion.keypointsDefinitionId,\n        regionType: \"keypoints\",\n        points: riaRegion.points,\n      }\n    }\n    default:\n      throw new Error(`Unsupported riaRegion \"${JSON.stringify(riaRegion)}\"`)\n  }\n}\n\nexport const convertToRIAImageFmt = ({\n  title,\n  taskDatum: td,\n  index: i,\n  output,\n}) => {\n  td = td || {}\n  const regions = !output\n    ? undefined\n    : Array.isArray(output)\n    ? output.map(convertToRIARegionFmt)\n    : [convertToRIARegionFmt(output)]\n\n  if (td.imageUrl) {\n    return {\n      src: td.imageUrl,\n      name: title || `Sample ${i}`,\n      regions,\n    }\n  } else if (td.videoUrl && td.videoFrameAt !== undefined) {\n    return {\n      src: td.videoUrl,\n      frameTime: td.videoFrameAt,\n      name: title || `Sample ${i}`,\n      regions,\n    }\n  }\n  throw new Error(`Task Datum not supported \"${JSON.stringify(td)}\"`)\n}\n\nexport const convertToRIAKeyframes = (keyframes) => {\n  const newKeyframes = {}\n  for (const key in keyframes) {\n    newKeyframes[key] = {\n      regions: keyframes[key].regions.map(convertToRIARegionFmt),\n    }\n  }\n  return newKeyframes\n}\n","// @flow\n\nimport React, { useState, useMemo } from \"react\"\nimport Annotator from \"react-image-annotate\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  convertFromRIARegionFmt,\n  convertToRIAImageFmt,\n} from \"../../utils/ria-format.js\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: [\"create-polygon\", \"create-expanding-line\"],\n  point: \"create-point\",\n  \"allowed-area\": \"modify-allowed-area\",\n}\n\nconst Container = styled(\"div\")({\n  \"& .fullscreen\": { height: \"100%\" },\n})\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  sampleIndex: globalSampleIndex,\n  interface: iface,\n  sampleIndex,\n  samples = emptyArr,\n  containerProps = emptyObj,\n  // TODO DEPRECATE onSaveTaskOutputItem\n  onSaveTaskOutputItem,\n  onModifySample,\n}) => {\n  // TODO remove legacy \"availableLabels\" support\n  if (iface.availableLabels && !iface.labels) {\n    iface.labels = iface.availableLabels\n  }\n\n  const [selectedIndex, setSelectedIndex] = useClobberedState(\n    globalSampleIndex,\n    0\n  )\n  const [showTags, changeShowTags] = useState(true)\n  const [selectedTool, changeSelectedTool] = useState(\"select\")\n\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n  const isPixel = iface.type === \"image_pixel_segmentation\"\n\n  const saveCurrentIndexAnnotation = useEventCallback((output) => {\n    const img = output.images[0]\n    const annotation = multipleRegions\n      ? (img.regions || []).map(convertFromRIARegionFmt)\n      : convertToRIAImageFmt((img.regions || [])[0])\n    if (onModifySample) {\n      const { x, y, w: width, h: height } = output.allowedArea || {}\n      onModifySample(selectedIndex, {\n        annotation,\n        ...(output.allowedArea\n          ? {\n              allowedArea: { x, y, width, height },\n            }\n          : {}),\n      })\n    } else {\n      onSaveTaskOutputItem(selectedIndex, annotation)\n    }\n  })\n\n  const labelProps = useMemo(\n    () =>\n      isPixel\n        ? {\n            regionClsList: [\"background\"]\n              .concat(iface.labels || [])\n              .map((l) => (typeof l === \"string\" ? l : l.id)),\n          }\n        : isClassification\n        ? {\n            regionClsList: (iface.labels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          }\n        : {\n            regionTagList: (iface.labels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          },\n    [isClassification, iface.labels, isPixel]\n  )\n\n  const multipleRegions =\n    iface.multipleRegions || iface.multipleRegions === undefined\n\n  const onExit = useEventCallback((output, nextAction) => {\n    saveCurrentIndexAnnotation(output)\n    changeShowTags(output.showTags)\n    changeSelectedTool(output.selectedTool)\n    if (containerProps.onExit) containerProps.onExit(nextAction)\n  })\n  const onNextImage = useEventCallback((output) => {\n    if (selectedIndex + 1 >= samples.length) {\n      onExit(output, \"go-to-next\")\n    } else {\n      saveCurrentIndexAnnotation(output)\n      if (setSelectedIndex) {\n        setSelectedIndex(selectedIndex + 1)\n      } else {\n        onExit(output, \"go-to-next\")\n      }\n    }\n  })\n  const onPrevImage = useEventCallback((output) => {\n    if (selectedIndex - 1 < 0) {\n      onExit(output, \"go-to-previous\")\n    } else {\n      saveCurrentIndexAnnotation(output)\n      if (setSelectedIndex) {\n        setSelectedIndex(selectedIndex - 1)\n      } else {\n        onExit(output, \"go-to-previous\")\n      }\n    }\n  })\n\n  const singleImageList = useMemo(() => {\n    return [\n      convertToRIAImageFmt({\n        title: containerProps.datasetName || `Sample ${selectedIndex}`,\n        taskDatum: samples[selectedIndex],\n        output: samples[selectedIndex].annotation,\n        selectedIndex,\n      }),\n    ]\n    // eslint-disable-next-line\n  }, [selectedIndex, containerProps.datasetName])\n\n  const enabledTools =\n    iface.type === \"image_pixel_segmentation\"\n      ? undefined\n      : useMemo(\n          () =>\n            [\"select\"].concat(\n              regionTypesAllowed\n                .flatMap((rt) => regionTypeToTool[rt])\n                .filter(Boolean)\n            ),\n          [regionTypesAllowed]\n        )\n\n  const allowedArea = useMemo(() => {\n    if (!iface.allowedArea && !samples[selectedIndex].allowedArea)\n      return undefined\n    const { x, y, width: w, height: h } =\n      samples[selectedIndex].allowedArea || iface.allowedArea\n    return { x, y, w, h }\n    // eslint-disable-next-line\n  }, [iface.allowedArea, samples[selectedIndex].allowedArea])\n  return (\n    <Container\n      style={{\n        height: containerProps.height || \"calc(100% - 70px)\",\n        minHeight: 600,\n        width: \"100%\",\n      }}\n    >\n      <Annotator\n        key={globalSampleIndex}\n        fullImageSegmentationMode={isPixel}\n        selectedImage={0}\n        taskDescription={iface.description}\n        showTags={showTags}\n        {...labelProps}\n        autoSegmentationOptions={iface.autoSegmentationEngine}\n        allowedArea={allowedArea}\n        onNextImage={onNextImage}\n        onPrevImage={onPrevImage}\n        enabledTools={enabledTools}\n        selectedTool={selectedTool}\n        images={singleImageList}\n        onExit={onExit}\n      />\n    </Container>\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport Workspace from \"react-material-workspace-layout/Workspace\"\nimport { styled } from \"@material-ui/core/styles\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\n\nconst HeaderLeftSideContainer = styled(\"div\")({\n  fontSize: 24,\n  fontWeight: \"bold\",\n})\n\nexport default ({\n  children,\n  onNext,\n  onPrev,\n  onRemoveSample,\n  currentSampleIndex = 0,\n  numberOfSamples = 1,\n  globalSampleIndex = 1,\n  titleContent,\n  onClickHeaderItem,\n}: any) => {\n  const headerItems = useMemo(\n    () =>\n      [\n        onRemoveSample && {\n          name: \"Delete\",\n          icon: <DeleteIcon />,\n          onClick: () => onRemoveSample(globalSampleIndex),\n        },\n        (currentSampleIndex > 0 || onPrev) && {\n          name: \"Prev\",\n          onClick: onPrev,\n          disabled: currentSampleIndex === 0,\n        },\n        (numberOfSamples > currentSampleIndex + 1 || onNext) && {\n          name: \"Next\",\n          onClick: onNext,\n          disabled: currentSampleIndex >= numberOfSamples - 1,\n        },\n        { name: \"Save\" },\n      ].filter(Boolean),\n    [\n      currentSampleIndex,\n      globalSampleIndex,\n      numberOfSamples,\n      onNext,\n      onPrev,\n      onRemoveSample,\n    ]\n  )\n  return (\n    <Workspace\n      headerLeftSide={\n        titleContent === undefined ? (\n          <Box paddingLeft={2}>\n            <HeaderLeftSideContainer>\n              Sample{\" \"}\n              {numberOfSamples > 1\n                ? `${currentSampleIndex} / ${numberOfSamples}`\n                : `${globalSampleIndex}`}\n            </HeaderLeftSideContainer>\n          </Box>\n        ) : (\n          titleContent\n        )\n      }\n      onClickHeaderItem={onClickHeaderItem}\n      headerItems={headerItems}\n      iconSidebarItems={[]}\n      rightSidebarItems={[]}\n    >\n      <Box padding={2} style={{ width: \"100%\" }}>\n        {children}\n      </Box>\n    </Workspace>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport without from \"lodash/without\"\nimport WorkspaceContainer from \"../WorkspaceContainer\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nconst brightColors = [\n  colors.blue[600],\n  colors.green[600],\n  colors.red[600],\n  colors.deepOrange[600],\n  colors.pink[600],\n  colors.teal[600],\n  colors.deepPurple[600],\n  colors.indigo[600],\n  colors.blue[600],\n  colors.cyan[600],\n  colors.purple[600],\n]\n\nconst letters = \"abcdefghijklmnopqrstuvwxyz1234567890\".split(\"\")\nconst getRandomColor = (label) => {\n  const hashInt = label.id\n    .split(\"\")\n    .reduce((acc, v, i) => acc + (letters.indexOf(v) + 1), 0)\n  return brightColors[hashInt % brightColors.length]\n}\n\nconst Container = styled(\"div\")({\n  maxWidth: \"100vw\",\n  display: \"flex\",\n  flexDirection: \"column\",\n})\n\nconst ImageContainer = styled(\"div\")({\n  position: \"relative\",\n  display: \"flex\",\n  flexGrow: 1,\n})\n\nconst Image = styled(\"img\")({\n  display: \"inline-block\",\n  position: \"absolute\",\n  left: 0,\n  top: 0,\n  width: \"100%\",\n  height: \"100%\",\n  objectFit: \"contain\",\n})\n\nconst ButtonsContainer = styled(\"div\")({\n  paddingLeft: 50,\n  paddingRight: 50,\n  marginTop: 8,\n  textAlign: \"center\",\n  flexShrink: 0,\n})\n\nconst CheckButton = styled(Button)({\n  margin: 8,\n  color: \"#fff\",\n  fontSize: 18,\n  paddingRight: 16,\n  transition: \"transform 50ms ease\",\n})\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport const ImageClassification = ({\n  sampleIndex: globalSampleIndex,\n  interface: iface,\n  samples = emptyArr,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n}) => {\n  // TODO remove legacy \"availableLabels\" support\n  if (iface.availableLabels && !iface.labels) {\n    iface.labels = iface.availableLabels\n  }\n\n  const disableHotkeys = containerProps.disableHotkeys\n\n  if (!iface.labels)\n    throw new Error(\"No labels defined. Add some labels in Setup to continue.\")\n  const [sampleIndex, setSampleIndex] = useClobberedState(globalSampleIndex, 0)\n\n  const [enlargedLabel, changeEnlargedLabel] = useState(null)\n  const [currentOutput, changeCurrentOutput] = useState(emptyArr)\n  const labels = useMemo(\n    () =>\n      iface.labels.map((l) =>\n        typeof l === \"string\" ? { id: l, description: l } : l\n      ),\n    [iface.labels]\n  )\n\n  const onDone = useEventCallback(() => {\n    if (containerProps.onExit) containerProps.onExit()\n  })\n  const onNextNoSave = useEventCallback(() => {\n    if (containerProps.onExit) {\n      containerProps.onExit(\"go-to-next\")\n    }\n  })\n  const onNext = useEventCallback((newOutput) => {\n    onSaveTaskOutputItem(sampleIndex, newOutput || currentOutput)\n    if (setSampleIndex && sampleIndex !== samples.length - 1) {\n      setSampleIndex(sampleIndex + 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-next\")\n    }\n  })\n  const onPrev = useEventCallback(() => {\n    if (setSampleIndex && sampleIndex > 0) {\n      setSampleIndex(sampleIndex - 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-previous\")\n    }\n  })\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      changeEnlargedLabel(null)\n    }, 100)\n    return () => clearTimeout(timeout)\n  }, [enlargedLabel])\n\n  const onClickLabel = useEventCallback((label) => {\n    changeEnlargedLabel(label)\n    let newOutput\n    if ((currentOutput || []).includes(label.id)) {\n      newOutput = without(currentOutput, label.id)\n    } else {\n      if (iface.allowMultiple) {\n        newOutput = currentOutput.concat([label.id])\n      } else {\n        newOutput = label.id\n      }\n    }\n\n    changeCurrentOutput(newOutput)\n    if (!iface.allowMultiple && newOutput.length > 0) {\n      onNext(newOutput)\n    }\n  })\n\n  useEffect(() => {\n    let newOutput = samples[sampleIndex].annotation\n    if (!newOutput) newOutput = []\n    if (typeof newOutput === \"string\") newOutput = [newOutput]\n    changeCurrentOutput(newOutput)\n  }, [sampleIndex, globalSampleIndex, samples])\n\n  const [hotkeyMap, labelKeyMap] = useMemo(() => {\n    if (disableHotkeys) return [{}, {}]\n    const hotkeyMap = {\n      \" \": onNext,\n      backspace: onPrev,\n      enter: onDone,\n      rightarrow: onNext,\n      leftarrow: onPrev,\n    }\n    const labelKeyMap = {}\n    for (let label of labels) {\n      const nextAvailableLetter = label.id\n        .split(\"\")\n        .filter((l) => letters.includes(l))\n        .find((l) => !hotkeyMap[l.toLowerCase()])\n      if (!nextAvailableLetter) continue\n      hotkeyMap[nextAvailableLetter] = () => onClickLabel(label)\n      labelKeyMap[label.id] = nextAvailableLetter\n    }\n    return [hotkeyMap, labelKeyMap]\n  }, [labels, onClickLabel, onDone, onNext, onPrev, disableHotkeys])\n\n  useEffect(() => {\n    if (disableHotkeys) return\n    const onKeyDown = (e) => {\n      const key = e.key.toLowerCase()\n      if (hotkeyMap[key]) {\n        hotkeyMap[key]()\n      }\n    }\n    window.addEventListener(\"keydown\", onKeyDown)\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown)\n    }\n  }, [hotkeyMap, disableHotkeys])\n\n  return (\n    <WorkspaceContainer\n      onNext={onNextNoSave}\n      onPrev={onPrev}\n      onRemoveSample={containerProps.onRemoveSample}\n      onClickHeaderItem={onDone}\n      numberOfSamples={samples.length}\n      currentSampleIndex={sampleIndex}\n      globalSampleIndex={globalSampleIndex}\n    >\n      <Container\n        style={{\n          height: containerProps.height || \"calc(100% - 70px)\",\n          minHeight: 600,\n        }}\n      >\n        <ImageContainer>\n          <Image src={samples[sampleIndex].imageUrl} />\n        </ImageContainer>\n        <ButtonsContainer>\n          {labels.map((label) => (\n            <CheckButton\n              key={label.id}\n              onClick={() => onClickLabel(label)}\n              style={{\n                backgroundColor: getRandomColor(label),\n                transform:\n                  enlargedLabel === label ? \"scale(1.1,1.1)\" : undefined,\n              }}\n            >\n              <Checkbox\n                style={{ color: \"#fff\" }}\n                checked={\n                  typeof currentOutput === \"object\"\n                    ? currentOutput.includes(label.id)\n                    : currentOutput === label.id\n                }\n              />\n              {label.id}\n              {labelKeyMap[label.id] ? ` (${labelKeyMap[label.id]})` : \"\"}\n            </CheckButton>\n          ))}\n        </ButtonsContainer>\n      </Container>\n    </WorkspaceContainer>\n  )\n}\n\nexport default ImageClassification\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Annotator from \"react-image-annotate\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  convertFromRIARegionFmt,\n  convertToRIAKeyframes,\n} from \"../../utils/ria-format.js\"\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: \"create-polygon\",\n  \"full-segmentation\": \"create-polygon\",\n  point: \"create-point\",\n}\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  interface: iface,\n  sampleIndex,\n  samples = emptyArr,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n}) => {\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n\n  const labelProps = useMemo(\n    () =>\n      isClassification\n        ? {\n            regionClsList: (iface.labels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          }\n        : {\n            regionTagList: (iface.labels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          },\n    [isClassification, iface.labels]\n  )\n\n  const getUDTKeyFrames = (riaOutput) => {\n    const newKeyframes = {}\n    for (const key in riaOutput.keyframes) {\n      newKeyframes[key] = {\n        regions: riaOutput.keyframes[key].regions.map(convertFromRIARegionFmt),\n      }\n    }\n    return newKeyframes\n  }\n\n  const onExit = useEventCallback((output) => {\n    const annotation = { keyframes: getUDTKeyFrames(output) }\n    onSaveTaskOutputItem(sampleIndex, annotation)\n    if (containerProps.onExit) containerProps.onExit()\n  })\n\n  const onNext = useEventCallback((output) => {\n    const annotation = { keyframes: getUDTKeyFrames(output) }\n    onSaveTaskOutputItem(sampleIndex, annotation)\n    if (containerProps.onExit) {\n      containerProps.onExit(\"go-to-next\")\n    }\n  })\n\n  const onPrev = useEventCallback((output) => {\n    const annotation = { keyframes: getUDTKeyFrames(output) }\n    onSaveTaskOutputItem(sampleIndex, annotation)\n    if (containerProps.onExit) {\n      containerProps.onExit(\"go-to-previous\")\n    }\n  })\n\n  const enabledTools = useMemo(\n    () =>\n      [\"select\"].concat(\n        regionTypesAllowed.map((rt) => regionTypeToTool[rt]).filter(Boolean)\n      ),\n    [regionTypesAllowed]\n  )\n\n  if (samples.length === 0) throw new Error(\"No sample data provided selected\")\n  if (!samples[sampleIndex].videoUrl)\n    throw new Error(\"Sample must have videoUrl\")\n\n  const annotation = samples[sampleIndex].annotation || {}\n\n  return (\n    <div\n      style={{\n        height: containerProps.height || \"calc(100vh - 70px)\",\n        width: \"100%\",\n        minHeight: 600,\n      }}\n    >\n      <Annotator\n        key={sampleIndex}\n        taskDescription={iface.description}\n        {...labelProps}\n        enabledTools={enabledTools}\n        keyframes={convertToRIAKeyframes(annotation?.keyframes || {})}\n        onNextImage={onNext}\n        onPrevImage={onPrev}\n        videoName={samples[sampleIndex].customId || \"\"}\n        videoTime={0}\n        videoSrc={samples[sampleIndex].videoUrl}\n        onExit={onExit}\n      />\n    </div>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport NLPAnnotator from \"react-nlp-annotate\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\nimport Box from \"@material-ui/core/Box\"\n\nexport default (props) => {\n  const [currentSampleIndex, setCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n\n  const sample = props.samples[currentSampleIndex]\n\n  return (\n    <NLPAnnotator\n      key={currentSampleIndex}\n      titleContent={<Box paddingLeft={4}>Sample {currentSampleIndex}</Box>}\n      type=\"transcribe\"\n      audio={sample.audioUrl}\n      phraseBank={props.phraseBank}\n      initialTranscriptionText={sample.annotation || \"\"}\n      onPrev={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex - 1)\n        } else {\n          props.onExit(\"go-to-previous\")\n        }\n      }}\n      onNext={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        if (setCurrentSampleIndex) {\n          setCurrentSampleIndex(currentSampleIndex + 1)\n        } else {\n          props.onExit(\"go-to-next\")\n        }\n      }}\n      onFinish={(result) => {\n        props.onSaveTaskOutputItem(currentSampleIndex, result)\n        if (props.onExit) props.onExit()\n      }}\n    />\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Annotator from \"react-image-annotate\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  convertFromRIARegionFmt,\n  convertToRIAImageFmt,\n} from \"../../utils/ria-format.js\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nconst Container = styled(\"div\")({\n  \"& .fullscreen\": { height: \"100%\" },\n})\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nconst posingTools = [\"create-keypoints\"]\n\nexport default ({\n  sampleIndex: globalSampleIndex,\n  interface: iface,\n  sampleIndex,\n  samples = emptyArr,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n  onModifySample,\n}) => {\n  const [selectedIndex, setSelectedIndex] = useClobberedState(\n    globalSampleIndex,\n    0\n  )\n\n  const saveCurrentIndexAnnotation = useEventCallback((output) => {\n    const img = output.images[0]\n    const annotation = (img.regions || []).map(convertFromRIARegionFmt)\n    if (onModifySample) {\n      onModifySample(selectedIndex, { annotation })\n    } else {\n      onSaveTaskOutputItem(selectedIndex, annotation)\n    }\n  })\n\n  const onExit = useEventCallback((output, nextAction) => {\n    saveCurrentIndexAnnotation(output)\n    if (containerProps.onExit) containerProps.onExit(nextAction)\n  })\n  const onNextImage = useEventCallback((output) => {\n    if (selectedIndex + 1 >= samples.length) {\n      onExit(output, \"go-to-next\")\n    } else {\n      saveCurrentIndexAnnotation(output)\n      if (setSelectedIndex) {\n        setSelectedIndex(selectedIndex + 1)\n      } else {\n        onExit(output, \"go-to-next\")\n      }\n    }\n  })\n  const onPrevImage = useEventCallback((output) => {\n    if (selectedIndex - 1 < 0) {\n      onExit(output, \"go-to-previous\")\n    } else {\n      saveCurrentIndexAnnotation(output)\n      if (setSelectedIndex) {\n        setSelectedIndex(selectedIndex - 1)\n      } else {\n        onExit(output, \"go-to-previous\")\n      }\n    }\n  })\n\n  const singleImageList = useMemo(() => {\n    return [\n      convertToRIAImageFmt({\n        title: containerProps.datasetName || `Sample ${selectedIndex}`,\n        taskDatum: samples[selectedIndex],\n        output: samples[selectedIndex].annotation,\n        selectedIndex,\n      }),\n    ]\n    // eslint-disable-next-line\n  }, [selectedIndex, containerProps.datasetName])\n\n  return (\n    <Container\n      style={{\n        height: containerProps.height || \"calc(100% - 70px)\",\n        minHeight: 600,\n        width: \"100%\",\n      }}\n    >\n      <Annotator\n        key={globalSampleIndex}\n        keypointDefinitions={iface.keypointDefinitions}\n        selectedImage={0}\n        taskDescription={iface.description}\n        onNextImage={onNextImage}\n        onPrevImage={onPrevImage}\n        enabledTools={posingTools}\n        images={singleImageList}\n        onExit={onExit}\n      />\n    </Container>\n  )\n}\n","export default function getTaskDescription(samplesItem) {\n  const { description, imageUrl, url, pdfUrl } = samplesItem\n  if (description) return description\n  if (imageUrl) return `![${imageUrl}](${imageUrl})`\n  if (pdfUrl)\n    return (\n      `[PDF Link](${pdfUrl})` +\n      `<object data=\"${pdfUrl.replace(\n        \"http://\",\n        \"https://\"\n      )}\" type=\"application/pdf\" width=\"100%\" height=\"600px\"></object>`\n    )\n  if (url) return `Use this [Link](${url})`\n  return null\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  linkButtonContainer: {\n    marginLeft: 8,\n    marginRight: 8,\n  },\n  linkButton: {\n    textTransform: \"none\",\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n  },\n})\n\nexport default ({ onClick, text }: { onClick: Function, text: string }) => {\n  const c = useStyles()\n  return (\n    <span className={c.linkButtonContainer}>\n      (\n      <span onClick={onClick} className={c.linkButton}>\n        {text}\n      </span>\n      )\n    </span>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport { makeStyles } from \"@material-ui/core\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Button from \"@material-ui/core/Button\"\nimport ReactMarkdown from \"react-markdown\"\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport LeftIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport CircleIcon from \"@material-ui/icons/RadioButtonUnchecked\"\nimport CheckCircle from \"@material-ui/icons/CheckCircle\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport LinkButton from \"./LinkButton\"\nimport range from \"lodash/range\"\n\nconst useStyles = makeStyles((theme) => ({\n  footer: {\n    backgroundColor: \"#fff\",\n    marginTop: 40,\n  },\n  footerContent: {\n    alignItems: \"center\",\n    padding: 20,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  footerBorder: {\n    borderTop: \"1px solid #ccc\",\n    marginLeft: 20,\n    marginRight: 20,\n  },\n  footerCount: {\n    display: \"inline-flex\",\n  },\n  allSamplesButton: {\n    color: \"#fff\",\n    border: \"1px solid rgba(255,255,255,0.5)\",\n    marginRight: 10,\n    paddingLeft: 8,\n  },\n  sampleIcon: {\n    marginRight: 8,\n  },\n  menuButton: {\n    marginRight: 8,\n    color: \"#fff\",\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  buttons: {\n    \"& > *\": {\n      margin: 4,\n    },\n  },\n  description: {\n    padding: 10,\n    \"& img\": {\n      maxWidth: \"calc(100% - 16px)\",\n      marginLeft: 8,\n      marginRight: 8,\n      maxHeight: 600,\n    },\n  },\n  sectionHeader: {\n    fontWeight: 700,\n    fontSize: 12,\n    padding: 10,\n    paddingTop: 16,\n    textTransform: \"uppercase\",\n    color: colors.grey[600],\n  },\n  content: {\n    padding: 10,\n    // minHeight: \"calc(100vh - 200px)\"\n  },\n}))\n\nexport const SampleContainer = ({\n  hideDescription: defaultHideDescription = window.localStorage.getItem(\n    \"hideDescription\"\n  ) === '\"true\"',\n  lastSampleExitText,\n  onExit,\n  requireCompleteToPressNext = false,\n  samples,\n  minContentHeight,\n  currentSampleIndex,\n  totalSamples,\n  onChangeSample,\n  taskOutput = [],\n  description,\n  children,\n}) => {\n  const c = useStyles()\n  const [hideDescription, changeHideDescriptionState] = useState(\n    defaultHideDescription\n  )\n  const changeHideDescription = (hide) => {\n    window.localStorage.setItem(\n      \"hideDescription\",\n      `\"${hide ? \"true\" : \"false\"}\"`\n    )\n    changeHideDescriptionState(hide)\n  }\n\n  const [sampleDrawerOpen, changeSampleDrawerOpen] = useState(false)\n  return (\n    <>\n      <Grid container>\n        {!hideDescription && (\n          <Grid item xs={12} sm={12} md={6}>\n            <div className={c.sectionHeader}>\n              Description\n              <LinkButton\n                onClick={() => changeHideDescription(true)}\n                text=\"hide\"\n              />\n            </div>\n            <div className={c.description}>\n              <ReactMarkdown escapeHtml={false} source={description} />\n            </div>\n          </Grid>\n        )}\n        <Grid item xs={12} sm={12} md={hideDescription ? 12 : 6}>\n          <div className={c.sectionHeader}>\n            Sample {currentSampleIndex + 1}/{totalSamples}\n            {hideDescription && (\n              <LinkButton\n                onClick={() => changeHideDescription(false)}\n                text=\"show description\"\n              />\n            )}\n            {totalSamples > 1 && (\n              <LinkButton\n                onClick={() => changeSampleDrawerOpen(true)}\n                text=\"view all\"\n              />\n            )}\n            {onExit && (\n              <LinkButton onClick={() => onExit()} text=\"exit without saving\" />\n            )}\n          </div>\n          <div style={{ minHeight: minContentHeight }} className={c.content}>\n            {children}\n          </div>\n        </Grid>\n        {totalSamples > 1 && (\n          <Grid item xs={12}>\n            <div className={c.footer}>\n              <div className={c.footerBorder} />\n              <div className={c.footerContent}>\n                <Button\n                  onClick={() =>\n                    onChangeSample(\n                      (currentSampleIndex - 1 + totalSamples) % totalSamples\n                    )\n                  }\n                >\n                  <LeftIcon /> Prev Sample\n                </Button>\n                <Button\n                  onClick={() => changeSampleDrawerOpen(true)}\n                  className={c.footerCount}\n                >\n                  {currentSampleIndex + 1} / {totalSamples}\n                </Button>\n                <Button\n                  disabled={\n                    requireCompleteToPressNext &&\n                    !taskOutput[currentSampleIndex]\n                  }\n                  onClick={() =>\n                    onChangeSample((currentSampleIndex + 1) % totalSamples)\n                  }\n                >\n                  {requireCompleteToPressNext && !taskOutput[currentSampleIndex]\n                    ? \"Save to Continue\"\n                    : \"Next Sample\"}\n                  <RightIcon />\n                </Button>\n              </div>\n            </div>\n          </Grid>\n        )}\n      </Grid>\n      <Drawer\n        open={sampleDrawerOpen}\n        anchor=\"left\"\n        onClose={() => changeSampleDrawerOpen(false)}\n      >\n        <List style={{ minWidth: 300 }}>\n          <ListSubheader>Samples</ListSubheader>\n          {range(0, totalSamples).map((i) => (\n            <ListItem\n              style={{\n                backgroundColor:\n                  i === currentSampleIndex ? colors.grey[200] : undefined,\n              }}\n              button\n              onClick={() => onChangeSample(i)}\n            >\n              <ListItemIcon\n                style={{\n                  color:\n                    i === currentSampleIndex ? colors.blue[500] : undefined,\n                }}\n              >\n                {taskOutput[i] ? <CheckCircle /> : <CircleIcon />}\n              </ListItemIcon>\n              <ListItemText>Sample {i + 1}</ListItemText>\n            </ListItem>\n          ))}\n        </List>\n      </Drawer>\n    </>\n  )\n}\n\nexport default SampleContainer\n","import React from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nexport const DataEntry = (props) => {\n  const [currentSampleIndex, setCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n  const form =\n    props.samples[currentSampleIndex].surveyjs || props.interface.surveyjs\n  if (!form)\n    throw new Error(\"No survey/form created. Try adding some inputs in Setup\")\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.samples.length}\n      taskOutput={props.samples.map((s) => s.annotation)}\n      description={\n        getTaskDescription(props.samples[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => setCurrentSampleIndex(sampleIndex)}\n    >\n      <Survey\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        variant=\"flat\"\n        form={form}\n        defaultAnswers={\n          props.samples[currentSampleIndex].annotation || undefined\n        }\n        completeText=\"Save & Next\"\n        onFinish={(answers) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, answers)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default DataEntry\n","// @flow\n\nimport React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  root: {\n    padding: 50,\n    textAlign: \"center\",\n  },\n  title: {\n    margin: 50,\n  },\n  explain: {},\n})\n\nexport default ({ title, description, children }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      <Typography variant=\"h4\" component=\"div\" className={c.title}>\n        {title}\n      </Typography>\n      <Typography variant=\"h6\" component=\"div\" className={c.explain}>\n        {description || children}\n      </Typography>\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport BadOHA from \"../BadOHA\"\n\nexport default () => {\n  return (\n    <BadOHA title=\"No Samples to Show\">\n      Make sure that <code>samples</code> is defined and not empty.\n      <br />\n      <br />\n      Need help setting up? {/*<a href=\"#\">Check out this tutorial.</a>*/}\n    </BadOHA>\n  )\n}\n","import React from \"react\"\n\nimport RemoveRedEye from \"@material-ui/icons/RemoveRedEye\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Help from \"@material-ui/icons/Help\"\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\n\nexport default ({ type, ...props }) => {\n  switch (type) {\n    case \"image_label\":\n    case \"image_segmentation\":\n      return <RemoveRedEye {...props} />\n    case \"audio_transcription\":\n      return <Audiotrack {...props} />\n    case \"data_entry\":\n      return <Edit {...props} />\n    case \"text_entity_recognition\":\n      return <TextFormat {...props} />\n    case \"3d_bounding_box\":\n      return <ThreeDRotation {...props} />\n    default:\n      return <Help {...props} />\n  }\n}\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport Button from \"@material-ui/core/Button\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport InterfaceIcon from \"../InterfaceIcon\"\nimport KeyboardArrowRightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport Box from \"@material-ui/core/Box\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nimport { useTranslation } from \"react-i18next\"\n\nconst Title = styled(\"div\")({\n  fontSize: 18,\n  fontWeight: \"bold\",\n  color: colors.grey[700],\n  borderBottom: `1px solid ${colors.grey[300]}`,\n  paddingBottom: 8,\n  marginBottom: 8,\n  paddingLeft: 8,\n})\nconst StyledButton = styled(Button)({\n  display: \"flex\",\n  textAlign: \"left\",\n  justifyContent: \"flex-start\",\n  marginTop: 8,\n})\n\nexport const Composite = (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useClobberedState(\n    props.sampleIndex,\n    0\n  )\n  const {\n    interface: { fields },\n  } = props\n  const [selectedField, changeSelectedField] = useState()\n\n  const { t } = useTranslation()\n\n  if (!fields) throw new Error(\"No fields defined. Try adding a field in Setup\")\n\n  const sample = props.samples[currentSampleIndex]\n\n  if (selectedField) {\n    return (\n      <UniversalDataViewer\n        dataset={{\n          interface: selectedField.interface,\n          samples: [\n            {\n              ...sample,\n              annotation: (sample.annotation || {})[selectedField.fieldName],\n            },\n          ],\n        }}\n        onExit={() => changeSelectedField(null)}\n        onSaveTaskOutputItem={(indexZero, output) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, {\n            ...sample.annotation,\n            [selectedField.fieldName]: output,\n          })\n          changeSelectedField(null)\n        }}\n      />\n    )\n  }\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.samples.length}\n      taskOutput={props.samples.map((s) => s.annotation)}\n      description={getTaskDescription(sample) || props.interface.description}\n      onChangeSample={(sampleIndex) => {\n        if (props.containerProps.onExit) {\n          props.containerProps.onExit(\n            sampleIndex > currentSampleIndex ? \"go-to-next\" : \"go-to-previous\"\n          )\n        } else {\n          changeCurrentSampleIndex(sampleIndex)\n        }\n      }}\n    >\n      <Title>Fields</Title>\n      {fields.map((field, index) => (\n        <StyledButton\n          key={field.fieldName}\n          onClick={() => {\n            changeSelectedField({ ...field, index })\n          }}\n          fullWidth\n          variant=\"outlined\"\n        >\n          <InterfaceIcon\n            style={{ color: colors.grey[500], marginRight: 16 }}\n            type={field.interface.type}\n          />\n          {field.fieldName}\n          <Box flexGrow={1} />\n          <Checkbox\n            checked={Boolean((sample.annotation || {})[field.fieldName])}\n          />\n          <KeyboardArrowRightIcon />\n        </StyledButton>\n      ))}\n      <StyledButton\n        onClick={() => props.containerProps.onExit(\"go-to-next\")}\n        fullWidth\n        variant=\"outlined\"\n      >\n        <KeyboardArrowRightIcon\n          style={{ color: colors.grey[500], marginRight: 16 }}\n        />\n        {t(\"next\")}\n        <Box flexGrow={1} />\n        <Box height=\"42px\" />\n        <KeyboardArrowRightIcon />\n      </StyledButton>\n    </SampleContainer>\n  )\n}\n\nexport default Composite\n","// @flow\n\nimport \"../../i18n\"\nimport React, { useMemo } from \"react\"\nimport TextClassification from \"../TextClassification\"\nimport TextEntityRecognition from \"../TextEntityRecognition\"\nimport TextEntityRelations from \"../TextEntityRelations\"\nimport ImageSegmentation from \"../ImageSegmentation\"\nimport ImageClassification from \"../ImageClassification\"\nimport VideoSegmentation from \"../VideoSegmentation\"\nimport AudioTranscription from \"../AudioTranscription\"\nimport ImageLandmarkAnnotation from \"../ImageLandmarkAnnotation\"\nimport DataEntry from \"../DataEntry\"\nimport EmptySampleContainer from \"../EmptySampleContainer\"\nimport Composite from \"../Composite\"\nimport BadOHA from \"../BadOHA\"\nimport Button from \"@material-ui/core/Button\"\nimport { useTranslation } from \"react-i18next\"\nimport useEventCallback from \"use-event-callback\"\nimport useClobberedState from \"../../utils/use-clobbered-state\"\n\nexport const UniversalDataViewer = ({\n  dataset,\n  onExit: onExitProp,\n  onRemoveSample: onRemoveSampleProp,\n  hideHeader,\n  hideDescription,\n  disableHotkeys = false,\n  datasetName,\n  requireCompleteToPressNext,\n  onSaveTaskOutputItem: onSaveTaskOutputItemProp,\n  onModifySample,\n  sampleIndex: globalSampleIndex,\n  height,\n  onClickSetup,\n}) => {\n  // TODO type check w/ superstruct against dataset\n  const { t } = useTranslation()\n\n  const [sampleIndex, setSampleIndex] = useClobberedState(globalSampleIndex, 0)\n\n  const onExit = useEventCallback((...args) => {\n    if (globalSampleIndex === undefined) {\n      if (\n        args[0] === \"go-to-next\" &&\n        sampleIndex !== dataset.samples.length - 1\n      ) {\n        setSampleIndex(sampleIndex + 1)\n      } else if (args[0] === \"go-to-previous\" && sampleIndex !== 0) {\n        setSampleIndex(sampleIndex - 1)\n      }\n    }\n    if (onExitProp) return onExitProp(...args)\n  })\n\n  let onSaveTaskOutputItem = onSaveTaskOutputItemProp\n  if (onModifySample && !onSaveTaskOutputItem) {\n    onSaveTaskOutputItem = (sampleIndex, annotation) =>\n      onModifySample(sampleIndex, { annotation })\n  }\n\n  const containerProps = useMemo(\n    () => ({\n      hideHeader,\n      hideDescription,\n      datasetName,\n      requireCompleteToPressNext,\n      onExit,\n      onRemoveSample: onRemoveSampleProp,\n      height,\n      disableHotkeys,\n    }),\n    [\n      hideHeader,\n      hideDescription,\n      requireCompleteToPressNext,\n      datasetName,\n      height,\n      onExit,\n      disableHotkeys,\n      onRemoveSampleProp,\n    ]\n  )\n\n  if (!dataset || !dataset.interface.type) {\n    return (\n      <BadOHA\n        title=\"Set up your project to begin labeling\"\n        description={\n          <p>\n            {t(\"universal-data-viewer-interface-warning\")}\n            <br />\n            <br />\n            <Button color=\"primary\" variant=\"contained\" onClick={onClickSetup}>\n              {t(\"setup-project\")}\n            </Button>\n          </p>\n        }\n      />\n    )\n  }\n\n  if (!dataset.samples || dataset.samples.length === 0) {\n    return <EmptySampleContainer />\n  }\n\n  switch (dataset.interface.type) {\n    case \"data_entry\":\n      return (\n        <DataEntry\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_classification\":\n      return (\n        <TextClassification\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_entity_recognition\":\n      return (\n        <TextEntityRecognition\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_entity_relations\":\n      return (\n        <TextEntityRelations\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"image_segmentation\":\n    case \"image_pixel_segmentation\":\n      return (\n        <ImageSegmentation\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onModifySample={onModifySample}\n        />\n      )\n    case \"image_classification\":\n      return (\n        <ImageClassification\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"video_segmentation\":\n      return (\n        <VideoSegmentation\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"composite\":\n      return (\n        <Composite\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          dataset={dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"audio_transcription\":\n      return (\n        <AudioTranscription\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"image_landmark_annotation\":\n      return (\n        <ImageLandmarkAnnotation\n          containerProps={containerProps}\n          sampleIndex={sampleIndex}\n          {...dataset}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onModifySample={onModifySample}\n          onExit={onExit}\n        />\n      )\n    default:\n      return `\"${dataset.interface.type}\" not supported`\n  }\n}\n\nexport default UniversalDataViewer\n","import React, { useState, useEffect } from \"react\"\nimport AceEditor from \"react-ace\"\nimport Box from \"@material-ui/core/Box\"\nimport Button from \"@material-ui/core/Button\"\nimport { useToasts } from \"../Toasts\"\n\nexport const RawJSONEditor = ({ content, onSave }) => {\n  const [jsonText, setJSONText] = useState(\"\")\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!content) return\n    if (typeof content === \"string\") {\n      setJSONText(content)\n    } else if (typeof content === \"object\") {\n      setJSONText(JSON.stringify(content, null, \"  \"))\n    }\n  }, [content])\n  return (\n    <Box position=\"relative\" width=\"100%\">\n      <AceEditor\n        theme=\"github\"\n        mode=\"javascript\"\n        width=\"100%\"\n        value={jsonText}\n        editorProps={{ $blockScrolling: Infinity }}\n        onChange={(t) => setJSONText(t)}\n      />\n      <Box position=\"absolute\" right={16} top={16}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => {\n            try {\n              onSave(JSON.parse(jsonText))\n            } catch (e) {\n              addToast(\"Invalid JSON\", \"error\")\n            }\n          }}\n        >\n          Save\n        </Button>\n      </Box>\n    </Box>\n  )\n}\n\nexport default RawJSONEditor\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport ConfigureInterface from \"../ConfigureInterface\"\nimport AdvancedOptionsView from \"../AdvancedOptionsView\"\nimport { templateMap } from \"../StartingPage/templates\"\nimport Box from \"@material-ui/core/Box\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport CategoryIcon from \"@material-ui/icons/Category\"\nimport BuildIcon from \"@material-ui/icons/Build\"\nimport LiveTvIcon from \"@material-ui/icons/LiveTv\"\nimport DeveloperBoardIcon from \"@material-ui/icons/DeveloperBoard\"\nimport CodeIcon from \"@material-ui/icons/Code\"\nimport BigInterfaceSelect from \"../BigInterfaceSelect\"\nimport { setIn } from \"seamless-immutable\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport RawJSONEditor from \"../RawJSONEditor\"\n\nconst noop = () => {}\n\nexport default ({ dataset, onChange, onClearLabelData }) => {\n  const [currentTab, setTab] = useState(\n    dataset.interface.type ? \"configure\" : \"datatype\"\n  )\n\n  return (\n    <div>\n      <Box padding=\"16px\">\n        <Tabs value={currentTab} onChange={(e, newTab) => setTab(newTab)}>\n          <Tab icon={<CategoryIcon />} label=\"Data Type\" value=\"datatype\" />\n          <Tab icon={<BuildIcon />} label=\"Configure\" value=\"configure\" />\n          <Tab icon={<LiveTvIcon />} label=\"Preview\" value=\"preview\" />\n          <Tab icon={<CodeIcon />} label=\"JSON\" value=\"json\" />\n          <Tab\n            icon={<DeveloperBoardIcon />}\n            label=\"Advanced\"\n            value=\"advanced\"\n          />\n        </Tabs>\n      </Box>\n      {currentTab === \"datatype\" && (\n        <BigInterfaceSelect\n          currentInterfaceType={dataset.interface?.type}\n          onChange={(newInterface) => {\n            onChange(setIn(dataset, [\"interface\"], newInterface))\n            setTab(\"configure\")\n          }}\n        />\n      )}\n      {currentTab === \"configure\" && (\n        <ConfigureInterface\n          dataset={dataset}\n          onChange={(iface) => onChange(setIn(dataset, [\"interface\"], iface))}\n          isNotNested\n        />\n      )}\n      {currentTab === \"preview\" && (\n        <UniversalDataViewer\n          height={600}\n          onExit={noop}\n          onSaveTaskOutputItem={noop}\n          dataset={{\n            ...dataset,\n            samples: dataset?.samples?.length\n              ? [dataset.samples[0]]\n              : [templateMap[dataset.interface?.type].dataset.samples[0]],\n          }}\n        />\n      )}\n      {currentTab === \"advanced\" && (\n        <AdvancedOptionsView onClearLabelData={onClearLabelData} />\n      )}\n      {currentTab === \"json\" && (\n        <RawJSONEditor\n          content={dataset}\n          onSave={(newDataset) => {\n            onChange(newDataset)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport AceEditor from \"react-ace\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nexport default ({ open, sampleIndex, sampleInput, onChange, onClose }) => {\n  const [text, changeText] = useState()\n  const [error, changeError] = useState()\n  useEffect(() => {\n    const newText = JSON.stringify(sampleInput, null, \"  \")\n    if (newText !== text) {\n      changeText(newText)\n      changeError(null)\n    }\n  }, [sampleIndex, sampleInput, text])\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title={`samples[${sampleIndex}]`}\n    >\n      <AceEditor\n        theme=\"github\"\n        mode=\"javascript\"\n        width=\"100%\"\n        value={text}\n        editorProps={{ $blockScrolling: Infinity }}\n        onChange={(t) => {\n          changeText(t)\n          changeError(null)\n          try {\n            onChange(JSON.parse(t))\n          } catch (e) {\n            changeError(e.toString())\n          }\n        }}\n      />\n      <Box color=\"red\">{error}</Box>\n    </SimpleDialog>\n  )\n}\n","import * as Sentry from \"@sentry/browser\"\n\nSentry.init({\n  dsn: \"https://bc19fbac222243f08f0abaf6d66f2034@sentry.io/5182632\",\n  whitelistUrls: [\"https://universaldatatool.com\", \"^file:?:\"],\n})\n\nexport default Sentry\n","// @flow weak\n\nimport React from \"react\"\nimport Sentry from \"../../utils/sentry.js\"\nimport BadOHA from \"../BadOHA\"\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    console.error(\n      \"The following error occurred when loading a labeling interface:\",\n      error\n    )\n    return {\n      hasError: true,\n      errorString: error.toString(),\n    }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    Sentry.withScope((scope) => {\n      scope.setExtras(errorInfo)\n      const eventId = Sentry.captureException(error)\n      this.setState({ eventId })\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <BadOHA\n          title=\"An error occurred loading the labeling interface\"\n          description={this.state.errorString}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({})\nconst Stat = styled(\"div\")({\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  margin: 8,\n})\nconst Label = styled(\"div\")({\n  fontSize: 14,\n  fontWeight: \"bold\",\n  color: colors.grey[700],\n})\nconst Value = styled(\"div\")({\n  fontSize: 32,\n  marginTop: 8,\n})\n\nexport default ({ stats }) => {\n  return (\n    <Container>\n      {stats.map((s) => (\n        <Stat key={s.name}>\n          <Label>{s.name}</Label>\n          <Value>{s.value}</Value>\n        </Stat>\n      ))}\n    </Container>\n  )\n}\n","import React, { useState } from \"react\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Box from \"@material-ui/core/Box\"\nimport Button from \"@material-ui/core/Button\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { useAppConfig } from \"../AppConfig\"\nimport SaveIcon from \"@material-ui/icons/Save\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport usePosthog from \"../../utils/use-posthog\"\n\nconst Title = styled(\"div\")({\n  fontSize: 18,\n  color: colors.grey[800],\n  padding: 16,\n  \"& a\": {\n    color: colors.blue[600],\n  },\n})\n\nconst LabelHelpIs = styled(\"div\")({\n  fontSize: 18,\n  lineHeight: 1.5,\n  color: colors.grey[800],\n  padding: 16,\n  width: 800,\n})\n\nconst ErrorText = styled(\"div\")({\n  color: colors.red[600],\n})\n\nexport default () => {\n  const { setInConfig } = useAppConfig()\n  const [verifying, setVerifying] = useState(false)\n  const [textFieldValue, setTextFieldValue] = useState(\"\")\n  const [error, setError] = useState(\"\")\n  const posthog = usePosthog()\n\n  return (\n    <Box paddingTop={8} textAlign=\"center\">\n      <LabelHelpIs>\n        Label Help is a UDT-integrated service that crowd-sources your labeling,\n        it's about the same speed as having a team of 5-10 full-time labelers.\n      </LabelHelpIs>\n      <Title>\n        To use Label Help, enter your API key. You can{\" \"}\n        <a\n          href=\"https://labelhelp.universaldatatool.com\"\n          onClick={() => posthog.capture(\"get_api_key_link_clicked\")}\n        >\n          get an API key here\n        </a>\n        .\n      </Title>\n      {error && <ErrorText>{error}</ErrorText>}\n      <Box\n        paddingTop={2}\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        flexDirection=\"column\"\n      >\n        <TextField\n          onChange={(e) => setTextFieldValue(e.target.value)}\n          className=\"label-help-api-key-text-field\"\n          variant=\"outlined\"\n          label=\"API Key\"\n        />\n        <Button\n          style={{ marginTop: 16 }}\n          color=\"primary\"\n          disabled={verifying}\n          variant=\"outlined\"\n          onClick={async () => {\n            setError(null)\n            setVerifying(true)\n            try {\n              // TODO check with labelhelp server and make sure api key is valid\n              const response = await fetch(\n                \"https://labelhelp.universaldatatool.com/api/me\",\n                {\n                  headers: { apikey: textFieldValue },\n                }\n              )\n              if (response.status !== 200) throw new Error(response.toString())\n            } catch (e) {\n              setError(e.toString())\n              setVerifying(false)\n              return\n            }\n\n            setVerifying(false)\n            setInConfig(\"labelhelp.apikey\", textFieldValue)\n            posthog.capture(\"save_api_key_button_clicked\")\n          }}\n        >\n          {verifying ? (\n            <>\n              <CircularProgress size={18} style={{ marginRight: 16 }} />\n              Checking...\n            </>\n          ) : (\n            <>\n              <SaveIcon style={{ marginRight: 8 }} />\n              Save\n            </>\n          )}\n        </Button>\n      </Box>\n    </Box>\n  )\n}\n","// @flow\n\nimport { styled } from \"@material-ui/core/styles\"\n\nexport const PaperContainer = styled(\"div\")({\n  margin: 16,\n  padding: 16,\n  border: \"1px solid #ccc\",\n  borderRadius: 4,\n  boxShadow: \"0px 2px 2px rgba(0,0,0,0.1)\",\n})\n\nexport default PaperContainer\n","import { useFileContext } from \"./\"\nimport { useMemo } from \"react\"\nimport { setIn } from \"seamless-immutable\"\n\nexport const useActiveDataset = () => {\n  const { file, setFile } = useFileContext()\n  const result = useMemo(\n    () =>\n      !file || !file.content\n        ? null\n        : {\n            dataset: file.content,\n            setDataset: (newDataset) => {\n              setFile(setIn(file, [\"content\"], newDataset))\n            },\n          },\n    [file, setFile]\n  )\n  return result || {}\n}\n","import { useContext, createContext } from \"react\"\n\nexport const FileContext = createContext({})\n\nexport const useFileContext = () => useContext(FileContext)\n\nexport { useActiveDataset } from \"./use-active-dataset.js\"\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Box from \"@material-ui/core/Box\"\nimport Button from \"@material-ui/core/Button\"\nimport Stepper from \"@material-ui/core/Stepper\"\nimport Step from \"@material-ui/core/Step\"\nimport StepLabel from \"@material-ui/core/StepLabel\"\nimport Table from \"@material-ui/core/Table\"\nimport TableBody from \"@material-ui/core/TableBody\"\nimport TableCell from \"@material-ui/core/TableCell\"\nimport TableHead from \"@material-ui/core/TableHead\"\nimport TableRow from \"@material-ui/core/TableRow\"\nimport { useAppConfig } from \"../AppConfig\"\nimport { useLabelHelp } from \"./\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { useActiveDataset } from \"../FileContext\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport { setIn } from \"seamless-immutable\"\nimport usePosthog from \"../../utils/use-posthog\"\n\nconst Container = styled(\"div\")({\n  fontVariantNumeric: \"tabular-nums\",\n})\nconst Link = styled(\"a\")({\n  color: colors.blue[500],\n  textDecoration: \"none\",\n})\n\nconst usdFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n})\nconst preciseUSDFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  maximumFractionDigits: 4,\n  minimumFractionDigits: 2,\n})\n\nconst steps = [\"setup\", \"running\", \"completed\"]\n\nexport default () => {\n  const { fromConfig, setInConfig } = useAppConfig()\n  const {\n    labelHelpEnabled,\n    labelHelpError,\n    loadMyCredits = () => 0,\n    variables,\n    totalCost = 0,\n    formulaFunc = () => 0,\n    myCredits = () => 0,\n  } = useLabelHelp()\n  const [error, setError] = useState()\n  const { dataset, setDataset } = useActiveDataset()\n\n  const [labelHelpInfo, setLabelHelpInfo] = useState(dataset.labelHelp || {})\n  const collabUrl = labelHelpInfo.url || (dataset.labelHelp || {}).url\n\n  const posthog = usePosthog()\n\n  useEffect(() => {\n    if (myCredits === null || myCredits === undefined) {\n      loadMyCredits(dataset)\n    }\n  }, [myCredits, dataset, loadMyCredits])\n\n  useEffect(() => {\n    if (!collabUrl) return\n    async function loadJob() {\n      const response = await fetch(\n        `https://labelhelp.universaldatatool.com/api/job?custom_id=${encodeURIComponent(\n          collabUrl\n        )}&api_key=${fromConfig(\"labelhelp.apikey\")}`\n      ).then((r) => r.json())\n      // response contains { progress, status }\n      setLabelHelpInfo({\n        ...dataset.labelHelp,\n        ...response,\n        loaded: true,\n      })\n    }\n    loadJob()\n  }, [collabUrl, dataset.labelHelp, fromConfig])\n\n  if (!labelHelpEnabled)\n    return (\n      <Container>\n        Label Help isn't enabled, check the error below. If you can't resolve\n        the error, reach out on{\" \"}\n        <a href=\"https://universaldatatool.slack.com\">the slack</a> for more\n        help!\n        {labelHelpError && (\n          <div style={{ color: colors.red[500], marginTop: 24 }}>\n            {labelHelpError}\n          </div>\n        )}\n      </Container>\n    )\n\n  const activeStep = !collabUrl\n    ? \"setup\"\n    : labelHelpInfo.progress === 1\n    ? \"completed\"\n    : \"running\"\n\n  return (\n    <Container>\n      <Stepper activeStep={steps.indexOf(activeStep)}>\n        {[\"Setup\", \"Running\", \"Completed\"].map((step) => (\n          <Step key={step}>\n            <StepLabel>{step}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      {error && <Box color={colors.red[600]}>{error}</Box>}\n      {activeStep === \"setup\" ? (\n        <Box>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Item</TableCell>\n                <TableCell>Quantity</TableCell>\n                <TableCell>Unit Cost</TableCell>\n                <TableCell>Cost / Sample</TableCell>\n                <TableCell>Total</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {Object.keys(variables).map((varName) => (\n                <TableRow>\n                  <TableCell style={{ textTransform: \"capitalize\" }}>\n                    {varName.replace(/_/g, \" \")}\n                  </TableCell>\n                  <TableCell>{variables[varName]}</TableCell>\n                  <TableCell>\n                    {varName === \"sample_count\"\n                      ? \"\"\n                      : preciseUSDFormatter.format(\n                          (totalCost -\n                            formulaFunc({ ...variables, [varName]: 0 })) /\n                            variables.sample_count /\n                            (variables[varName] === 0 ? 1 : variables[varName])\n                        )}\n                  </TableCell>\n                  <TableCell>\n                    {usdFormatter.format(\n                      (totalCost -\n                        formulaFunc({ ...variables, [varName]: 0 })) /\n                        variables.sample_count\n                    )}\n                  </TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              ))}\n              <TableRow>\n                <TableCell>Total Cost</TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell>{usdFormatter.format(totalCost)}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Time to Complete</TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell>1-3 days</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n          <Box\n            display=\"flex\"\n            justifyContent=\"flex-end\"\n            alignItems=\"center\"\n            padding={2}\n            paddingTop={4}\n          >\n            <Box>Credits: {usdFormatter.format(myCredits)}</Box>\n            <Box flexGrow={1} />\n            <Button\n              onClick={() => {\n                setInConfig(\"labelhelp.apikey\", null)\n                posthog.capture(\"api_key_button_clicked\")\n              }}\n              variant=\"outlined\"\n            >\n              API Key\n            </Button>\n            <Button\n              color={myCredits < totalCost ? \"primary\" : \"none\"}\n              style={{ marginLeft: 12 }}\n              variant=\"outlined\"\n              href=\"https://labelhelp.universaldatatool.com#addcredits\"\n              onClick={() => {\n                posthog.capture(\"add_credits_button_clicked\")\n              }}\n            >\n              Add Credits\n            </Button>\n            <Button\n              onClick={async () => {\n                setError(null)\n                const response = await fetch(\n                  \"https://labelhelp.universaldatatool.com/api/submit\",\n                  {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                      dataset,\n                      price: totalCost,\n                      api_key: fromConfig(\"labelhelp.apikey\"),\n                    }),\n                    headers: { \"Content-Type\": \"application/json\" },\n                  }\n                )\n                  .then((r) => r.json())\n                  .catch((e) => {\n                    setError(e.toString())\n                    return null\n                  })\n                if (!response) {\n                  setError(\"Empty response from server\")\n                  return null\n                }\n\n                setDataset(\n                  setIn(dataset, [\"labelHelp\"], {\n                    url: response.custom_id,\n                  })\n                )\n\n                posthog.capture(\"start_label_help_button_clicked\")\n              }}\n              style={{ marginLeft: 12 }}\n              variant=\"outlined\"\n              color={myCredits >= totalCost ? \"primary\" : \"none\"}\n            >\n              Start Label Help\n            </Button>\n          </Box>\n        </Box>\n      ) : activeStep === \"running\" ? (\n        <Box>\n          {labelHelpInfo.loaded ? (\n            <Table>\n              <TableBody>\n                <TableRow>\n                  <TableCell>Status</TableCell>\n                  <TableCell>{labelHelpInfo.status}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Link</TableCell>\n                  <TableCell>\n                    <Link href={labelHelpInfo.url}>{labelHelpInfo.url}</Link>\n                  </TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Percent Complete</TableCell>\n                  <TableCell>{labelHelpInfo.progress.toFixed(1)}%</TableCell>\n                </TableRow>\n                {labelHelpInfo.price && (\n                  <TableRow>\n                    <TableCell>Budget Used</TableCell>\n                    <TableCell>\n                      ${labelHelpInfo.progress * labelHelpInfo.price} / $75\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          ) : (\n            <Box padding={8} textAlign=\"center\">\n              <CircularProgress size={100} />\n            </Box>\n          )}\n          <Box display=\"flex\" marginTop={2} justifyContent=\"flex-end\">\n            {/* TODO add stop early by calling /api/stop */}\n            {/* <Button\n              variant=\"outlined\"\n              style={{\n                color: colors.red[500],\n                border: `1px solid ${colors.red[200]}`,\n              }}\n            >\n              Stop Early\n            </Button> */}\n            <Box flexGrow={1} />\n            {/* TODO sync samples merges samples from link */}\n            {/* <Button variant=\"outlined\" color=\"primary\">\n              Sync Samples\n            </Button> */}\n          </Box>\n        </Box>\n      ) : activeStep === \"completed\" ? (\n        <Box>\n          <Table>\n            <TableBody>\n              <TableRow>\n                <TableCell>Percent Complete</TableCell>\n                <TableCell>100%</TableCell>\n              </TableRow>\n              {labelHelpInfo.price && (\n                <TableRow>\n                  <TableCell>Total Cost</TableCell>\n                  <TableCell>\n                    {usdFormatter.format(labelHelpInfo.price)}\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n          <Box display=\"flex\" marginTop={2} justifyContent=\"flex-end\">\n            <Button variant=\"outlined\">Restart</Button>\n            {/* TODO sync samples merges samples from link */}\n            {/* <Button\n              style={{ marginLeft: 12 }}\n              variant=\"outlined\"\n              color=\"primary\"\n            >\n              Sync Samples\n            </Button> */}\n          </Box>\n        </Box>\n      ) : null}\n    </Container>\n  )\n}\n","import React, { createContext, useMemo, useState } from \"react\"\n\nimport { useAppConfig } from \"../AppConfig\"\nexport const LabelHelpContext = createContext({})\n\nexport const LabelHelpProvider = ({ children }) => {\n  const { fromConfig, setInConfig } = useAppConfig()\n  const [loadingPricingConfig, setLoadingPricingConfig] = useState(false)\n  const [pricingConfig, setPricingConfig] = useState(false)\n  const [loadingMyTeam, setLoadingMyTeam] = useState(false)\n  const [myCredits, setMyCredits] = useState(null)\n  const contextValue = useMemo(\n    () => ({\n      pricingConfig,\n      myCredits,\n      loadPricingConfig: async () => {\n        if (loadingPricingConfig) return\n        setLoadingPricingConfig(true)\n        const pricingConfig = await fetch(\n          \"https://labelhelp.universaldatatool.com/api/price\"\n        ).then((r) => r.json())\n        setLoadingPricingConfig(false)\n        setPricingConfig(pricingConfig)\n      },\n      loadMyCredits: async () => {\n        if (loadingMyTeam) return\n        setLoadingMyTeam(true)\n        const apiKey = fromConfig(\"labelhelp.apikey\")\n        if (!apiKey) return\n        let response\n        try {\n          response = await fetch(\n            `https://labelhelp.universaldatatool.com/api/me`,\n            {\n              headers: { apikey: apiKey },\n            }\n          )\n          response = await response.json()\n        } catch (e) {\n          console.error(e)\n          setLoadingMyTeam(false)\n          return Promise.reject(e)\n        }\n        if (response.status >= 400) {\n          setInConfig(\"labelhelp.apikey\", null)\n        }\n\n        setMyCredits(response.credit)\n        setLoadingMyTeam(false)\n      },\n    }),\n    [\n      pricingConfig,\n      loadingPricingConfig,\n      // eslint-disable-next-line\n      fromConfig(\"labelhelp.apikey\"),\n      loadingMyTeam,\n      myCredits,\n      fromConfig,\n      setInConfig,\n    ]\n  )\n  return (\n    <LabelHelpContext.Provider value={contextValue}>\n      {children}\n    </LabelHelpContext.Provider>\n  )\n}\n","import useIsDesktop from \"./use-is-desktop\"\nexport default () => {\n  const isDesktop = useIsDesktop()\n  if (isDesktop) return false\n  if (window.location.search.includes(\"mode=labelonly\")) {\n    return true\n  }\n  return false\n}\n","export default (dataset, varName) => {\n  let fields = (dataset.interface || {}).fields || []\n  // const totalLabels = fields.reduce(\n  //   (acc, f) =>\n  //     f.interface.type !== \"data_entry\"\n  //       ? acc\n  //       : acc + (f.interface.surveyjs.questions[0].choices || []).length,\n  //   0\n  // )\n  // const totalBoundingBoxes = fields.filter(\n  //   (f) => f.interface.type === \"image_segmentation\"\n  // ).length\n\n  switch (varName) {\n    case \"sample_count\":\n    case \"num_samples\":\n      return (dataset.samples || []).length\n    case \"number_of_fields\":\n      return Object.keys(dataset.interface.fields || {}).length\n    case \"text_field_count\":\n      if (dataset.interface.type === \"data_entry\") {\n        return dataset.interface.surveyjs.questions.filter(\n          (q) => q.type === \"text\"\n        ).length\n      } else if (dataset.interface.type === \"composite\") {\n        return fields.filter(\n          (f) =>\n            f.interface.type === \"data_entry\" &&\n            f.interface.surveyjs.questions[0].type === \"text\"\n        ).length\n      } else {\n        throw new Error(\n          \"Couldn't compute text_field_count for interface: \" +\n            dataset.interface.type\n        )\n      }\n    case \"number_of_classifications\":\n      return dataset.interface.labels.length\n    case \"average_number_of_interactions_per_image\":\n      // find completed samples\n      const completedSamples = dataset.samples.filter((s) => s.annotation)\n      let totalInteractions = 0\n      let totalSamplesConsidered = 0\n      for (const { annotation } of completedSamples) {\n        if (totalSamplesConsidered > 10) break\n        if (typeof annotation === \"object\" && annotation.length) {\n          totalSamplesConsidered += 1\n          for (const { points } of annotation) {\n            if (points) {\n              totalInteractions += points.length\n            } else {\n              totalInteractions += 1\n            }\n          }\n        }\n      }\n      if (totalSamplesConsidered < 1)\n        throw new Error(\n          \"Not enough completed samples to compute average_number_of_interactions_per_image\"\n        )\n      return totalInteractions / totalSamplesConsidered\n    case \"number_of_exclusive_classifications\":\n      return dataset.interface.multiple ? 0 : dataset.interface.labels.length\n    case \"number_of_nonexclusive_classifications\":\n      return dataset.interface.multiple ? dataset.interface.labels.length : 0\n    case \"average_text_length\":\n      return (\n        dataset.samples\n          .map((s) => s.document.length)\n          .reduce((acc, l) => acc + l, 0) / dataset.samples.length\n      )\n    case \"number_of_labels\":\n      return dataset.interface.labels.length\n    default:\n      throw new Error(`Don't know how to compute \"${varName}\"`)\n  }\n}\n","import { useContext, useEffect } from \"react\"\n\nimport useIsLabelOnlyMode from \"../../utils/use-is-label-only-mode\"\nimport { useActiveDataset } from \"../FileContext\"\nimport { useAppConfig } from \"../AppConfig\"\nimport { LabelHelpContext } from \"./LabelHelpProvider.js\"\nimport computeDatasetVariable from \"../../utils/compute-dataset-variable\"\n\nexport const useLabelHelp = () => {\n  const isLabelOnlyMode = useIsLabelOnlyMode()\n  const { dataset } = useActiveDataset()\n  const {\n    pricingConfig,\n    myCredits,\n    remoteFile,\n    loadPricingConfig,\n    loadMyCredits,\n  } = useContext(LabelHelpContext)\n  const { fromConfig } = useAppConfig()\n  const labelHelpDisabled = Boolean(fromConfig(\"labelhelp.disabled\"))\n  const hasLabelHelpAPIKey = Boolean(fromConfig(\"labelhelp.apikey\"))\n\n  useEffect(() => {\n    if (labelHelpDisabled || isLabelOnlyMode) return\n    if (!dataset) return\n    if (!pricingConfig) loadPricingConfig()\n  }, [\n    pricingConfig,\n    isLabelOnlyMode,\n    labelHelpDisabled,\n    loadPricingConfig,\n    dataset,\n  ])\n\n  if (!dataset)\n    return {\n      labelHelpEnabled: false,\n      labelHelpError: \"no active dataset\",\n    }\n  if (labelHelpDisabled)\n    return { labelHelpEnabled: false, labelHelpError: \"Disabled in config\" }\n  if (isLabelOnlyMode) return { labelHelpEnabled: false }\n  if (!hasLabelHelpAPIKey && dataset.samples.length < 100) {\n    return {\n      labelHelpEnabled: false,\n      labelHelpError: \"Less than 100 samples\",\n    }\n  }\n  if (!pricingConfig) {\n    return {\n      labelHelpEnabled: false,\n      labelHelpError: \"No pricing config\",\n    }\n  }\n\n  try {\n    const { formula, variables: variableDescriptions } =\n      pricingConfig[dataset.interface.type] || {}\n\n    if (!formula)\n      return {\n        labelHelpEnabled: false,\n        labelHelpError: `No pricing formula for \"${dataset.interface.type}\"`,\n      }\n\n    const variables = {}\n    for (const variableName of Object.keys(variableDescriptions)) {\n      variables[variableName] = computeDatasetVariable(dataset, variableName)\n    }\n\n    const funcArgs = Object.keys(variables)\n    // TODO sanitize formula\n    // eslint-disable-next-line\n    const formulaFuncPos = new Function(...funcArgs, \"return \" + formula)\n    const formulaFunc = (variables) => {\n      return formulaFuncPos(...funcArgs.map((ak) => variables[ak]))\n    }\n    const totalCost = formulaFunc(variables)\n\n    return {\n      labelHelpEnabled: true,\n      myCredits,\n      loadMyCredits,\n      remoteFile,\n      formula,\n      variableDescriptions,\n      variables,\n      formulaFunc,\n      totalCost,\n      labelHelpAPIKey: fromConfig(\"labelhelp.apikey\"),\n    }\n  } catch (e) {\n    return { labelHelpEnabled: false, labelHelpError: e.toString() }\n  }\n}\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport APIKeyEntry from \"./api-key-entry.js\"\nimport PaperContainer from \"../PaperContainer\"\nimport LabelHelpDialogContent from \"./label-help-dialog-content\"\nimport { useAppConfig } from \"../AppConfig\"\n\nexport { LabelHelpProvider, LabelHelpContext } from \"./LabelHelpProvider.js\"\nexport { useLabelHelp } from \"./use-label-help\"\n\nconst Container = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n})\n\nexport const LabelHelpView = () => {\n  const { fromConfig } = useAppConfig()\n  const hasAPIKey = Boolean(fromConfig(\"labelhelp.apikey\"))\n\n  return (\n    <Container>\n      {!hasAPIKey ? (\n        <APIKeyEntry key=\"apikeyentry\" />\n      ) : (\n        <PaperContainer\n          key=\"dialogcontent\"\n          style={{ marginTop: 48, width: \"100%\", maxWidth: 800 }}\n        >\n          <LabelHelpDialogContent />\n        </PaperContainer>\n      )}\n    </Container>\n  )\n}\n\nexport default LabelHelpView\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  fontSize: 18,\n  padding: 32,\n  textAlign: \"center\",\n  color: colors.grey[700],\n  \"& a\": {\n    color: colors.blue[500],\n  },\n})\n\nexport const ActiveLearningView = () => {\n  return (\n    <Container>\n      Hey, this isn't available yet, but if you'd like this functionality please\n      let us know by leaving a thumbs up on{\" \"}\n      <a href=\"https://github.com/UniversalDataTool/universal-data-tool/issues/148\">\n        this github issue\n      </a>\n    </Container>\n  )\n}\n\nexport default ActiveLearningView\n","import React, { useEffect, useState } from \"react\"\nimport LabelErrorBoundary from \"../LabelErrorBoundary\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport Stats from \"../Stats\"\nimport SampleGrid from \"../SampleGrid\"\nimport Box from \"@material-ui/core/Box\"\nimport { setIn } from \"seamless-immutable\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport duration from \"duration\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport SupervisedUserCircleIcon from \"@material-ui/icons/SupervisedUserCircle\"\nimport DataUsageIcon from \"@material-ui/icons/DataUsage\"\nimport LabelHelpView, { useLabelHelp } from \"../LabelHelpView\"\nimport ActiveLearningView from \"../ActiveLearningView\"\nimport useIsLabelOnlyMode from \"../../utils/use-is-label-only-mode\"\n\nconst OverviewContainer = styled(\"div\")({\n  padding: 16,\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  boxSizing: \"border-box\",\n})\n\nexport default ({\n  dataset,\n  onChangeDataset,\n  selectedBrush = \"complete\",\n  sampleIndex,\n  onChangeSampleIndex,\n  onClickSetup,\n  onChangeSampleTimeToComplete,\n  sampleTimeToComplete,\n}) => {\n  const [currentTab, setTab] = useState(\"label\")\n  const posthog = usePosthog()\n  const { labelHelpEnabled, totalCost } = useLabelHelp()\n  const labelOnlyMode = useIsLabelOnlyMode()\n  const [annotationStartTime, setAnnotationStartTime] = useState(null)\n\n  const isInOverview = sampleIndex === null\n\n  let percentComplete = 0\n  if (dataset.samples && dataset.samples.length > 0) {\n    percentComplete =\n      dataset.samples\n        .map((s) => s.annotation !== undefined && s.annotation !== null)\n        .filter(Boolean).length / dataset.samples.length\n  }\n\n  useEffect(() => {\n    if (labelHelpEnabled) {\n      posthog.capture(\"label_help_showed\")\n    }\n  }, [labelHelpEnabled, posthog])\n\n  useEffect(() => {\n    if (currentTab === \"labelhelp\") {\n      posthog.capture(\"label_help_clicked\")\n    }\n  }, [currentTab, posthog])\n\n  return !isInOverview ? (\n    <LabelErrorBoundary>\n      <UniversalDataViewer\n        sampleIndex={sampleIndex}\n        onRemoveSample={(sampleIndex) => {\n          if (window.confirm(\"Are you sure you want to delete this sample?\")) {\n            onChangeDataset(\n              setIn(\n                dataset,\n                [\"samples\"],\n                dataset.samples.filter((s, i) => i !== sampleIndex)\n              )\n            )\n          }\n        }}\n        onSaveTaskOutputItem={(relativeIndex, output) => {\n          const sample = dataset.samples[sampleIndex]\n\n          let newDataset = dataset\n          newDataset = setIn(\n            newDataset,\n            [\"samples\", sampleIndex, \"annotation\"],\n            output\n          )\n\n          if (\n            sample.brush !== selectedBrush &&\n            !(sample.brush === undefined && selectedBrush === \"complete\")\n          ) {\n            newDataset = setIn(\n              newDataset,\n              [\"samples\", sampleIndex, \"brush\"],\n              selectedBrush\n            )\n          }\n          onChangeDataset(newDataset)\n        }}\n        onExit={(nextAction = \"nothing\") => {\n          if (annotationStartTime) {\n            onChangeSampleTimeToComplete(Date.now() - annotationStartTime)\n          }\n          switch (nextAction) {\n            case \"go-to-next\":\n              if (sampleIndex !== dataset.samples.length - 1) {\n                posthog.capture(\"next_sample\", {\n                  interface_type: dataset.interface.type,\n                })\n                // TODO reset start time\n                onChangeSampleIndex(sampleIndex + 1)\n                setAnnotationStartTime(Date.now())\n                return\n              }\n              break\n            case \"go-to-previous\":\n              if (sampleIndex !== 0) {\n                onChangeSampleIndex(sampleIndex - 1)\n                setAnnotationStartTime(Date.now())\n                return\n              }\n              break\n            default:\n              break\n          }\n          onChangeSampleIndex(null)\n        }}\n        dataset={dataset}\n        onClickSetup={onClickSetup}\n      />\n    </LabelErrorBoundary>\n  ) : (\n    <OverviewContainer>\n      <Box display=\"flex\">\n        <Box>\n          <Tabs value={currentTab} onChange={(e, newTab) => setTab(newTab)}>\n            <Tab icon={<BorderColorIcon />} label=\"Label\" value=\"label\" />\n            {!labelOnlyMode && (\n              <Tab\n                icon={<DataUsageIcon />}\n                label=\"Active Learning\"\n                value=\"activelearning\"\n              />\n            )}\n            {!labelOnlyMode && (\n              <Tab\n                icon={<SupervisedUserCircleIcon />}\n                label={\n                  totalCost && totalCost >= 100\n                    ? `$${totalCost.toFixed(2)}`\n                    : \"Label Help\"\n                }\n                value=\"labelhelp\"\n              />\n            )}\n          </Tabs>\n        </Box>\n        <Box flexGrow={1} />\n        <Stats\n          stats={[\n            {\n              name: \"Percent Complete\",\n              value: Math.floor(percentComplete * 100) + \"%\",\n            },\n            {\n              name: \"Time per Sample\",\n              value: duration(\n                new Date(Date.now() - sampleTimeToComplete)\n              ).toString(1, 1),\n            },\n            {\n              name: \"Estimated Remaining\",\n              value: duration(\n                new Date(\n                  Date.now() -\n                    sampleTimeToComplete *\n                      (1 - percentComplete) *\n                      (dataset.samples || []).length\n                )\n              ).toString(1, 2),\n            },\n          ]}\n        />\n      </Box>\n      <Box flexGrow={1}>\n        {currentTab === \"label\" && (\n          <SampleGrid\n            tablePaginationPadding={6}\n            count={(dataset.samples || []).length}\n            samples={dataset.samples || []}\n            completed={(dataset.samples || []).map((s) =>\n              Boolean(s.annotation)\n            )}\n            onClick={(selectedSampleIndex) => {\n              posthog.capture(\"open_sample\", {\n                interface_type: dataset.interface.type,\n              })\n              onChangeSampleIndex(selectedSampleIndex)\n            }}\n          />\n        )}\n        {currentTab === \"activelearning\" && <ActiveLearningView />}\n        {currentTab === \"labelhelp\" && <LabelHelpView />}\n      </Box>\n    </OverviewContainer>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nimport Header from \"../Header\"\nimport EditableTitleText from \"./EditableTitleText.js\"\nimport SamplesView from \"../SamplesView\"\nimport SetupPage from \"../SetupPage\"\nimport EditSampleDialog from \"../EditSampleDialog\"\nimport useElectron from \"../../utils/use-electron\"\nimport useTimeToCompleteSample from \"../../utils/use-time-to-complete-sample.js\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { useToasts } from \"../Toasts\"\nimport { setIn, without } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport classnames from \"classnames\"\nimport LabelView from \"../LabelView\"\nimport useIsLabelOnlyMode from \"../../utils/use-is-label-only-mode\"\nimport { HotKeys } from \"react-hotkeys\"\nimport { useHotkeyStorage } from \"../HotkeyStorage\"\n\nimport \"brace/mode/javascript\"\nimport \"brace/theme/github\"\n\nconst useStyles = makeStyles({\n  headerButton: {\n    color: \"#fff\",\n  },\n  saveIcon: {\n    marginRight: 4,\n  },\n  editIcon: {\n    marginLeft: 4,\n  },\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n})\n\nexport default ({\n  file,\n  datasetName = \"Universal Data Tool\",\n  dataset,\n  content,\n  inSession,\n  url,\n  fileName = \"unnamed\",\n  onChangeDataset = () => null,\n  onChangeFile,\n  onFileDrop,\n  initialMode = \"setup\",\n  authConfig,\n  user,\n  recentItems,\n  selectedBrush,\n}) => {\n  const labelOnlyMode = useIsLabelOnlyMode()\n  var [valueDisplay, setValueDisplay] = useState(fileName)\n  const c = useStyles()\n  const { addToast } = useToasts()\n  const [mode, changeMode] = useState(labelOnlyMode ? \"label\" : initialMode)\n  const [sampleInputEditor, changeSampleInputEditor] = useState({})\n  const { ipcRenderer } = useElectron() || {}\n  const posthog = usePosthog()\n\n  const [sampleIndex, setSampleIndex] = useState(null)\n\n  const headerTabs = labelOnlyMode ? [\"Label\"] : [\"Setup\", \"Samples\", \"Label\"]\n\n  const [\n    sampleTimeToComplete,\n    changeSampleTimeToComplete,\n  ] = useTimeToCompleteSample()\n\n  useEffect(() => {\n    if (!ipcRenderer) return\n    const onOpenSettingsPage = () => changeMode(\"settings\")\n    const onOpenSamplesPage = () => changeMode(\"samples\")\n    const onOpenLabelPage = () => changeMode(\"label\")\n    ipcRenderer.on(\"open-settings-page\", onOpenSettingsPage)\n    ipcRenderer.on(\"open-samples-page\", onOpenSamplesPage)\n    ipcRenderer.on(\"open-label-page\", onOpenLabelPage)\n    return () => {\n      ipcRenderer.removeListener(\"open-settings-page\", onOpenSettingsPage)\n      ipcRenderer.removeListener(\"open-samples-page\", onOpenSamplesPage)\n      ipcRenderer.removeListener(\"open-label-page\", onOpenLabelPage)\n    }\n  }, [ipcRenderer])\n\n  useEffect(() => {\n    posthog.people.set({\n      average_time_to_complete_sample: sampleTimeToComplete,\n    })\n  }, [sampleTimeToComplete, posthog.people])\n\n  useEffect(() => {\n    if (mode !== \"label\") setSampleIndex(null)\n    posthog.capture(\"open_editor_tab\", { tab: mode })\n  }, [mode, posthog])\n\n  const onChangeTab = useEventCallback((tab) => changeMode(tab.toLowerCase()))\n\n  const shortcutHandlers = useMemo(\n    () => ({\n      switch_to_label: () => changeMode(\"label\"),\n      switch_to_setup: () => changeMode(\"setup\"),\n      switch_to_samples: () => changeMode(\"samples\"),\n    }),\n    [changeMode]\n  )\n\n  const { keyMap } = useHotkeyStorage()\n\n  return (\n    <HotKeys allowChanges handlers={shortcutHandlers} keyMap={keyMap}>\n      <div className={classnames(c.container, \"universaldatatool\")}>\n        <Header\n          title={\n            inSession ? (\n              <TextField\n                label=\"Share Link\"\n                title=\"share-link\"\n                value={url}\n                variant=\"outlined\"\n                size=\"small\"\n              />\n            ) : (\n              <EditableTitleText\n                label=\"File Name\"\n                onChange={(newName) => {\n                  onChangeFile(setIn(file, [\"fileName\"], newName))\n                  setValueDisplay(newName)\n                }}\n                value={valueDisplay || \"\"}\n              />\n            )\n          }\n          onChangeTab={onChangeTab}\n          currentTab={mode}\n          tabs={headerTabs}\n        />\n        <div style={{ height: \"100%\", overflowY: \"scroll\" }}>\n          {mode === \"setup\" && (\n            <SetupPage\n              dataset={dataset}\n              onClearLabelData={() => {\n                onChangeDataset(\n                  setIn(\n                    dataset,\n                    [\"samples\"],\n                    dataset.samples.map((s) => without(s, \"annotation\"))\n                  )\n                )\n              }}\n              onChange={(newDataset) => {\n                const { interface: iface } = newDataset\n                if (\n                  iface.type !== dataset.interface.type &&\n                  dataset.interface.type !== \"empty\" &&\n                  dataset.samples.map((s) => s.annotation).some(Boolean)\n                ) {\n                  addToast(\n                    \"Changing label types can cause label data issues. You must clear all label data first.\",\n                    \"error\"\n                  )\n                  return\n                }\n                onChangeDataset(newDataset)\n              }}\n            />\n          )}\n          {mode === \"samples\" && (\n            <SamplesView\n              file={file}\n              dataset={dataset}\n              openSampleLabelEditor={(sampleIndex) => {\n                setSampleIndex(sampleIndex)\n                posthog.capture(\"open_sample\", {\n                  interface_type: dataset.interface.type,\n                })\n                changeMode(\"label\")\n              }}\n              openSampleInputEditor={(sampleIndex) => {\n                changeSampleInputEditor({ open: true, sampleIndex })\n              }}\n              deleteSample={(sampleIndex) => {\n                const newSamples = [...dataset.samples]\n                newSamples.splice(sampleIndex, 1)\n                onChangeDataset({\n                  ...dataset,\n                  samples: newSamples,\n                })\n              }}\n              onChangeFile={(file) => {\n                onChangeFile(file)\n                setValueDisplay(file.fileName)\n              }}\n              onChangeDataset={onChangeDataset}\n              authConfig={authConfig}\n              user={user}\n            />\n          )}\n          {mode === \"label\" && (\n            <LabelView\n              selectedBrush={selectedBrush}\n              dataset={dataset}\n              sampleIndex={sampleIndex}\n              onChangeSampleIndex={setSampleIndex}\n              sampleTimeToComplete={sampleTimeToComplete}\n              onChangeSampleTimeToComplete={changeSampleTimeToComplete}\n              onChangeDataset={onChangeDataset}\n              onClickSetup={() => changeMode(\"setup\")}\n            />\n          )}\n        </div>\n        <EditSampleDialog\n          {...sampleInputEditor}\n          sampleInput={\n            sampleInputEditor.sampleIndex !== undefined\n              ? dataset.samples[sampleInputEditor.sampleIndex]\n              : null\n          }\n          onClose={() => {\n            changeSampleInputEditor({ open: false })\n          }}\n          onChange={(newInput) => {\n            onChangeDataset(\n              setIn(\n                dataset,\n                [\"samples\", sampleInputEditor.sampleIndex],\n                newInput\n              )\n            )\n          }}\n        />\n      </div>\n    </HotKeys>\n  )\n}\n","import { useReducer } from \"react\"\n\nexport default () => {\n  const [{ timeToCompleteSample }, changeSampleTimeToComplete] = useReducer(\n    (state, newTimeToComplete) => {\n      const newSamplesInWindow = state.samplesInWindow\n        .slice(-10)\n        .concat([newTimeToComplete])\n      return {\n        timeToCompleteSample:\n          newSamplesInWindow.reduce((acc, a) => acc + a, 0) /\n          newSamplesInWindow.length,\n        samplesInWindow: newSamplesInWindow,\n      }\n    },\n    { timeToCompleteSample: 0, samplesInWindow: [] }\n  )\n  return [timeToCompleteSample, changeSampleTimeToComplete]\n}\n","// @flow weak\n\nexport default (changeLog) => {\n  const humanReadableChangeLog = []\n  for (const { userName, op, path } of changeLog) {\n    if (path.startsWith(\"/interface\")) {\n      humanReadableChangeLog.push({\n        type: \"warning\",\n        message: `${userName} changed the project settings`,\n      })\n    } else if (path.startsWith(\"/taskOutput\")) {\n      const sampleMatch = path.match(/\\/samples\\/([^/]+)/)\n      humanReadableChangeLog.push({\n        type: \"info\",\n        message: `${userName} changed sample ${sampleMatch[1]}`,\n      })\n    } else {\n      humanReadableChangeLog.push({\n        message: `${userName} did a ${op} at ${path}`,\n        type: \"info\",\n      })\n    }\n  }\n  return humanReadableChangeLog\n}\n","/*\nThis doesn't handle a fair number of edge cases, for the full specification\nfor what it should implement, see https://tools.ietf.org/html/rfc6902\n\nWhen applySeamlessPatch is called, it usually is accompanied by a object hash\ncheck to make sure that the patch applied correctly, and if not, perform\na download of the latest version. Because of this, we can safely ignore the\ntricky edge cases.\n*/\n\nimport seamless from \"seamless-immutable\"\n\nconst { setIn, getIn, updateIn, without } = seamless\n\nfunction addToArray(a, newValue) {\n  return a.concat([newValue])\n}\n\nfunction withoutIn(obj, path) {\n  if (path.length === 0) return without(obj, path[0])\n  const parentPath = path.slice(0, -1)\n  const key = path[path.length - 1]\n  const parentObj = getIn(obj, parentPath)\n  if (Array.isArray(parentObj)) {\n    const index = parseInt(key)\n    return setIn(obj, parentPath, [\n      ...parentObj.slice(0, index),\n      ...parentObj.slice(index + 1),\n    ])\n  } else {\n    return setIn(obj, parentPath, without(parentObj, key))\n  }\n}\n\nexport default (object, patches) => {\n  for (const patch of patches) {\n    let { op, path } = patch\n    path = path.split(\"/\").filter(Boolean)\n    if (path.length === 0) {\n      // this operation is on the root object, special handling should apply\n      if (op === \"replace\") {\n        object = patch.value\n        continue\n      }\n      throw new Error(\"Operation on root object not supported\")\n    }\n    switch (op) {\n      case \"replace\": {\n        object = setIn(object, path, patch.value)\n        continue\n      }\n      case \"copy\": {\n        object = setIn(object, path, getIn(object, patch.from.split(\"/\")))\n        continue\n      }\n      case \"add\": {\n        if (!isNaN(parseInt(path.slice(-1)[0]))) {\n          object = setIn(object, path, patch.value)\n        } else {\n          const arrayAtPath = Array.isArray(getIn(object, path))\n          if (arrayAtPath) {\n            object = updateIn(object, path, addToArray, patch.value)\n          } else {\n            object = setIn(object, path, patch.value)\n          }\n        }\n        continue\n      }\n      case \"move\": {\n        const from = patch.from.split(\"/\")\n        object = setIn(object, path, getIn(object, from))\n        object = withoutIn(object, from)\n        continue\n      }\n      case \"remove\": {\n        object = withoutIn(object, path)\n        continue\n      }\n      default:\n        return object\n    }\n  }\n  return object\n}\n","// This is the same hashing code that the server uses\n\nconst stringify = require(\"json-stable-stringify\")\n\nconst hashString = (s) => {\n  var hash = 0,\n    i,\n    chr\n  for (i = 0; i < s.length; i++) {\n    chr = s.charCodeAt(i)\n    hash = (hash << 5) - hash + chr\n    hash |= 0\n  }\n  return hash\n}\n\nexport default (o) => hashString(stringify(o))\n","// @flow\n\nimport { useEffect } from \"react\"\nimport CollaborationHandler from \"./handler.js\"\nimport { setIn } from \"seamless-immutable\"\n\nconst serverUrl =\n  window.localStorage.CUSTOM_COLLABORATION_SERVER ||\n  \"https://udt-collaboration-server.now.sh\"\n\n// We use a global singleton to manage the collaboration state machine\nconst collab = new CollaborationHandler({ serverUrl })\n\nexport const convertToCollaborativeFile = async (file) => {\n  await collab.createSession(file.content)\n  return {\n    fileName: file.fileName,\n    id: file.id,\n    sessionId: collab.sessionId,\n    url: `${window.location.origin}/app/?s=${collab.sessionId}`,\n    content: file.content,\n    mode: \"server\",\n  }\n}\n\nexport const joinSession = async (sessionId) => {\n  await collab.joinSession(sessionId)\n  return {\n    state: collab.state,\n    version: collab.version,\n  }\n}\n\nexport default (file, changeFile) => {\n  // const { addToast } = useToasts()\n  const userName = window.localStorage.userName\n  useEffect(() => {\n    if (userName && !userName.includes(\"anonymous\")) {\n      try {\n        collab.userName = JSON.parse(window.localStorage.userName)\n      } catch (e) {}\n    }\n  }, [userName])\n\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n    if (file.sessionId !== collab.sessionId) return\n\n    const checkForLatestPatch = async () => {\n      const applyResult = await collab.applyLatestPatches()\n\n      if (applyResult) {\n        // TODO apply in a smart, immutable way\n        changeFile(setIn(file, [\"content\"], collab.state))\n      }\n\n      if (!timeout) return\n      timeout = setTimeout(checkForLatestPatch, 500)\n    }\n\n    let timeout = setTimeout(checkForLatestPatch, 500)\n    return () => {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }, [file, changeFile])\n\n  // Update the Server State by Sending Patches\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n    collab.sendPatchIfChanged(file.content)\n  }, [file])\n}\n","// @flow weak\n// NOTE: for unit tests you need to change the following line to...\n// import rfc6902 from \"rfc6902\"\nimport * as rfc6902 from \"rfc6902\"\nimport bent from \"bent\"\nimport getHumanReadableLog from \"./get-human-readable-log.js\"\nimport applySeamlessPatch from \"./apply-seamless-patch.js\"\nimport hash from \"./server-hash.js\"\n\nclass CollaborationHandler {\n  serverUrl = \"http://localhost:6003\"\n  getJSON = (url, payload, opts) => {}\n  postJSON = (url, payload, opts) => {}\n  patchJSON = (url, payload, opts) => {}\n  userName = \"anonymous\"\n\n  sessionId = null\n  state = null\n  version = null\n\n  constructor({ serverUrl, userName }) {\n    this.serverUrl = serverUrl\n    this.getJSON = bent(\"json\", \"GET\", serverUrl)\n    this.postJSON = bent(\"json\", \"POST\", serverUrl)\n    this.patchJSON = bent(\"json\", \"PATCH\", serverUrl)\n    this.userName =\n      userName || `anonymous_${Math.random().toString(36).slice(2, 6)}`\n  }\n\n  async createSession(initialContent) {\n    const response = await this.postJSON(\"/api/session\", {\n      udt: initialContent,\n    })\n\n    this.state = initialContent\n    this.sessionId = response.short_id\n    this.version = response.version\n  }\n\n  async getLatestState() {\n    try {\n      const res = await this.getJSON(\n        `/api/session/${encodeURIComponent(this.sessionId)}`\n      )\n      return {\n        state: res.udt_json,\n        version: res.version,\n      }\n    } catch (e) {\n      throw new Error(\n        `error getting session \"${this.sessionId}\": ${e.toString()}`\n      )\n    }\n  }\n\n  async updateToLatestState() {\n    const { state, version } = await this.getLatestState()\n    this.state = state\n    this.version = version\n  }\n\n  async joinSession(sessionId) {\n    this.sessionId = sessionId\n    await this.updateToLatestState()\n  }\n\n  async applyLatestPatches() {\n    const {\n      patch,\n      hashOfLatestState,\n      latestVersion,\n      changeLog,\n    } = await this.getJSON(\n      `/api/session/${encodeURIComponent(this.sessionId)}/diffs?since=${\n        this.version\n      }`\n    )\n\n    if (patch.length === 0 || latestVersion === this.version) {\n      return null\n    }\n\n    const humanReadableLog = getHumanReadableLog(changeLog)\n\n    let newState = applySeamlessPatch(this.state, patch)\n\n    if (hash(newState) !== hashOfLatestState) {\n      console.error(\"new state with patches applied didn't match latest state\")\n      await this.updateToLatestState()\n      return { patch, changeLog: humanReadableLog }\n    }\n\n    this.state = newState\n    this.version = latestVersion\n    return { patch, changeLog: humanReadableLog }\n  }\n\n  async sendPatchIfChanged(newState) {\n    const patch = rfc6902.createPatch(this.state, newState)\n    if (patch.length === 0) return null\n\n    const { hashOfLatestState, latestVersion } = await this.patchJSON(\n      `/api/session/${encodeURIComponent(this.sessionId)}`,\n      {\n        patch,\n        userName: this.userName,\n      }\n    )\n\n    if (hash(newState) !== hashOfLatestState) {\n      console.error(\n        \"after patch, hashes were not equal! getting latest version from server...\"\n      )\n      await this.updateToLatestState()\n      return this\n    }\n\n    this.state = newState\n    this.version = latestVersion\n    return this\n  }\n}\n\nexport default CollaborationHandler\n","import JAC from \"jac-format\"\nimport range from \"lodash/range\"\nimport { flatten } from \"flat\"\n\nexport default (obj) => {\n  const AddSamplesKeys = (k) => {\n    sampleKeys.add(k)\n  }\n  // Find all possible sample keys\n  let sampleKeys = new Set()\n  for (const sample of obj.samples) {\n    Object.keys(flatten(sample)).forEach((k) => AddSamplesKeys(k))\n  }\n  sampleKeys = Array.from(sampleKeys).sort(\n    (a, b) => a.split(\".\").length - b.split(\".\").length\n  )\n\n  if (sampleKeys.some((k) => k.includes(\"output.keyframes\"))) {\n    sampleKeys = sampleKeys.filter((k) => k.includes(\"output.keyframes\"))\n    sampleKeys.push(\"output.keyframes\")\n  }\n\n  const options = {\n    rows: [\n      \"interface\",\n      ...range(obj.samples.length).map((i) => `samples.${i}`),\n    ],\n    columns: [\".\", ...sampleKeys],\n    validate: false,\n  }\n\n  return JAC.toCSV(obj, options)\n}\n","// @flow\n\nimport { useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport useElectron from \"../use-electron.js\"\nimport { useToasts } from \"../../components/Toasts\"\nimport { setIn } from \"seamless-immutable\"\nimport toUDTCSV from \"../to-udt-csv.js\"\nimport useIsDesktop from \"../use-is-desktop\"\n\nconst webReturn = { saveFile: () => null }\n\nexport default (file, changeFile) => {\n  const isDesktop = useIsDesktop()\n  if (!isDesktop) return webReturn\n  const { addToast } = useToasts()\n  const { remote } = useElectron()\n  const saveFile = useEventCallback(({ saveAs = false } = {}) => {\n    if (!file) return\n    async function saveFileAsync() {\n      let filePath = file.filePath\n      if (!file.filePath || saveAs) {\n        const {\n          cancelled,\n          filePath: newFilePath,\n        } = await remote.dialog.showSaveDialog({\n          filters: [\n            { name: \".udt.json\", extensions: [\"udt.json\"] },\n            { name: \".udt.csv\", extensions: [\"udt.csv\"] },\n          ],\n        })\n        filePath =\n          !newFilePath ||\n          newFilePath.endsWith(\".json\") ||\n          newFilePath.endsWith(\".csv\")\n            ? newFilePath\n            : `${newFilePath}.udt.json`\n        if (cancelled || !filePath) {\n          addToast(\"Could not save\")\n          return\n        }\n        changeFile({\n          ...file,\n          filePath,\n          fileName: filePath.split(\"/\").slice(-1)[0],\n        })\n      }\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(\n          filePath,\n          filePath.endsWith(\".csv\")\n            ? toUDTCSV(file.content)\n            : JSON.stringify(file.content, null, \"  \")\n        )\n      addToast(\"File Saved!\")\n    }\n    saveFileAsync()\n  })\n\n  useEffect(() => {\n    if (!file || !file.filePath) return\n    if (file.fileName !== file.filePath.split(\"/\").slice(-1)[0]) {\n      changeFile(\n        setIn(\n          file,\n          [\"filePath\"],\n          file.filePath\n            .split(\"/\")\n            .slice(0, -1)\n            .concat([\n              file.fileName +\n                (file.fileName.endsWith(\".json\") ? \"\" : \".dataset.json\"),\n            ])\n            .join(\"/\")\n        )\n      )\n    }\n  }, [file, changeFile])\n\n  return { saveFile }\n}\n","// @flow weak\n\nimport { useEffect } from \"react\"\nimport usePosthog from \"../../utils/use-posthog\"\nconst posthog = usePosthog()\n\nexport default (udt) => {\n  const udtInterface = udt?.interface\n  useEffect(() => {\n    if (!udtInterface) return\n    posthog.capture(\"interface_type\", { interface_type: udtInterface.type })\n    posthog.people.set({ last_used_interface_type: udtInterface.type })\n  }, [udtInterface])\n\n  const udtSamples = udt?.samples\n  const usedToyDataset = udt?.usedToyDataset\n  useEffect(() => {\n    if (!udtSamples) return\n    const numCompleted = (udtSamples || []).filter((s) => s.annotation).length\n    posthog.capture(\"samples_updated\", {\n      dataset_size: (udtSamples || []).length,\n      samples_completed: numCompleted,\n      percent_completed: numCompleted / (udtSamples || []).length,\n      toy_dataset_used: Boolean(usedToyDataset),\n    })\n    posthog.people.set({\n      recently_used_toy_dataset: Boolean(usedToyDataset),\n    })\n  }, [udtSamples, usedToyDataset])\n}\n","// @flow weak\n\nimport { useEffect, useRef, useCallback } from \"react\"\nimport UpdateAWSStorage from \"./update-aws-storage\"\nimport isEmpty from \"lodash/isEmpty\"\nimport useAuth from \"../../auth-handlers/use-auth\"\nimport getFilesDifferences from \"../../dataset-helper/get-files-differences.js\"\n\nconst workingInterfaces = [\n  \"video_segmentation\",\n  \"image_classification\",\n  \"image_segmentation\",\n  \"text_entity_recognition\",\n  \"text_classification\",\n  \"audio_transcription\",\n  \"composite\",\n  \"data_entry\",\n]\n\nexport default ({ file, setFile }) => {\n  const { isLoggedIn, authProvider, authConfig } = useAuth()\n\n  const lastObjectRef = useRef([])\n  const shouldUpdateAWSStorage = useCallback(() => {\n    if (!isLoggedIn || authProvider !== \"cognito\") return\n\n    var changes = getFilesDifferences(lastObjectRef.current, file)\n    if (\n      isEmpty(file) ||\n      (!changes.content.samples && !changes.fileName) ||\n      !workingInterfaces.includes(file.content.interface.type) ||\n      file.fileName === \"unnamed\"\n    )\n      return false\n    return true\n  }, [file, isLoggedIn, authProvider])\n\n  useEffect(() => {\n    if (!isLoggedIn || authProvider !== \"cognito\") return\n    if (!isEmpty(authConfig)) {\n      console.log(\"should update\", shouldUpdateAWSStorage())\n      if (shouldUpdateAWSStorage()) UpdateAWSStorage(file)\n      lastObjectRef.current = file\n    }\n  }, [shouldUpdateAWSStorage, authConfig, file, isLoggedIn, authProvider])\n}\n","import { Storage } from \"aws-amplify\"\nimport isEmpty from \"lodash/isEmpty\"\nimport * as datasetHelper from \"../../dataset-helper\"\nimport { setIn } from \"seamless-immutable\"\n\nexport default (file) => {\n  async function fetchAFile(element) {\n    var proxyUrl = \"https://cors-anywhere.herokuapp.com/\"\n    var response\n    var url\n    if (datasetHelper.getSampleUrl(element) !== undefined)\n      url = proxyUrl + datasetHelper.getSampleUrl(element)\n    response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"X-Requested-With\": \"xmlhttprequest\",\n      },\n    }).catch((error) => {\n      console.log(\"Looks like there was a problem: \\n\", error)\n    })\n    const blob = await response.blob()\n    return blob\n  }\n\n  function fileNameExist(file) {\n    if (file !== \"undefined\" && file.fileName !== \"undefined\") return true\n\n    return false\n  }\n\n  function createOrReplaceProjectFile(file) {\n    Storage.put(`${file.fileName}/`, null, {\n      level: \"private\",\n    }).catch((err) => console.log(err))\n  }\n\n  function createOrReplaceAnnotations(file, json) {\n    console.log({ file, json })\n    Storage.put(`${file.fileName}/annotations/annotations.json`, json, {\n      level: \"private\",\n    }).catch((err) => console.log(err))\n  }\n\n  function createOrReplaceImages(file) {\n    // TODO you can't have async in a forEach loop\n    if (!isEmpty(file.content.samples)) {\n      file.content.samples.forEach(async (element) => {\n        try {\n          var blob\n          if (!isEmpty(datasetHelper.getSampleUrl(element))) {\n            blob = await fetchAFile(element)\n          } else if (!isEmpty(element.document)) {\n            blob = element.document\n          }\n\n          let imageOrVideoName\n          if (isEmpty(element.sampleName)) {\n            imageOrVideoName = datasetHelper.getSampleName(element)\n          } else {\n            imageOrVideoName = element.sampleName\n          }\n\n          var pathToFile = `${file.fileName}/data/${imageOrVideoName}`\n          Storage.put(pathToFile, blob, {\n            level: \"private\",\n          }).catch((err) => console.log(err))\n        } catch (err) {\n          console.log(err)\n        }\n      })\n    }\n  }\n\n  if (fileNameExist(file)) {\n    var dataset = file.content\n    // TODO datasetHelper.setSamplesName is returning an incorrect object, it\n    // should be returning an array of samples\n    console.log(\n      \"this should be an array of samples\",\n      datasetHelper.setSamplesName(dataset)\n    )\n    file = setIn(\n      file,\n      [\"content\"],\n      setIn(dataset, [\"samples\"], datasetHelper.setSamplesName(dataset))\n    )\n    var json = JSON.stringify(file)\n    createOrReplaceProjectFile(file)\n    createOrReplaceAnnotations(file, json)\n    createOrReplaceImages(file)\n  }\n}\n","// @flow\n\nimport { useState, useMemo, useEffect } from \"react\"\nimport useServer, {\n  joinSession,\n  convertToCollaborativeFile,\n} from \"./use-server\"\nimport useFilesystem from \"./use-filesystem\"\nimport useLocalStorage from \"./use-local-storage\"\nimport { useToasts } from \"../../components/Toasts\"\nimport fromUDTCSV from \"../from-udt-csv.js\"\nimport useEventCallback from \"use-event-callback\"\nimport useFileTelemetry from \"./use-file-telemetry\"\nimport useAWSCognito from \"./use-aws-cognito\"\n\nexport default () => {\n  const [file, setFile] = useState()\n  const { addToast } = useToasts()\n\n  const { saveFile } = useFilesystem(file, setFile)\n  const { recentItems, changeRecentItems } = useLocalStorage(file, setFile)\n  useServer(file, setFile)\n\n  // Auth/Cloud\n  useAWSCognito({ file, setFile })\n\n  // Telemetry\n  useFileTelemetry(file && file.content)\n\n  const openFile = useEventCallback((fsFile) => {\n    const { name: fileName, path: filePath } = fsFile\n\n    function handleLoadedFile(content) {\n      try {\n        let dataset\n        if (fileName.endsWith(\"csv\")) {\n          dataset = fromUDTCSV(content)\n        } else {\n          dataset = JSON.parse(content)\n        }\n        // TODO validate OHA and prompt to open anyway if invalid\n        setFile({\n          fileName,\n          filePath,\n          mode: filePath ? \"filesystem\" : \"local-storage\",\n          content: dataset,\n          id: filePath,\n        })\n      } catch (e) {\n        console.log(e.toString())\n        addToast(\"Couldn't read file, see console for details\", \"error\")\n        // addError(`Could not read file \"${fsFile.name}\"`)\n      }\n    }\n\n    if (fsFile.content) {\n      handleLoadedFile(fsFile.content)\n    } else {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const content = e.target.result\n        handleLoadedFile(content)\n      }\n      reader.readAsText(fsFile)\n    }\n  })\n\n  const openUrl = useEventCallback(async (url) => {\n    const sessionId = decodeURIComponent(url.match(/[?&]s=([^&]+)/)[1])\n    const labelOnly = url.includes(\"mode=labelonly\")\n    if (!sessionId) return\n    const { state } = await joinSession(sessionId)\n    if (!state) return\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/app/?s=${encodeURIComponent(sessionId)}${\n        labelOnly ? \"&mode=labelonly\" : \"\"\n      }`\n    )\n    setFile({\n      url,\n      sessionId,\n      mode: \"server\",\n      id: sessionId,\n      content: state,\n    })\n  })\n\n  useEffect(() => {\n    if (!file) return\n    if (file.mode === \"server\") return\n    window.history.replaceState({}, window.document.title, `/`)\n  }, [file])\n\n  useEffect(() => {\n    if (window.location.search.match(/[?&]s=([a-zA-Z0-9]+)/)) {\n      openUrl(window.location.href)\n    }\n  }, [openUrl])\n\n  const makeSession = useEventCallback(async () => {\n    const newFile = await convertToCollaborativeFile(file)\n    setFile(newFile)\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/app/?s=${encodeURIComponent(newFile.sessionId)}`\n    )\n  })\n\n  return useMemo(\n    () => ({\n      file,\n      setFile,\n      openFile,\n      openUrl,\n      makeSession,\n      saveFile,\n      recentItems,\n      changeRecentItems,\n    }),\n    [\n      file,\n      setFile,\n      openFile,\n      saveFile,\n      makeSession,\n      recentItems,\n      changeRecentItems,\n      openUrl,\n    ]\n  )\n}\n","// @flow\nimport { useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\n\nexport default (file, changeFile) => {\n  let [recentItems, changeRecentItems] = useLocalStorage(\"recentItems\", [])\n\n  if (!recentItems) recentItems = []\n  useEffect(() => {\n    if (!file || file.fileName === \"unnamed\") return\n    if (recentItems.map((item) => item.id).includes(file.id)) {\n      changeRecentItems(\n        recentItems.map((ri) => (ri.id === file.id ? file : ri))\n      )\n    } else {\n      changeRecentItems([file].concat(recentItems).slice(0, 3))\n    }\n    // eslint-disable-next-line\n  }, [file, changeRecentItems])\n  return { recentItems, changeRecentItems }\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { detect } from \"detect-browser\"\nimport Button from \"@material-ui/core/Button\"\nimport LaunchIcon from \"@material-ui/icons/Launch\"\nimport Sentry from \"../../utils/sentry.js\"\n\nconst Container = styled(\"div\")({\n  width: \"100vw\",\n  minHeight: \"100vh\",\n  backgroundColor: colors.grey[900],\n  padding: 32,\n  \"& .title\": {\n    color: colors.grey[200],\n    fontSize: 24,\n    fontWeight: \"bold\",\n  },\n  \"& .subtitle\": {\n    color: colors.grey[300],\n    fontSize: 18,\n    marginTop: 8,\n  },\n  \"& .info\": {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    padding: 32,\n    \"& textarea\": {\n      width: \"calc(100% - 64px)\",\n      boxSizing: \"border-box\",\n      minHeight: 300,\n      fontSize: 12,\n    },\n  },\n})\nconst Buttons = styled(\"div\")({\n  padding: 8,\n})\nconst StyledButton = styled(Button)({\n  color: \"#fff\",\n  borderColor: \"rgba(255,255,255,0.5)\",\n  margin: 8,\n})\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      errorDetails: JSON.stringify(detect()) + \"\\n\\n\" + error.stack,\n    }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    Sentry.withScope((scope) => {\n      scope.setExtras(errorInfo)\n      const eventId = Sentry.captureException(error)\n      this.setState({ eventId })\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <Container>\n          <div className=\"title\">An error has occurred</div>\n          <div className=\"subtitle\">All the details are below:</div>\n          <div className=\"info\">\n            <textarea>{this.state.errorDetails}</textarea>\n          </div>\n          <Buttons>\n            <StyledButton\n              variant=\"outlined\"\n              target=\"_blank\"\n              href=\"https://github.com/Universal/universal-data-tool/issues\"\n            >\n              <LaunchIcon style={{ color: \"#fff\", marginRight: 8 }} /> View\n              Issues on Github\n            </StyledButton>\n            {/* <StyledButton\n              variant=\"outlined\"\n              onClick={this.props.revertLastChange}\n            >\n              Revert Last File Change\n            </StyledButton> */}\n            <StyledButton\n              variant=\"outlined\"\n              onClick={() => window.location.reload()}\n            >\n              Reload (unsaved progress will be lost)\n            </StyledButton>\n          </Buttons>\n        </Container>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","// @flow weak\n\nimport { useEffect } from \"react\"\n\nfunction preventNavigation(e) {\n  var confirmationMessage =\n    \"It looks like you have been editing something. \" +\n    \"If you leave before saving, your changes will be lost.\"\n\n  ;(e || window.event).returnValue = confirmationMessage //Gecko + IE\n  return confirmationMessage //Gecko + Webkit, Safari, Chrome etc.\n}\n\nexport default (shouldPreventNavigation = true) => {\n  useEffect(() => {\n    if (!shouldPreventNavigation) return\n    if (window.location.origin.includes(\"localhost\")) return\n    window.addEventListener(\"beforeunload\", preventNavigation)\n    return () => {\n      window.removeEventListener(\"beforeunload\", preventNavigation)\n    }\n  }, [shouldPreventNavigation])\n}\n","import React, { useState, useEffect } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\nimport { useAppConfig } from \"../AppConfig\"\n\nexport const ManagePluginsDialog = ({ onClose, open }) => {\n  const { fromConfig, setInConfig } = useAppConfig()\n  const [content, setContent] = useState()\n  useEffect(() => {\n    if (!open) return\n    setContent(fromConfig(\"pluginUrls\") || \"\")\n    //eslint-disable-next-line\n  }, [open])\n\n  return (\n    <SimpleDialog\n      title=\"Manage Plugins\"\n      onClose={onClose}\n      open={open}\n      actions={[\n        {\n          text: \"Save Plugins\",\n          onClick: () => {\n            setInConfig(\n              \"pluginUrls\",\n              content\n                .trim()\n                .split(\"\\n\")\n                .map((line) => line.trim())\n                .filter(Boolean)\n                .join(\"\\n\")\n            )\n            onClose()\n          },\n        },\n      ]}\n    >\n      <TextAreaWithUpload\n        content={content}\n        onChangeContent={setContent}\n        placeholder={\n          \"Write the URLs to each plugin here, one plugin url per line.\\n\\ne.g.\\nhttps://unpkg.com/udt-transform-delete-samples@1.0.4/plugin-config.js\\n\\nYou can also upload a text file with the urls.\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n\nexport default ManagePluginsDialog\n","// @flow\nimport React, { useState, useCallback } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport DatasetEditor from \"../DatasetEditor\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useFileHandler from \"../../utils/file-handlers\"\nimport download from \"in-browser-download\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\nimport { setIn } from \"seamless-immutable\"\nimport AppErrorBoundary from \"../AppErrorBoundary\"\nimport useEventCallback from \"use-event-callback\"\nimport usePreventNavigation from \"../../utils/use-prevent-navigation\"\nimport { FileContext } from \"../FileContext\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport ManagePluginsDialog from \"../ManagePluginsDialog\"\nimport usePluginProvider from \"../PluginProvider\"\nconst randomId = () => Math.random().toString().split(\".\")[1]\n\nexport default () => {\n  const {\n    file,\n    setFile,\n    openFile,\n    openUrl,\n    makeSession,\n    recentItems,\n    changeRecentItems,\n  } = useFileHandler()\n  usePreventNavigation(Boolean(file))\n  usePluginProvider()\n  const posthog = usePosthog()\n  const [errors] = useErrors()\n\n  const [managePluginsDialogOpen, setManagePluginsDialogOpen] = useState(false)\n\n  const [selectedBrush, setSelectedBrush] = useState(\"complete\")\n  const onCreateTemplate = useEventCallback((template) => {\n    setFile({\n      fileName: \"unnamed\",\n      content: template.dataset,\n      id: randomId(),\n      mode: \"local-storage\",\n    })\n  })\n\n  const openRecentItem = useEventCallback((item) => setFile(item))\n  const onClickHome = useEventCallback(() => setFile(null))\n  const onClickManagePlugins = useEventCallback(() =>\n    setManagePluginsDialogOpen(true)\n  )\n  const onDownload = useEventCallback((format) => {\n    if (!file) return\n    posthog.capture(\"download_file\", { file_type: format })\n    const userProvidedFileName = (file.sessionId || file.fileName).replace(\n      /\\.udt\\.(csv|json)/,\n      \"\"\n    )\n    const outputName = userProvidedFileName + \".udt.\" + format\n    if (format === \"json\") {\n      download(JSON.stringify(file.content), outputName)\n    } else if (format === \"csv\") {\n      download(toUDTCSV(file.content), outputName)\n    }\n  })\n\n  const inSession = file && file.mode === \"server\"\n  const [sessionBoxOpen, changeSessionBoxOpen] = useState(false)\n\n  const onJoinSession = useCallback(\n    async (sessionName) => {\n      await openUrl(sessionName)\n    },\n    [openUrl]\n  )\n\n  const onLeaveSession = useEventCallback(() =>\n    setFile({\n      ...file,\n      mode: \"local-storage\",\n      fileName: file.fileName || `copy_of_${file.id}`,\n    })\n  )\n\n  const onChangeDataset = useEventCallback((newDataset) => {\n    setFile(setIn(file, [\"content\"], newDataset))\n  })\n\n  return (\n    <>\n      <FileContext.Provider value={{ file, setFile }}>\n        <HeaderContext.Provider\n          value={{\n            title: file\n              ? file.mode === \"local-storage\"\n                ? file.fileName\n                : file.url\n              : \"unnamed\",\n            interfaceType: file?.content?.interface?.type,\n            recentItems,\n            changeRecentItems,\n            onClickTemplate: onCreateTemplate,\n            onClickHome,\n            onClickManagePlugins,\n            onOpenFile: openFile,\n            onOpenRecentItem: openRecentItem,\n            inSession,\n            sessionBoxOpen,\n            changeSessionBoxOpen,\n            onJoinSession,\n            onLeaveSession,\n            onCreateSession: makeSession,\n            fileOpen: Boolean(file),\n            onDownload,\n            onChangeSelectedBrush: setSelectedBrush,\n            selectedBrush,\n            isWelcomePage: !file,\n          }}\n        >\n          <div>\n            {!file ? (\n              <StartingPage\n                onFileDrop={openFile}\n                onOpenTemplate={onCreateTemplate}\n                recentItems={recentItems}\n                onOpenRecentItem={openRecentItem}\n                onClickOpenSession={() => changeSessionBoxOpen(true)}\n              />\n            ) : (\n              <AppErrorBoundary>\n                <DatasetEditor\n                  file={file}\n                  key={file.id}\n                  {...file}\n                  selectedBrush={selectedBrush}\n                  inSession={inSession}\n                  dataset={file.content}\n                  onChangeDataset={onChangeDataset}\n                  onChangeFile={setFile}\n                  authConfig\n                  recentItems={recentItems}\n                />\n              </AppErrorBoundary>\n            )}\n            <ManagePluginsDialog\n              open={managePluginsDialogOpen}\n              onClose={() => setManagePluginsDialogOpen(false)}\n            />\n          </div>\n        </HeaderContext.Provider>\n      </FileContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport DatasetEditor from \"../DatasetEditor\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useElectron from \"../../utils/use-electron.js\"\nimport templates from \"../StartingPage/templates\"\nimport useEventCallback from \"use-event-callback\"\nimport { setIn } from \"seamless-immutable\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\nimport useFileHandler from \"../../utils/file-handlers\"\n\nconst randomId = () => Math.random().toString().split(\".\")[1]\n\nexport default () => {\n  const {\n    file,\n    setFile,\n    openFile,\n    openUrl,\n    makeSession,\n    saveFile,\n    recentItems,\n  } = useFileHandler()\n\n  const [selectedBrush, setSelectedBrush] = useState(\"complete\")\n  const [errors] = useErrors()\n\n  const { remote, ipcRenderer } = useElectron()\n\n  const onCreateTemplate = useEventCallback((template) => {\n    setFile({\n      fileName: \"unnamed\",\n      content: template.dataset,\n      id: randomId(),\n      mode: \"filesystem\",\n    })\n  })\n\n  const openRecentItem = useEventCallback((item) => setFile(item))\n  const onClickHome = useEventCallback(() => setFile(null))\n\n  useEffect(() => {\n    const onOpenWelcomePage = () => setFile(null)\n    const onNewFile = (arg0, { templateName } = {}) => {\n      onCreateTemplate(\n        templates.find((t) => t.name === templateName) || templates[0]\n      )\n    }\n    const saveFileAs = () => saveFile({ saveAs: true })\n    const exportToCSV = async () => {\n      if (!file) return\n      let { cancelled, filePath } = await remote.dialog.showSaveDialog({\n        filters: [{ name: \".udt.csv\", extensions: [\"udt.csv\"] }],\n      })\n      if (cancelled) return\n      filePath =\n        !filePath || filePath.endsWith(\".csv\")\n          ? filePath\n          : `${filePath}.udt.csv`\n\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(filePath, toUDTCSV(file.content))\n    }\n    const onOpenFileFromToolbar = (e, file) => openFile(file)\n\n    ipcRenderer.on(\"open-welcome-page\", onOpenWelcomePage)\n    ipcRenderer.on(\"new-file\", onNewFile)\n    ipcRenderer.on(\"open-file\", onOpenFileFromToolbar)\n    ipcRenderer.on(\"save-file\", saveFile)\n    ipcRenderer.on(\"save-file-as\", saveFileAs)\n    ipcRenderer.on(\"export-to-csv\", exportToCSV)\n    return () => {\n      ipcRenderer.removeListener(\"open-welcome-page\", onOpenWelcomePage)\n      ipcRenderer.removeListener(\"new-file\", onNewFile)\n      ipcRenderer.removeListener(\"open-file\", onOpenFileFromToolbar)\n      ipcRenderer.removeListener(\"save-file\", saveFile)\n      ipcRenderer.removeListener(\"save-file-as\", saveFileAs)\n      ipcRenderer.removeListener(\"export-to-csv\", exportToCSV)\n    }\n  }, [file, setFile, ipcRenderer, openFile, onCreateTemplate, remote, saveFile])\n\n  const inSession = file && file.mode === \"server\"\n  const [sessionBoxOpen, changeSessionBoxOpen] = useState(false)\n\n  const onJoinSession = useEventCallback(async (sessionName) => {\n    await openUrl(sessionName)\n  })\n\n  const onLeaveSession = useEventCallback(() =>\n    setFile({\n      ...file,\n      mode: \"local-storage\",\n      fileName: file.fileName || `copy_of_${file.id}`,\n    })\n  )\n\n  const collaborateError = (file?.content?.samples || []).some((sample) =>\n    [sample.imageUrl, sample.videoUrl, sample.pdfUrl]\n      .filter(Boolean)\n      .map((a) => a.includes(\"file://\"))\n      .some(Boolean)\n  )\n    ? \"Some URLs (links) in this file are connected to files on your computer. Use the Samples > Transform > Transform Files to Web URLs to upload these files, then collaboration will be available.\"\n    : null\n\n  return (\n    <>\n      <HeaderContext.Provider\n        value={{\n          recentItems,\n          onClickTemplate: onCreateTemplate,\n          onClickHome,\n          title: file\n            ? file.mode !== \"server\"\n              ? file.fileName\n              : file.url\n            : \"unnamed\",\n          fileOpen: Boolean(file),\n          interfaceType: file?.content?.interface?.type,\n          onOpenRecentItem: openRecentItem,\n          isDesktop: true,\n          onOpenFile: openFile,\n          selectedBrush,\n          onChangeSelectedBrush: setSelectedBrush,\n\n          // collaboration session\n          inSession,\n          sessionBoxOpen,\n          changeSessionBoxOpen,\n          collaborateError,\n          onJoinSession,\n          onLeaveSession,\n          onCreateSession: makeSession,\n          isWelcomePage: !file,\n        }}\n      >\n        {!file ? (\n          <StartingPage\n            showDownloadLink={false}\n            onFileDrop={openFile}\n            onOpenTemplate={onCreateTemplate}\n            recentItems={recentItems}\n            onOpenRecentItem={openRecentItem}\n          />\n        ) : (\n          <DatasetEditor\n            key={file.id}\n            {...file}\n            inSession={inSession}\n            selectedBrush={selectedBrush}\n            dataset={file.content}\n            onChangeFileName={(newName) => {\n              setFile(setIn(file, [\"fileName\"], newName))\n            }}\n            onChangeDataset={(newOHA) => {\n              setFile(setIn(file, [\"content\"], newOHA))\n            }}\n          />\n        )}\n      </HeaderContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","import React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    width: \"100vw\",\n    height: \"100vh\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  root: {\n    display: \"flex\",\n    \"& > * + *\": {\n      marginLeft: theme.spacing(2),\n    },\n  },\n}))\n\nexport default function Loading() {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.root}>\n        <CircularProgress />\n      </div>\n    </div>\n  )\n}\n","import React, { Suspense } from \"react\"\nimport Theme from \"./components/Theme\"\nimport WebApp from \"./components/WebApp\"\nimport { RecoilRoot } from \"recoil\"\nimport DesktopApp from \"./components/DesktopApp\"\nimport { ToastProvider } from \"./components/Toasts\"\nimport useElectron from \"./utils/use-electron.js\"\nimport { AppConfigProvider } from \"./components/AppConfig\"\nimport { AuthProvider } from \"./utils/auth-handlers/use-auth.js\"\nimport { LabelHelpProvider } from \"./components/LabelHelpView\"\nimport { HotkeyStorageProvider } from \"./components/HotkeyStorage\"\nimport \"./App.css\"\n\nimport Loading from \"./components/Loading\"\n\n// Importing Internalization file\nimport \"./i18n\"\n\nexport const App = () => {\n  const electron = useElectron()\n  return (\n    <RecoilRoot>\n      <Suspense fallback={Loading}>\n        <Theme>\n          <AppConfigProvider>\n            <AuthProvider>\n              <LabelHelpProvider>\n                <ToastProvider>\n                  <HotkeyStorageProvider>\n                    {Boolean(electron) ? <DesktopApp /> : <WebApp />}\n                  </HotkeyStorageProvider>\n                </ToastProvider>\n              </LabelHelpProvider>\n            </AuthProvider>\n          </AppConfigProvider>\n        </Theme>\n      </Suspense>\n    </RecoilRoot>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}